<style>
	/*#misconceptions_summary {
	  border-collapse: collapse;
	}
	#misconceptions_summary th {
	  text-align: left;
	  font-size: 1.2em;
	}
	#misconceptions_summary td.red_button {
		padding: 10px 15px;
		background: url('/images/red_button.png');
		background-size:36px 36px;
		background-repeat:no-repeat;
		color:white;
	}
	#misconceptions_summary td.misconceptions_summary_row_standard {
	  padding: 2px 5px;
	}
	#misconceptions_summary_end_row {
	  border-bottom: 1px dotted #ccc;
	  padding: 2px 5px;
	}

	#misconceptions_summary td.misconception_heading {
	  font-weight:bold;
	}*/
	.misconception{
	}
	.explanation_url_frame{
		border: 2px solid #888;
		border-radius: 3px;
		width: 800px;
		height: 500px;
		float: left;
		margin-bottom: 30px;
		padding: 5px;
	}
	.misconception_table{
		float: left;
	}
	.misconception_table td{
		width: 160px;
		padding-left: 10px;
		padding-right: 10px;
		padding-top: 5px;
		padding-bottom: 5px;
	}
	.difficulties{
		float: left;
	}
	.difficulties td{
		padding-left: 10px;
		padding-right: 10px;
		padding-top: 5px;
		padding-bottom: 5px;
	}
</style>

<h2>Student Misconceptions</h2>
<div class="misconceptions">
  <% @misconceptions.active.each_with_index do |misconception, index| -%>
  	<div class="misconception">
  		<iframe src="<%= misconception.explanation_url %>" class="explanation_url_frame"></iframe>
  		<table class="misconception_table">
	      <tbody>
	        <tr class="misconceptions_summary_row">
		        <td class="misconceptions_summary_row_standard misconception_heading">
		        	<%= index+1 %>.&nbsp<%= misconception.name %>&nbsp<%= "- #{misconception.description}" if !misconception.description.empty? %>&nbsp<%= link_to(image_tag("question_mark_blue.png", :size => "16x16"), h(misconception.explanation_url), :target => "_blank") if (!misconception.explanation_url.empty?) %>
	          </td>
		      </tr>
	        <tr>
	          <td>
	            &nbsp Highly Likely:
	          </td>
	        </tr>
		      <tr>
	          <td class="misconceptions_summary_row_standard" style="background-color:#FFCCCC;">
	          	<% @high_probability["#{misconception.id}"].each_with_index do |user_id, index| -%>
	          		<a href="<%= context_url(@course, :context_quiz_history_url, @quiz, :quiz_submission_id => @submissions["#{user_id}"]) %>" class="name"><%= User.find(user_id).name %></a><%= ', ' unless index == @high_probability["#{misconception.id}"].count-1 %> 
	          	<% end -%>
	          </td>
	        </tr>
	        <tr>
	          <td>
	            &nbsp Somewhat Likely:
	          </td>
	        </tr>
	        <tr>
	          <td class="misconceptions_summary_row_standard" style="background-color:#FFCCCC;">
	          	<% @somewhat_probability["#{misconception.id}"].each_with_index do |user_id, index| -%>
	          		<a href="<%= context_url(@course, :context_quiz_history_url, @quiz, :quiz_submission_id => @submissions["#{user_id}"]) %>" class="name"><%= User.find(user_id).name %></a><%= ', ' unless index == @somewhat_probability["#{misconception.id}"].count-1 %>
	          	<% end -%>
	          </td>
	        </tr>
	      </tbody>
	    </table>
	  </div>
  <% end -%>
  <div class="difficulties">
  	<h2>Students with difficulties:</h2>
  	<table>
  		<tbody>
  			<tr>
				  <% @user_difficulties.each_with_index do |user_difficulty, index| -%>
				  	<% if user_difficulty.last == "&#10004;" -%>
					  	<td style="background-color:#FFCCCC;">
					  		<a href="<%= context_url(@course, :context_quiz_history_url, @quiz, :quiz_submission_id => @submissions["#{user_difficulty.first}"]) %>" class="name"><%= User.find(user_difficulty.first).name %></a><%= ', ' unless index == @user_difficulties.count-1 %>
					  	</td>
				  	<% end -%>
				  <% end -%>
			  </tr>
			</tbody>
	  </table>
	</div>




</div>