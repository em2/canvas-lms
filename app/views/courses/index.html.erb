<% content_for :page_title, t('titles.courses', 'Courses') %>

<% content_for :auto_discovery do %>
  <% if @current_user %>
      <%= auto_discovery_link_tag(:atom, feeds_user_format_path(@current_user.feed_code, :atom), {:title => t('titles.rss.course_announcements', "Course Announcements Atom Feed")}) %>
  <% end %>
<% end %>

<% if show_user_create_course_button(@current_user) && (@is_admin || @is_teacher) %>
    <% content_for :right_side do %>
        <!-- <div class="rs-margin-lr rs-margin-top">
            <a href="<%#= getting_started_path(:fresh => 1) %>" style="font-size: 1.3em;" class="button button-sidebar-wide"><%#= t('links.start_course', %{Start a New Course}) %></a>
        </div> -->
    <% end %>

    <% content_for :generate_rosters do -%>
      <%= render :partial => 'rosters/generate_rosters'%>
    <% end -%>
<% end %>

<% jammit_css :context_list %>

<% unless @current_enrollments.empty? %>
  <h2><%= t('headings.my_courses', %{My Courses}) %></h2>
  <ul class="unstyled_list context_list current_enrollments">
    <% @current_enrollments.each do |enrollment| %>
      <% if teacher_role? %>
        <%= render :partial => "shared/current_enrollment", :object => enrollment, :locals => {:my_classes => true} %>
      <% else %>
      <h3><%= enrollment.course.name %></h3>
        <ul class="nav nav-sidebar assessments">
          <% enrollment.course.quizzes.active.each do |quiz| %>
            <li>
              <% if !quiz.quiz_submissions.for_user_ids(@current_user.id).present? || quiz.quiz_submissions.for_user_ids(@current_user.id).last.attempts_left > 0 %>
                <%= link_to quiz.title, course_quiz_take_path(enrollment.course.id, quiz.id), :class => 'sidebar_text  sidebar_assessment' %>
              <% else %>
                <%= quiz.title %>
              <% end -%>
            </li>
          <% end -%>
        </ul>
      <% end -%>
    <% end %>
  </ul>
<% end %>

<% unless @past_enrollments.empty? %>
  <h2><%= t('headings.past_enrollments', %{Past Enrollments}) %></h2>
  <ul class="unstyled_list context_list past_enrollments">
    <% @past_enrollments.each do |enrollment| %>
      <%= render :partial => "shared/current_enrollment", :object => enrollment, :locals => {:my_classes => true} %>
    <% end %>
  </ul>
<% end %>
