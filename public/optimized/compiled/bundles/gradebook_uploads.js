(function(){var a={};define("use",{version:"0.2.0",load:function(b,c,d,e){var f=e.use&&e.use[b];if(!f)return d();a[b]={deps:f.deps||[],attach:f.attach},c(f.deps||[],function(){c([b],function(){return attach=f.attach,e.isBuild?d():typeof attach=="function"?d(attach.apply(window,arguments)):d(window[attach])})})},write:function(b,c,d){var e=a[c],f={attach:null,deps:""};typeof attach=="function"?f.attach="return "+e.attach.toString()+";":f.attach="return window['"+e.attach+"'];",e.deps.length&&(f.deps="'"+e.deps.toString().split(",").join("','")+"'"),d(["define('",b,"!",c,"', ","[",f.deps,"],","function() {",f.attach,"}",");\n"].join(""))}})})(),function(){function A(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&w.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&w.isFunction(b.isEqual))return b.isEqual(a);var d=i.call(a);if(d!=i.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&A(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(w.has(a,h)){f++;if(!(g=w.has(b,h)&&A(a[h],b[h],c)))break}if(g){for(h in b)if(w.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new E(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=w),exports._=w):a._=w,w.VERSION="1.3.1";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(w.has(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=w.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=w.toArray(a).reverse();return d&&!e&&(b=w.bind(b,d)),e?w.reduce(f,b,c,d):w.reduce(f,b)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),!!e)};var y=w.some=w.any=function(a,b,d){b||(b=w.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(c=y(a,function(a){return a===b}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(w.isFunction(b)?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&w.isEmpty(a))return-Infinity;var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&w.isEmpty(a))return Infinity;var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.shuffle=function(a){var b=[],c;return x(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={},d=w.isFunction(b)?b:function(a){return a[b]};return x(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},w.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a,b){return w.reduce(a,function(a,c){return w.isArray(c)?a.concat(b?c:w.flatten(c)):(a[a.length]=c,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c){var d=c?w.map(a,c):a,e=[];return a.length<3&&(b=!0),w.reduce(d,function(c,d,f){if(b?w.last(c)!==d||!c.length:!w.include(c,d))c.push(d),e.push(a[f]);return c},[]),e},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a){var b=w.flatten(g.call(arguments,1),!0);return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var z=function(){};w.bind=function(a,b){var c,d;if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));if(!w.isFunction(a))throw new TypeError;return d=g.call(arguments,2),c=function(){if(this instanceof c){z.prototype=a.prototype;var e=new z,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return w.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))},w.throttle=function(a,b){var c,d,e,f,g,h=w.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},w.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},w.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return a>0?function(){if(--a<1)return b.apply(this,arguments)}:b()},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)w.has(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isObject(a)?w.isArray(a)?a.slice():w.extend({},a):a},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){return A(a,b,[])},w.isEmpty=function(a){if(a==null)return!0;if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(w.has(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)=="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return i.call(a)=="[object Arguments]"},w.isArguments(arguments)||(w.isArguments=function(a){return!!a&&!!w.has(a,"callee")}),w.isFunction=function(a){return i.call(a)=="[object Function]"},w.isString=function(a){return i.call(a)=="[object String]"},w.isNumber=function(a){return i.call(a)=="[object Number]"},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},w.isDate=function(a){return i.call(a)=="[object Date]"},w.isRegExp=function(a){return i.call(a)=="[object RegExp]"},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.has=function(a,b){return j.call(a,b)},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.mixin=function(a){x(w.functions(a),function(b){G(b,w[b]=a[b])})};var B=0;w.uniqueId=function(a){var b=B++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,D=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||C,function(a,b){return"',_.escape("+D(b)+"),'"}).replace(c.interpolate||C,function(a,b){return"',"+D(b)+",'"}).replace(c.evaluate||C,function(a,b){return"');"+D(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,w):function(a){return e.call(this,a,w)}},w.chain=function(a){return w(a).chain()};var E=function(a){this._wrapped=a};w.prototype=E.prototype;var F=function(a,b){return b?w(a).chain():a},G=function(a,b){E.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),F(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],F(c,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];E.prototype[a]=function(){return F(b.apply(this._wrapped,arguments),this._chain)}}),E.prototype.chain=function(){return this._chain=!0,this},E.prototype.value=function(){return this._wrapped}}.call(this),define("underscore",function(){}),define("use!underscore",[],function(){return window._}),define("translations/gradebook",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{em2:{gradebook:{alerts:{no_active_students:"Sorry, there are either no active students in the class or none are gradable by you."},confirms:{unsaved_changes:"The following students have unsaved changes to their assessment submissions: \n%{users}\nContinue anyway?"},links:{finish_scoring:"Finish Scoring this Assessment",view_quiz:"View this Assessment"}}},es:{gradebook:{alerts:{no_active_students:"Perdón, no hay estudiantes activos en este curso o no pueden ser calificados por usted.",no_students_in_section:"No se pudieron encontrar estudiantes en esa sección, regresando para mostrar todas las secciones.",none_to_update:"Nada que Actualizar",scores_updated:{one:"1 calificación de estudiante actualizada",other:"%{count} calificaciones de estudiantes actualizados"},students_updated:{one:"1 Estudiante Actualizado",other:"%{count} estudiantes actualizados"}},assignment_details:"Detalles de la Tarea",buttons:{change_section:"Cambiar Sección",saving_settings:"Guardar Configuraciones...",submit_comment:"Enviar Comentario",submitting:"Enviando...",upload_data:"Cargar Información"},cancel_button:"Cancelar",click_to_change:"Haga click para probar una calificación diferente",click_to_expand:"Haga click para expandir",computing_grades:"Computando Calificaciones...",confirms:{delete_comment:"¿Seguro que quiere borrar este comentario?",unsaved_changes:"Los siguientes estudiantes tienen cambios no guardados en los envíos de sus evaluaciones: \n%{users}\n¿Continuar?"},curve_grade_for_course:"Aplicar Curva a %{assignment}",curve_grades:"Aplicar Curva a los Grados",default_grade_for_course:"Calificación Predeterminada para %{assignment}",download_scores:"Descargar Calificaciones (%{format})",download_submissions:"Descargar los Envíos",edit_view_rubric:"Ver Rúbrica",errors:{failed_to_load:"El libro de calificaciones no se pudo cargar, intente recargar la página",none_to_update:"Nada que Actualizar",select_an_option:"Por favor seleccione una opción",upload_as_zip:"Por favor cargue los archivos como un .zip"},grade:"grado: %{grade}",graded_by_me:"%{graded_time} por mí",graded_then_resubmitted:"calificado, luego reenviado (%{when})",hide_all_things:"Esconder %{things}",hide_column:"Esconder Columna",hide_student_name:"Esconder los Nombres de los Estudiantes",ignore_ungraded:"Ignorar Tareas No Calificadas",include_ungraded:"Incluír Tareas Actualizadas",labels:{details:"Detalles"},links:{download_attachment:"Descargando %{attachment}",finish_scoring:"Terminar la Calificación de esta Evaluación",go_to_submission:"Ir al URL de Envío",submission_details:"Detalles de Envío",view_quiz:"Ver esta Evaluación",view_submission:"Ver Envío"},loud_late:"TARDE",message_students_who:"Enviar Mensaje a Estudiante Que...",mute_assignment:"Obviar Tarea",new_assessment:"[Tarea Nueva]",no_submission_time:"ningun tiempo de envío",nth_student:"Estudiante %{n}",percent:"Porcentaje",publish_to_sis:"Publicar calificaciones a SIS",reupload_submission_files:"Recargar los Archivos de Envío",reupload_submissions:"Recargar los Envíos",set_default_grade:"Establecer Calificación Predeterminada",set_group_weights:"Establecer Peso por Grupo",show_student_name:"Mostrar los Nombres de Estudiantes",showing_all_sections:"Mostrando Todas las Secciones",showing_section:"Mostrando la Sección: %{section}",sort_columns_by:"Ordenar Columnas Por...",sort_rows_by:"Ordenar Filas Por...",speed_grader:"Calificador Rápido",student:"Estudiante",student_mute_notification:"El instructor está trabajando en las calificaciones",student_name:"Nombre del Estudiante",students_who:{havent_submitted_yet:"Aún no ha enviado",scored_less_than:"Obtuvo menos de",scored_more_than:"Obtuvo más de"},submission_information:"Información del Envío",teacher_muted_title:"Tarea ha sido obviada",titles:{assignment_groups:"Grupos de Trabajo",click_to_record:"Haga click en el micrófono para grabar sus comentarios",dropped_assignment_no_total:"Esta tarea no será considerada en el cálculo total",hypothetical_score:'Esta es una calificación "que pasa si"',loading:"Cargando...",turnitin_score:"Calificación de Similaridad de Turnitin -- más información"},tooltips:{submission_dropped:"Este envío se eliminó para la calificación",submitted_late:"Este envío se envió tarde"},unmute_assignment:"Activar Tarea",unmute_button:"Activar la Tarea",upload_scores:"Cargar Calificaciones (desde %{format})",view_grading_history:"Ver el Historial de Calificación"},not_applicable:"N/A"}}})}),define("vendor/slickgrid-googlecode/slick.globaleditorlock",[],function(){return window.GlobalEditorLock=new function(){var a=null;this.isEditing=function(){return a!=null},this.hasLock=function(b){return a==b},this.enterEditMode=function(b){if(a!=null)throw"GlobalEditorLock : enterEditMode : currentEditor == null";if(!b.commitCurrentEdit)throw"GlobalEditorLock : enterEditMode : editor must implement .commitCurrentEdit()";if(!b.cancelCurrentEdit)throw"GlobalEditorLock : enterEditMode : editor must implement .cancelCurrentEdit()";a=b},this.leaveEditMode=function(b){if(a!=b)throw"GlobalEditorLock : leaveEditMode() : currentEditor != editor";a=null},this.commitCurrentEdit=function(){return a?a.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){a&&a.cancelCurrentEdit()}},window.GlobalEditorLock}),define("vendor/jquery.getScrollbarWidth",["jquery"],function(a){var b=0;a.getScrollbarWidth=function(){if(!b)if(a.browser.msie){var c=a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:-1e3}).appendTo("body"),d=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:-1e3}).appendTo("body");b=c.width()-d.width(),c.add(d).remove()}else{var e=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:-1e3}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});b=100-e.width(),e.parent().remove()}return b}}),define("vendor/jquery.template",["jquery"],function(a){a.extend({template:function(a,b){a=a||"",b=b||{};var c=/#\{([^{}]*)}/g,d=function(a,c){return typeof b[c]=="string"||typeof b[c]=="number"?b[c]:a};return a.replace(c,d)}})}),define("vendor/slickgrid-googlecode/slick.editors",["jquery","vendor/jquery.template"],function(a){window.requiredFieldValidator=function(b){return b==null||b==undefined||!a.trim(b+"").length?{valid:!1,msg:"This is a required field"}:{valid:!0,msg:null}},window.TextCellEditor=function(b,c,d,e){var f,g=d,h=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />"),d!=null&&(f[0].defaultValue=d,f.val(g)),f.appendTo(b),f.focus().select()},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a),g=a},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()},window.GradeCellEditor=function(b,c,d,e){if(e.active){d=d||{};var f,g=d.grade,h=this;this.init=function(){switch(c.grading_type){case"letter_grade":var e=[{text:"--",value:""},{text:"A",value:"A"},{text:"A-",value:"A-"},{text:"B+",value:"B+"},{text:"B",value:"B"},{text:"B-",value:"B-"},{text:"C+",value:"C+"},{text:"C-",value:"C-"},{text:"D+",value:"D+"},{text:"D",value:"D"},{text:"D-",value:"D-"},{text:"F",value:"F"}],h="";a.each(e,function(){h+='<option value="'+this.value+'" '+(this.value==d.grade?"selected":"")+">"+this.text+"</option>"}),f=a("<select>"+h+"</select>");break;default:f=a("<INPUT type=text class='editor-text' />")}typeof d.grade!="undefined"&&d.grade+""!=""&&(f[0].defaultValue=d.grade,f.val(g)),f.appendTo(b),f.focus().select(),typeof d.uploaded_grade=="undefined"&&(d.uploaded_grade=d.grade);var i={originalScore:d.original_grade||"--",uploadedScore:d.uploaded_grade||"--"},j='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all">  <table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></table></div> </div>';a(a.template(j,i)).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a.grade},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()}else{var f;this.init=function(){var a=d?d.grade:"";b.removeClass("selected editable").html(a)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return d},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()}},window.StudentNameEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.name:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.StudentNameFormatter=function(a,b,c,d,e){return c?c.name:""},window.NullEditor=function(a,b,c,d){var e,f=c,g=this;this.init=function(){a.removeClass("selected editable").html(c)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.NullGradeEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.grade:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.simpleGradeCellFormatter=function(a,b,c,d,e){return c?c.grade:""},window.PassFailCellFormatter=function(a,b,c,d,e){c=c||{};switch(c.grade){case"pass":return"<span class='pass_fail pass' />";case"fail":return"<span class='pass_fail fail' />";default:return""}},window.PassFailSelectCellEditor=function(b,c,d,e){d=d||{};var f,g=d,h=this;this.init=function(){f=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value=''>---</OPTION><OPTION value='pass'>Pass</OPTION><OPTION value='fail'>Fail</OPTION></SELECT>"),f.val(g.grade),f.appendTo(b),f.focus(),f.change(function(){d.grade=a(this).val()});var c='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all"><table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></tbody></table></div> </div>';a(a.template(c,{originalScore:10,uploadedScore:15})).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a},this.getValue=function(){return d},this.isValueChanged=function(){return f.val()!=g},this.validate=function(){return{valid:!0,msg:null}},this.init()}}),define("vendor/slickgrid-googlecode/slick.grid",["vendor/slickgrid-googlecode/slick.globaleditorlock","jquery","jqueryui/sortable","jqueryui/resizable","vendor/jquery.getScrollbarWidth"],function(a,b){return function c(c,d,e,f){function N(){f=b.extend({},g,f),c.empty().attr("tabIndex",0).attr("hideFocus",!0).css("overflow","hidden").css("outline",0).css("position","relative").addClass(k),m=b("<div class='grid-header' style='overflow:hidden;position:relative;' />").appendTo(c),n=b("<div style='width:10000px' />").appendTo(m),o=b("<div tabIndex='0' hideFocus style='width:100%;overflow:scroll;outline:0;position:relative;outline:0px;'>").appendTo(c),p=b("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo(o),o.height(c.innerHeight()-m.outerHeight());for(var a=0;a<e.length;a++){var d=e[a];G[d.id]=a,d.width||(d.width=f.defaultColumnWidth),d.formatter||(d.formatter=W);var h=b("<div class='h c"+a+"' cell="+a+" id='"+d.id+"' />").html(d.name).width(d.width).appendTo(n);d.rerenderOnResize&&h.append(" <img src='images/help.png' align='absmiddle' title='This column has an adaptive formatter.  Resize to a smaller size to see alternative data representation.'>")}n.find(".h").each(function(){var a=parseInt(b(this).attr("cell")),c=e[a];if(c.resizable===!1)return;b(this).resizable({handles:"e",minWidth:c.minWidth?c.minWidth:null,maxWidth:c.maxWidth?c.maxWidth:null,stop:function(a,c){var d=b(this).attr("id"),f=G[d];e[f].width=b(this).width(),b("body").append("<style class='slick-style'> ."+k+" .grid-canvas .c"+f+"{width: "+e[f].width+"px;} </style>"),be(),e[f].rerenderOnResize&&_(),bh()}})}),f.enableColumnReorder&&n.sortable({axis:"x",cancel:".ui-resizable-handle",update:function(a,b){console.time("column reorder");var c=n.sortable("toArray"),d={};for(var f=0;f<e.length;f++)d[e[f].id]=e[f];for(var f=0;f<c.length;f++)G[c[f]]=f,e[f]=d[c[f]];_(),P(),O(),bh(),l.onColumnsReordered&&l.onColumnsReordered(),a.stopPropagation(),console.timeEnd("column reorder")}}),n.bind("click",function(a){if(!b(a.target).hasClass(".h"))return;var c=b(a.target).attr("id");l.onColumnHeaderClick&&l.onColumnHeaderClick(e[G[c]])}),O(),be(),bh(),f.manualScrolling||o.bind("scroll",bi),p.bind("keydown",bj),p.bind("click",bk),p.bind("dblclick",bl),b.browser.msie&&(o[0].onselectstart=function(){if(event.srcElement.tagName!="INPUT"&&event.srcElement.tagName!="TEXTAREA")return!1})}function O(){for(var a=0;a<e.length;a++)b("body").append("<style class='slick-style'> ."+k+" .grid-canvas .c"+a+" { width:"+e[a].width+"px } </style>")}function P(){b("body").find("style.slick_style").remove()}function Q(){v&&bx(),n.sortable("destroy"),n.find(".h").resizable("destroy"),P(),c.empty().removeClass(k)}function R(a,b,c){n.find(".h[id="+a+"]").removeClass(c).addClass(b)}function S(a){return G[a]}function T(){return E.concat()}function U(c){if(a.isEditing()&&!a.hasLock(l))throw"Grid : setSelectedRows : cannot set selected rows when somebody else has an edit lock";var d={};for(var e=0;e<c.length;e++)d[c[e]]=!0;for(var e=0;e<E.length;e++){var f=E[e];w[f]&&!d[f]&&b(w[f]).removeClass("selected")}for(var e=0;e<c.length;e++){var f=c[e];w[f]&&!F[f]&&b(w[f]).addClass("selected")}E=c.concat(),F=d}function V(a){if(v&&!bw())return;bn(null),f.enableAddRow!=a.enableAddRow&&ba(d.length),f=b.extend(f,a),bh()}function W(a,b,c,d,e){return c==null||c==undefined?"":c}function X(a,b){var c=d[b],f=b<d.length&&!c,g="r"+(f?" loading":"")+(F[b]?" selected":"");a.push("<div class='"+g+"' row='"+b+"' style='top:"+h*b+"px'>");for(var i=0,j=e.length;i<j;i++){var k=e[i],l;!k.active||!c.active,a.push("<div "+(k.unselectable?"":"hideFocus tabIndex=0 ")+"class='c c"+i+(k.cssClass?" "+k.cssClass:"")+(k.active&&c.active?" active-col-and-row":"")+"' cell="+i+">"),c&&b<d.length&&a.push(k.formatter(b,i,c[k.field],k,c)),a.push("</div>")}a.push("</div>")}function Y(a){var b=[];return X(b,a),b.join("")}function Z(a,b){console.time("cleanupRows");var c=x,d=p[0];for(var e in w)(e<a||e>b)&&e!=s&&(d.removeChild(w[e]),delete w[e],x--,K++);console.log("removed "+(c-x)+" rows"),console.timeEnd("cleanupRows")}function _(){console.log("removeAllRows"),p[0].innerHTML="",w={},K+=x,x=0}function ba(a){var b=w[a];if(!b)return;if(v&&s==a)throw"Grid : removeRow : Cannot remove a row that is currently in edit mode";C=0,b.parentNode.removeChild(b),b=null,delete w[a],x--,K++}function bb(a){console.time("removeRows");if(!a||!a.length)return;C=0;var b=[];for(var c=0,d=a.length;c<d;c++){if(v&&s==c)throw"Grid : removeRow : Cannot remove a row that is currently in edit mode";var e=w[a[c]];if(!e)continue;b.push(a[c])}if(x>10&&b.length==x)p[0].innerHTML="",w={},K+=x,x=0;else for(var c=0,f=b.length;c<f;c++){var e=w[b[c]];e.parentNode.removeChild(e),delete w[b[c]],x--,K++}console.timeEnd("removeRows")}function bc(a,c){if(!w[a])return;var f=b(w[a]).find(".c[cell="+c+"]");if(f.length===0)return;var g=e[c],h=d[a];v&&s==a&&t==c?v.setValue(h[g.field]):f[0].innerHTML=h?g.formatter(a,c,h[g.field],g,h):""}function bd(a){if(!w[a])return;b(w[a]).find(".c").each(function(b){var c=e[b];a==s&&b==t&&v?v.setValue(d[s][c.field]):d[a]?this.innerHTML=c.formatter(a,b,d[a][c.field],c,d[a]):this.innerHTML=""})}function be(){r=o.innerWidth(),q=o.innerHeight(),j=y=Math.ceil(q/h),i=Math.max(i,y+2*j);var a=0;for(var c=0;c<e.length;c++)a+=e[c].width+5;p.width(a);var g=p[0],k=f.enableAddRow?d.length:d.length-1;for(var c in w)c>=k&&(g.removeChild(w[c]),delete w[c],x--,K++);var l=Math.max(h*(d.length+y-2),q-b.getScrollbarWidth());o.scrollTop()>l-o.height()+b.getScrollbarWidth()&&o.scrollTop(l-o.height()+b.getScrollbarWidth()),p.height(l)}function bf(){return{top:Math.floor(A/h),bottom:Math.floor((A+q)/h)}}function bg(a,b){console.time("renderRows");var c=p[0],d=x,e=[],f=[],g=new Date;for(var h=a;h<=b;h++){if(w[h])continue;x++,f.push(h),X(e,h),J++}var i=document.createElement("div");i.innerHTML=e.join("");for(var h=0,j=i.childNodes.length;h<j;h++)w[f[h]]=c.appendChild(i.firstChild);x-d>5&&(D=(new Date-g)/(x-d)),console.log("rendered "+(x-d)+" rows"),console.timeEnd("renderRows")}function bh(){var a=bf(),b=Math.max(0,a.top-(C<0?j:5)),c=Math.min(f.enableAddRow?d.length:d.length-1,a.bottom+(C>0?j:5));x>10&&Math.abs(z-A)>h*i?_():Z(b,c),bg(b,c),z=A,I=null}function bi(){A=o[0].scrollTop;var a=Math.abs(z-A),b=o[0].scrollLeft;b!=B&&(m[0].scrollLeft=B=b);if(a<5*h)return;z==A?C=0:z<A?C=1:C=-1,I&&window.clearTimeout(I),a<y*h?bh():I=window.setTimeout(bh,50),l.onViewportChanged&&l.onViewportChanged()}function bj(b){switch(b.which){case 27:a.isEditing()&&a.hasLock(l)&&bx(l),u&&u.focus();break;case 9:b.shiftKey?bu(0,-1,!0):bu(0,1,!0);break;case 37:bu(0,-1);break;case 39:bu(0,1);break;case 38:bu(-1,0);break;case 40:case 13:bu(1,0);break;default:if(l.onKeyDown&&d[s]&&!v&&l.onKeyDown(b,s,t))return b.stopPropagation(),b.preventDefault(),!1;return}return b.stopPropagation(),b.preventDefault(),!1}function bk(a){var c=b(a.target).closest(".c");if(c.length===0)return;if(u==c[0]&&v!=null)return;var g=parseInt(c.parent().attr("row")),h=parseInt(c.attr("cell")),i=null;if(d[g]&&l.onClick&&(!v||(i=bw()))&&l.onClick(a,g,h))return a.stopPropagation(),a.preventDefault(),!1;f.enableCellNavigation&&!e[h].unselectable&&(i==1||i==null&&bw())&&bo(c[0])}function bl(a){var c=b(a.target).closest(".c");if(c.length===0)return;if(u==c[0]&&v!=null)return;f.editOnDoubleClick&&bs()}function bm(a,b){var c=Math.floor(b/h),d=0,f=0;for(var g=0;g<e.length&&f<b;g++)f+=e[g].width,d++;return{row:c,cell:d-1}}function bn(a,c){u!=null&&(br(),b(u).removeClass("selected")),u=a,u!=null?(s=parseInt(b(u).parent().attr("row")),t=parseInt(b(u).attr("cell")),b(u).addClass("selected"),bt(),f.editable&&!f.editOnDoubleClick&&(d[s]||s==d.length)&&(window.clearTimeout(H),c?H=window.setTimeout(bs,100):bs())):(s=null,t=null)}function bo(a,b){bn(a,b),a?U([s]):U([]),l.onSelectedRowsChanged&&l.onSelectedRowsChanged()}function bp(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}}function bq(a,b){return a<d.length&&!d[a]?!1:e[b].cannotTriggerInsert&&a>=d.length?!1:e[b].editor?!0:!1}function br(){if(!v)return;v.destroy(),b(u).removeClass("editable invalid"),d[s]&&(u.innerHTML=e[t].formatter(s,t,d[s][e[t].field],e[t],d[s])),v=null,b.browser.msie&&bp(),a.leaveEditMode(l)}function bs(){if(!u)return;if(!f.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";window.clearTimeout(H);if(!bq(s,t))return;a.enterEditMode(l),b(u).addClass("editable");var c=null;d[s]&&(c=d[s][e[t].field]),u.innerHTML="",v=new e[t].editor(b(u),e[t],c,d[s])}function bt(){if(!u)return;var a=o[0].scrollTop;(s+2)*h>a+q?(o[0].scrollTop=s*h,bi()):s*h<a&&(o[0].scrollTop=(s+2)*h-q,bi())}function bu(c,d,e){if(!u)return;if(!f.enableCellNavigation)return;if(!a.commitCurrentEdit())return;var g=w[s+c],h=g?b(g).find(".c[cell="+(t+d)+"][tabIndex=0]"):null;e&&c==0&&!(g&&h&&h.length)&&(!h||!h.length)&&(d>0?(g=w[s+c+1],h=g?b(g).find(".c[cell][tabIndex=0]:first"):null):(g=w[s+c-1],h=g?b(g).find(".c[cell][tabIndex=0]:last"):null)),g&&h&&h.length?(bo(h[0],f.asyncEditorLoading),v||u.focus()):u.focus()}function bv(c,g){if(c>d.length||c<0||g>=e.length||g<0)return;if(!f.enableCellNavigation||e[g].unselectable)return;if(!a.commitCurrentEdit())return;w[c]||bg(c,c);var g=b(w[c]).find(".c[cell="+g+"][tabIndex=0]")[0];bo(g),v||u.focus()}function bw(){if(v){if(v.isValueChanged()){var a=v.validate();if(a.valid){var c=v.getValue();return s<d.length?e[t].setValueHandler?e[t].setValueHandler(c,e[t],d[s]):d[s][e[t].field]=c:l.onAddNewRow&&l.onAddNewRow(e[t],c),br(),!0}return b(u).addClass("invalid"),b(u).stop(!0,!0).effect("highlight",{color:"red"},300),l.onValidationError&&l.onValidationError(u,a,s,t,e[t]),v.focus(),!1}br()}return!0}function bx(){br()}var g={enableAddRow:!0,manualScrolling:!1,editable:!0,editOnDoubleClick:!1,enableCellNavigation:!0,defaultColumnWidth:80,enableColumnReorder:!0,asyncEditorLoading:!0},h=24,i=50,j=5,k="slickgrid_"+Math.round(1e6*Math.random()),l=this,m,n,o,p,q,r,s,t,u=null,v=null,w={},x=0,y,z=0,A=0,B=0,C=1,D=10,E=[],F={},G={},H=null,I=null,J=0,K=0,L=document.createDocumentFragment(),M=!1;this.debug=function(){var a="";a+="\ncounter_rows_rendered:  "+J,a+="\ncounter_rows_removed:  "+K,a+="\nrenderedRows:  "+x,a+="\nnumVisibleRows:  "+y,a+="\nCAPACITY:  "+i,a+="\nBUFFER:  "+j,a+="\navgRowRenderTime:  "+D,alert(a)},this.benchmark_render_200=function(){_(),bg(0,200),Z()},this.stressTest=function(){console.time("benchmark-stress"),bg(0,500),Z(),console.timeEnd("benchmark-stress"),window.setTimeout(l.stressTest,50)},this.benchmarkFn=function(a){var b=new Date,c=new Array(arguments);c.splice(0,1),l[a].call(this,c),alert("Grid : benchmarkFn : "+a+" : "+(new Date-b)+"ms")},N(),b.extend(this,{onColumnHeaderClick:null,onClick:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,onSelectedRowsChanged:null,onColumnsReordered:null,destroy:Q,getColumnIndex:S,updateCell:bc,updateRow:bd,removeRow:ba,removeRows:bb,removeAllRows:_,render:bh,getViewport:bf,resizeCanvas:be,scroll:scroll,getCellFromPoint:bm,gotoCell:bv,editCurrentCell:bs,getSelectedRows:T,setSelectedRows:U,setColumnHeaderCssClass:R,commitCurrentEdit:bw,cancelCurrentEdit:bx})}}),define("gradebook_uploads",["i18n!gradebook","jquery","use!underscore","str/htmlEscape","vendor/slickgrid-googlecode/slick.grid","vendor/slickgrid-googlecode/slick.editors","jquery.instructure_forms","jquery.instructure_misc_helpers","jquery.templateData"],function(a,b,c,d,e){var f={init:function(){var c,f=b("#gradebook_grid"),g={columns:[{id:"student",name:a.t("student","Student"),field:"student",width:250,cssClass:"cell-title",editor:StudentNameEditor,validator:requiredFieldValidator,formatter:StudentNameFormatter}],options:{enableAddRow:!1,enableColumnReorder:!1,asyncEditorLoading:!0},data:[]};delete uploadedGradebook.missing_objects,delete uploadedGradebook.original_submissions,b.each(uploadedGradebook.assignments,function(){var a={id:this.id,name:d(this.title),field:this.id,width:200,editor:GradeCellEditor,formatter:simpleGradeCellFormatter,active:!0,original_id:this.original_id};g.columns.push(a),this.original_id?a.cssClass="active changed":a.cssClass="active new",a.setValueHandler=function(a,b,c){if(c[b.id])c[b.id].grade=a;else{var d={grade:a,assignment_id:b.id},e=c.submissions.push(d);c[b.id]=c.submissions[e-1]}}}),b.each(uploadedGradebook.students,function(){var a={student:this,id:this.id};b.each(this.submissions,function(){a[this.assignment_id]=this}),g.data.push(a),a.active=!0}),g.columns.length>1?(uploadedGradebook.unchanged_assignments&&b("#assignments_without_changes_alert").show(),b("#gradebook_grid_form").submit(function(a){b(this).find("input[name='json_data_to_submit']").val(JSON.stringify(uploadedGradebook))}).show(),b(window).resize(function(){f.height(b(window).height()-f.offset().top-50)}).triggerHandler("resize"),c=new e(f,g.data,g.columns,g.options),c.onColumnHeaderClick=function(a){}):b("#no_changes_detected").show()},handleThingsNeedingToBeResolved:function(){var e={},g={};b.each(["student","assignment"],function(a,c){var f=b("#"+c+"_resolution_template").remove(),g=f.find("select");e[c]=[],b.each(uploadedGradebook[c+"s"],function(){this.original_id||e[c].push(this)}),e[c].length&&(g.change(function(){b(this).next(".points_possible_section").css({opacity:0}),b(this).val()>0?(b("#"+c+"_resolution_template select option").removeAttr("disabled"),b("#"+c+"_resolution_template select").each(function(){b("#"+c+"_resolution_template select").not(this).find("option[value='"+b(this).val()+"']").attr("disabled",!0)})):b(this).val()==="new"&&b(this).next(".points_possible_section").css({opacity:1})}),b.each(uploadedGradebook.missing_objects[c+"s"],function(){b('<option value="'+this.id+'" >'+d(this.name||this.title)+"</option>").appendTo(g)}),b.each(e[c],function(a,d){f.clone(!0).fillTemplateData({iterator:d.id,data:{name:d.name,title:d.title,points_possible:d.points_possible}}).appendTo("#gradebook_importer_resolution_section ."+c+"_section table tbody").show().find("input.points_possible").change(function(){d.points_possible=b(this).val()})}),b("#gradebook_importer_resolution_section, #gradebook_importer_resolution_section ."+c+"_section").show())}),e.student.length||e.assignment.length?b("#gradebook_importer_resolution_section").submit(function(d){var e=!1;d.preventDefault(),b(this).find("select").each(function(){if(!b(this).val())return e=!0,b(this).errorBox(a.t("errors.select_an_option","Please select an option")),!1});if(e)return!1;b(this).find("select").each(function(){var a=b(this),d=a.attr("name").split("_"),e=d[0],f=d[1],g=a.val();switch(g){case"new":break;case"ignore":for(var h in uploadedGradebook[e+"s"])if(f==uploadedGradebook[e+"s"][h].id){uploadedGradebook[e+"s"].splice(h,1);break}break;default:var i=c.detect(uploadedGradebook[e+"s"],function(a){return f==a.id});i.id=i.original_id=g,e==="assignment"?b.each(uploadedGradebook.students,function(){var a=this,b=c.detect(a.submissions,function(a){return a.assignment_id==f});b.assignment_id=g;var d=c.detect(uploadedGradebook.original_submissions,function(b){return b.user_id==a.id&&b.assignment_id==g});d&&(b.original_grade=d.score)}):e==="student"&&b.each(i.submissions,function(){var a=this,b=c.detect(uploadedGradebook.original_submissions,function(b){return b.user_id==i.id&&b.assignment_id==a.assignment_id});b&&(a.original_grade=b.score)})}});var g=[];b.each(uploadedGradebook.assignments,function(a){uploadedGradebook.assignments[a].original_id&&c.all(uploadedGradebook.students,function(b){var c=b.submissions[a];return c.original_grade==c.grade||!c.original_grade&&!c.grade})&&g.push(a)}),c.each(g.reverse(),function(a){uploadedGradebook.assignments.splice(a,1),b.each(uploadedGradebook.students,function(){this.submissions.splice(a,1)})}),g.length!=0&&(uploadedGradebook.unchanged_assignments=!0),b(this).hide(),f.init()}):f.init()}};return f}),function(){require(["jquery","gradebook_uploads"],function(a,b){return a(b.handleThingsNeedingToBeResolved)})}.call(this),define("compiled/bundles/gradebook_uploads",function(){})