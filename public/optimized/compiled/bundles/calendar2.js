/*!
 * jQuery UI @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
/*!
 * jQuery UI @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
define("translations/calendar",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),function(){define("compiled/util/hsvToRgb",[],function(){var a;return a=function(a,b,c){var d,e,f,g,h,i,j,k,l;b/=100,c/=100,g=Math.floor(a/60%6),e=a/60-g,h=c*(1-b),i=c*(1-e*b),l=c*(1-(1-e)*b),k=[];switch(g){case 0:k=[c,l,h];break;case 1:k=[i,c,h];break;case 2:k=[h,c,l];break;case 3:k=[h,i,c];break;case 4:k=[l,h,c];break;case 5:k=[c,h,i]}return j=Math.min(255,Math.round(k[0]*256)),f=Math.min(255,Math.round(k[1]*256)),d=Math.min(255,Math.round(k[2]*256)),[j,f,d]}})}.call(this),define("translations/calendar.calendar_app",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),function(){define("compiled/str/splitAssetString",["str/pluralize"],function(a){return function(b){var c;if(c=b.match(/(.*)_(\d+)$/))return[a(c[1]),parseInt(c[2])]}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/util/Popover",[],function(){var b,c,d;return d=0,c=[],b=function(){function b(b,c){this.content=c,this.position=a(this.position,this),this.outsideClickHandler=a(this.outsideClickHandler,this),this.trigger=$(b.currentTarget),this.el=$(this.content).addClass("carat-bottom").attr("role","dialog").data("popover",this).keyup(a(function(a){if(a.keyCode===$.ui.keyCode.ESCAPE)return this.hide()},this)),this.el.delegate(".popover_close","click",a(function(a){return a.preventDefault(),this.hide()},this)),this.show(b)}return b.prototype.show=function(a){var b,e,f,g,h;while(h=c.pop())h.hide();return c.push(this),g="popover-"+d++,this.trigger.attr({"aria-haspopup":!0,"aria-owns":g}),this.el.attr({id:g,"aria-hidden":!1,"aria-expanded":!0}).appendTo(document.body).show(),this.el.find(":tabbable").not(".popover_close").first().focus(1),this.position(),this.el.find(".ui-menu-carat").remove(),f=this.trigger.offset().left-this.el.offset().left,b=a.pageX-this.trigger.offset().left,e=Math.min(Math.max(20,b),this.trigger.width()-20)+f,$('<span class="ui-menu-carat"><span /></span>').css("left",e).prependTo(this.el),this.positionInterval=setInterval(this.position,200),$(window).click(this.outsideClickHandler)},b.prototype.hide=function(){var a,b,d;for(a=0,d=c.length;a<d;a++)b=c[a],this===b&&c.splice(a,1);return this.el.detach(),clearInterval(this.positionInterval),$(window).unbind("click",this.outsideClickHandler)},b.prototype.ignoreOutsideClickSelector=".ui-dialog",b.prototype.outsideClickHandler=function(a){if(!$(a.target).closest(this.el.add(this.trigger).add(this.ignoreOutsideClickSelector)).length)return this.hide()},b.prototype.position=function(){return this.el.position({my:"center bottom",at:"center top",of:this.trigger,offset:"0 -10px",within:"#main",collision:"flipfit flipfit"})},b}()})}.call(this),define("translations/calendar.event_details",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.delete_item",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.reservation_over_limit_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),function(){var a={};define("use",{version:"0.2.0",load:function(b,c,d,e){var f=e.use&&e.use[b];if(!f)return d();a[b]={deps:f.deps||[],attach:f.attach},c(f.deps||[],function(){c([b],function(){return attach=f.attach,e.isBuild?d():typeof attach=="function"?d(attach.apply(window,arguments)):d(window[attach])})})},write:function(b,c,d){var e=a[c],f={attach:null,deps:""};typeof attach=="function"?f.attach="return "+e.attach.toString()+";":f.attach="return window['"+e.attach+"'];",e.deps.length&&(f.deps="'"+e.deps.toString().split(",").join("','")+"'"),d(["define('",b,"!",c,"', ","[",f.deps,"],","function() {",f.attach,"}",");\n"].join(""))}})}(),function(){function A(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&w.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&w.isFunction(b.isEqual))return b.isEqual(a);var d=i.call(a);if(d!=i.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&A(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(w.has(a,h)){f++;if(!(g=w.has(b,h)&&A(a[h],b[h],c)))break}if(g){for(h in b)if(w.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new E(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=w),exports._=w):a._=w,w.VERSION="1.3.1";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(w.has(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=w.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=w.toArray(a).reverse();return d&&!e&&(b=w.bind(b,d)),e?w.reduce(f,b,c,d):w.reduce(f,b)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),!!e)};var y=w.some=w.any=function(a,b,d){b||(b=w.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(c=y(a,function(a){return a===b}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(w.isFunction(b)?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&w.isEmpty(a))return-Infinity;var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&w.isEmpty(a))return Infinity;var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.shuffle=function(a){var b=[],c;return x(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={},d=w.isFunction(b)?b:function(a){return a[b]};return x(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},w.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a,b){return w.reduce(a,function(a,c){return w.isArray(c)?a.concat(b?c:w.flatten(c)):(a[a.length]=c,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c){var d=c?w.map(a,c):a,e=[];return a.length<3&&(b=!0),w.reduce(d,function(c,d,f){if(b?w.last(c)!==d||!c.length:!w.include(c,d))c.push(d),e.push(a[f]);return c},[]),e},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a){var b=w.flatten(g.call(arguments,1),!0);return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var z=function(){};w.bind=function(a,b){var c,d;if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));if(!w.isFunction(a))throw new TypeError;return d=g.call(arguments,2),c=function(){if(this instanceof c){z.prototype=a.prototype;var e=new z,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return w.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))},w.throttle=function(a,b){var c,d,e,f,g,h=w.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},w.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},w.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return a>0?function(){if(--a<1)return b.apply(this,arguments)}:b()},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)w.has(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isObject(a)?w.isArray(a)?a.slice():w.extend({},a):a},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){return A(a,b,[])},w.isEmpty=function(a){if(a==null)return!0;if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(w.has(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)=="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return i.call(a)=="[object Arguments]"},w.isArguments(arguments)||(w.isArguments=function(a){return!!a&&!!w.has(a,"callee")}),w.isFunction=function(a){return i.call(a)=="[object Function]"},w.isString=function(a){return i.call(a)=="[object String]"},w.isNumber=function(a){return i.call(a)=="[object Number]"},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},w.isDate=function(a){return i.call(a)=="[object Date]"},w.isRegExp=function(a){return i.call(a)=="[object RegExp]"},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.has=function(a,b){return j.call(a,b)},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.mixin=function(a){x(w.functions(a),function(b){G(b,w[b]=a[b])})};var B=0;w.uniqueId=function(a){var b=B++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,D=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||C,function(a,b){return"',_.escape("+D(b)+"),'"}).replace(c.interpolate||C,function(a,b){return"',"+D(b)+",'"}).replace(c.evaluate||C,function(a,b){return"');"+D(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,w):function(a){return e.call(this,a,w)}},w.chain=function(a){return w(a).chain()};var E=function(a){this._wrapped=a};w.prototype=E.prototype;var F=function(a,b){return b?w(a).chain():a},G=function(a,b){E.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),F(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],F(c,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];E.prototype[a]=function(){return F(b.apply(this._wrapped,arguments),this._chain)}}),E.prototype.chain=function(){return this._chain=!0,this},E.prototype.value=function(){return this._wrapped}}.call(this),define("underscore",function(){}),define("use!underscore",[],function(){return window._}),function(){define("compiled/calendar/TimeBlockListManager",["jquery"],function(a){var b;return b=function(){function a(a){var b,c,d,e,f,g;this.blocks=[];if(a)for(e=0,f=a.length;e<f;e++)g=a[e],d=g[0],b=g[1],c=g[2],this.add(d,b,c)}return a.prototype.add=function(a,b,c){return this.blocks.push({start:a,end:b,locked:c})},a.prototype.consolidate=function(){var a,b,c,d,e,f;this.sort(),b=[],b.last=function(){return this[this.length-1]},f=this.blocks;for(d=0,e=f.length;d<e;d++){a=f[d];if(!b.last()){b.push(a);continue}c=b.last(),c.end.getTime()===a.start.getTime()&&!c.locked&&!a.locked?c.end=a.end:b.push(a)}return this.blocks=b},a.prototype.split=function(a){var b,c,d,e,f,g,h;this.consolidate(),e=a*60*1e3,h=this.blocks;for(f=0,g=h.length;f<g;f++){b=h[f];if(b.locked)continue;while(b.end-b.start>a*60*1e3)d=b.start,c=new Date(b.start.getTime()+e),b.start=new Date(b.start.getTime()+e),this.add(d,c)}return this.sort()},a.prototype.sort=function(){return this.blocks=this.blocks.sort(function(a,b){return a.end>b.start?1:-1})},a.prototype["delete"]=function(a){if(a!=null&&this.blocks.length>a&&!this.blocks[a].locked)return this.blocks.splice(a,1)},a.prototype.reset=function(){return this.blocks=[]},a}()})}.call(this),define("translations/calendar.time_block_row",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.edit_calendar_event",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{buttons:{submit:"Enviar"}}}})}),define("translations/calendar.edit_assignment",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{buttons:{submit:"Enviar"}}}})}),define("translations/appt_calendar_event_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.edit_appt_calendar_event",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/EditAppointmentGroupDetails",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.edit_appointment_group",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.edit_event",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.appointment_group_list",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.scheduler_right_side_admin_section",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/calendar.message_participants",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("vendor/fullcalendar",["jquery"],function(a,b){function g(b){a.extend(!0,c,b)}function h(c,d,e){function H(a){o?(R(),Q(),ba(),O(a)):I()}function I(){p=d.theme?"ui":"fc",c.addClass("fc"),d.isRTL&&c.addClass("fc-rtl"),d.theme&&c.addClass("ui-widget"),o=a("<div class='fc-content' style='position:relative'/>").prependTo(c),m=new i(g,d),n=m.render(),n&&c.prepend(n),N(d.defaultView),a(window).resize(T),M()||J()}function J(){setTimeout(function(){!t.start&&M()&&O()},0)}function K(){a(window).unbind("resize",T),m.destroy(),o.remove(),c.removeClass("fc fc-rtl ui-widget")}function L(){return k.offsetWidth!==0}function M(){return a("body")[0].offsetWidth!==0}function N(b){if(!t||b!=t.name){B++,bc();var c=t,d;c?((c.beforeHide||Z)(),Y(o,o.height()),c.element.hide()):Y(o,1),o.css("overflow","hidden"),t=u[b],t?t.element.show():t=u[b]=new f[b](d=y=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo(o),g),c&&m.deactivateButton(c.name),m.activateButton(b),O(),o.css("overflow",""),c&&Y(o,1),d||(t.afterShow||Z)(),B--}}function O(a){if(L()){B++,bc(),x===b&&R();var d=!1;!t.start||a||C<t.start||C>=t.end?(t.render(C,a||0),S(!0),d=!0):t.sizeDirty?(t.clearEvents(),S(),d=!0):t.eventsDirty&&(t.clearEvents(),d=!0),t.sizeDirty=!1,t.eventsDirty=!1,V(d),v=c.outerWidth(),m.updateTitle(t.title);var e=new Date;e>=t.start&&e<t.end?m.disableButton("today"):m.enableButton("today"),B--,t.trigger("viewDisplay",k)}}function P(){Q(),L()&&(R(),S(),bc(),t.clearEvents(),t.renderEvents(D),t.sizeDirty=!1)}function Q(){a.each(u,function(a,b){b.sizeDirty=!0})}function R(){d.contentHeight?x=d.contentHeight:d.height?x=d.height-(n?n.height():0)-U(o):x=Math.round(o.width()/Math.max(d.aspectRatio,.5))}function S(a){B++,t.setHeight(x,a),y&&(y.css("position","relative"),y=null),t.setWidth(o.width(),a),B--}function T(){if(!B)if(t.start){var a=++z;setTimeout(function(){a==z&&!B&&L()&&v!=(v=c.outerWidth())&&(B++,P(),t.trigger("windowResize",k),B--)},200)}else J()}function V(a){!d.lazyFetching||h(t.visStart,t.visEnd)?W():a&&_()}function W(){j(t.visStart,t.visEnd)}function X(a){D=a,_()}function $(a){_(a)}function _(a){ba(),L()&&(t.clearEvents(),t.renderEvents(D,a),t.eventsDirty=!1)}function ba(){a.each(u,function(a,b){b.eventsDirty=!0})}function bb(a,c,d){t.select(a,c,d===b?!0:d)}function bc(){t&&t.unselect()}function bd(){O(-1)}function be(){O(1)}function bf(){q(C,-1),O()}function bg(){q(C,1),O()}function bh(){C=new Date,O()}function bi(a,b,c){a instanceof Date?C=w(a):A(C,a,b,c),O()}function bj(a,c,d){a!==b&&q(C,a),c!==b&&r(C,c),d!==b&&s(C,d),O()}function bk(){return w(C)}function bl(){return t}function bm(a,c){if(c===b)return d[a];if(a=="height"||a=="contentHeight"||a=="aspectRatio")d[a]=c,P()}function bn(a,b){if(d[a])return d[a].apply(b||k,Array.prototype.slice.call(arguments,2))}var g=this;g.options=d,g.render=H,g.destroy=K,g.refetchEvents=W,g.reportEvents=X,g.reportEventChange=$,g.rerenderEvents=_,g.changeView=N,g.select=bb,g.unselect=bc,g.prev=bd,g.next=be,g.prevYear=bf,g.nextYear=bg,g.today=bh,g.gotoDate=bi,g.incrementDate=bj,g.formatDate=function(a,b){return E(a,b,d)},g.formatDates=function(a,b,c){return F(a,b,c,d)},g.getDate=bk,g.getView=bl,g.option=bm,g.trigger=bn,l.call(g,d,e);var h=g.isFetchNeeded,j=g.fetchEvents,k=c[0],m,n,o,p,t,u={},v,x,y,z=0,B=0,C=new Date,D=[],G;A(C,d.year,d.month,d.date),d.droppable&&a(document).bind("dragstart",function(b,c){var e=b.target,f=a(e);if(!f.parents(".fc").length){var g=d.dropAccept;if(a.isFunction(g)?g.call(e,f):f.is(g))G=e,t.dragStart(G,b,c)}}).bind("dragstop",function(a,b){G&&(t.dragStop(G,a,b),G=null)})}function i(b,c){function h(){g=c.theme?"ui":"fc";var b=c.header;if(b)return e=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(j("left")).append(j("center")).append(j("right"))),e}function i(){e.remove()}function j(d){var e=a("<td class='fc-header-"+d+"'/>"),h=c.header[d];return h&&a.each(h.split(" "),function(d){d>0&&e.append("<span class='fc-header-space'/>");var h;a.each(this.split(","),function(d,i){if(i=="title")e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),h&&h.addClass(g+"-corner-right"),h=null;else{var j;b[i]?j=b[i]:f[i]&&(j=function(){m.removeClass(g+"-state-hover"),b.changeView(i)});if(j){var k=c.theme?bb(c.buttonIcons,i):null,l=bb(c.buttonText,i),m=a("<span class='fc-button fc-button-"+i+" "+g+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(k?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+k+"'/>"+"</span>":l)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");m&&(m.click(function(){m.hasClass(g+"-state-disabled")||j()}).mousedown(function(){m.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){m.removeClass(g+"-state-down")}).hover(function(){m.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){m.removeClass(g+"-state-hover").removeClass(g+"-state-down")}).appendTo(e),h||m.addClass(g+"-corner-left"),h=m)}}}),h&&h.addClass(g+"-corner-right")}),e}function k(a){e.find("h2").html(a)}function l(a){e.find("span.fc-button-"+a).addClass(g+"-state-active")}function m(a){e.find("span.fc-button-"+a).removeClass(g+"-state-active")}function n(a){e.find("span.fc-button-"+a).addClass(g+"-state-disabled")}function o(a){e.find("span.fc-button-"+a).removeClass(g+"-state-disabled")}var d=this;d.render=h,d.destroy=i,d.updateTitle=k,d.activateButton=l,d.deactivateButton=m,d.disableButton=n,d.enableButton=o;var e=a([]),g}function l(c,d){function u(a,b){return!n||a<n||b>o}function v(a,b){n=a,o=b,s=[];var c=++p,d=m.length;q=d;for(var e=0;e<d;e++)x(m[e],c)}function x(a,b){y(a,function(c){if(b==p){if(c){for(var d=0;d<c.length;d++)c[d].source=a,J(c[d]);s=s.concat(c)}q--,q||i(s)}})}function y(b,d){var f,g=e.sourceFetchers,h;for(f=0;f<g.length;f++){h=g[f](b,n,o,d);if(h===!0)return;if(typeof h=="object"){y(h,d);return}}var i=b.events;if(i)a.isFunction(i)?(H(),i(w(n),w(o),function(a){d(a),I()})):a.isArray(i)?d(i):d();else{var k=b.url;if(k){var l=b.success,m=b.error,p=b.complete,q=a.extend({},b.data||{}),r=bj(b.startParam,c.startParam),s=bj(b.endParam,c.endParam);r&&(q[r]=Math.round(+n/1e3)),s&&(q[s]=Math.round(+o/1e3)),H(),a.ajax(a.extend({},j,b,{data:q,success:function(b){b=b||[];var c=bi(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){bi(m,this,arguments),d()},complete:function(){bi(p,this,arguments),I()}}))}else d()}}function z(a){a=A(a),a&&(q++,x(a,p))}function A(b){a.isFunction(b)||a.isArray(b)?b={events:b}:typeof b=="string"&&(b={url:b});if(typeof b=="object")return K(b),m.push(b),b}function C(b){m=a.grep(m,function(a){return!L(a,b)}),s=a.grep(s,function(a){return!L(a.source,b)}),i(s)}function D(a){var b,c=s.length,d,e=h().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=s[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+f),a.end?d.end?d.end=new Date(+d.end+g):d.end=new Date(+e(d)+g):d.end=null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroudColor=a.backgroudColor,d.borderColor=a.borderColor,d.textColor=a.textColor,J(d));J(a),i(s)}function E(a,b){J(a),a.source||(b&&(l.events.push(a),a.source=l),s.push(a)),i(s)}function F(b){if(!b){s=[];for(var c=0;c<m.length;c++)a.isArray(m[c].events)&&(m[c].events=[])}else{if(!a.isFunction(b)){var d=b+"";b=function(a){return a._id==d}}s=a.grep(s,b,!0);for(var c=0;c<m.length;c++)a.isArray(m[c].events)&&(m[c].events=a.grep(m[c].events,b,!0))}i(s)}function G(b){return a.isFunction(b)?a.grep(s,b):b?(b+="",a.grep(s,function(a){return a._id==b})):s}function H(){r++||g("loading",null,!0)}function I(){--r||g("loading",null,!1)}function J(a){var d=a.source||{},e=bj(d.ignoreTimezone,c.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+k++:a.id+""),a.date&&(a.start||(a.start=a.date),delete a.date),a._start=w(a.start=B(a.start,e)),a.end=B(a.end,e),a.end&&a.end<=a.start&&(a.end=null),a._end=a.end?w(a.end):null,a.allDay===b&&(a.allDay=bj(d.allDayDefault,c.allDayDefault)),a.className?typeof a.className=="string"&&(a.className=a.className.split(/\s+/)):a.className=[]}function K(a){a.className?typeof a.className=="string"&&(a.className=a.className.split(/\s+/)):a.className=[];var b=e.sourceNormalizers;for(var c=0;c<b.length;c++)b[c](a)}function L(a,b){return a&&b&&M(a)==M(b)}function M(a){return(typeof a=="object"?a.events||a.url:"")||a}var f=this;f.isFetchNeeded=u,f.fetchEvents=v,f.addEventSource=z,f.removeEventSource=C,f.updateEvent=D,f.renderEvent=E,f.removeEvents=F,f.clientEvents=G,f.normalizeEvent=J;var g=f.trigger,h=f.getView,i=f.reportEvents,l={events:[]},m=[l],n,o,p=0,q=0,r=0,s=[];for(var t=0;t<d.length;t++)A(d[t])}function q(a,b,c){return a.setFullYear(a.getFullYear()+b),c||v(a),a}function r(a,b,c){if(+a){var d=a.getMonth()+b,e=w(a);e.setDate(1),e.setMonth(d),a.setMonth(d),c||v(a);while(a.getMonth()!=e.getMonth())a.setDate(a.getDate()+(a<e?1:-1))}return a}function s(a,b,c){if(+a){var d=a.getDate()+b,e=w(a);e.setHours(9),e.setDate(d),a.setDate(d),c||v(a),t(a,e)}return a}function t(a,b){if(+a)while(a.getDate()!=b.getDate())a.setTime(+a+(a<b?1:-1)*o)}function u(a,b){return a.setMinutes(a.getMinutes()+b),a}function v(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function w(a,b){return b?v(new Date(+a)):new Date(+a)}function x(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function y(a,b,c){b=b||1;while(!a.getDay()||c&&a.getDay()==1||!c&&a.getDay()==6)s(a,b);return a}function z(a,b){return Math.round((w(a,!0)-w(b,!0))/n)}function A(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c)),d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d)),e!==b&&a.setDate(e)}function B(a,c){return typeof a=="object"?a:typeof a=="number"?new Date(a*1e3):typeof a=="string"?a.match(/^\d+(\.\d+)?$/)?new Date(parseFloat(a)*1e3):(c===b&&(c=!0),C(a,c)||(a?new Date(a):null)):null}function C(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1)),c[5]&&(d.setDate(c[5]),e.setDate(c[5])),t(d,e),c[7]&&d.setHours(c[7]),c[8]&&d.setMinutes(c[8]),c[10]&&d.setSeconds(c[10]),c[12]&&d.setMilliseconds(Number("0."+c[12])*1e3),t(d,e)}else{d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?Number("0."+c[12])*1e3:0);if(c[14]){var f=Number(c[16])*60+(c[18]?Number(c[18]):0);f*=c[15]=="-"?1:-1,d=new Date(+d+f*60*1e3)}}return d}function D(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();var b=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(b){var c=parseInt(b[1],10);return b[3]&&(c%=12,b[3].toLowerCase().charAt(0)=="p"&&(c+=12)),c*60+(b[2]?parseInt(b[2],10):0)}}function E(a,b,c){return F(a,null,b,c)}function F(a,b,d,e){e=e||c;var f=a,g=b,h,i=d.length,j,k,l,m="";for(h=0;h<i;h++){j=d.charAt(h);if(j=="'"){for(k=h+1;k<i;k++)if(d.charAt(k)=="'"){f&&(k==h+1?m+="'":m+=d.substring(h+1,k),h=k);break}}else if(j=="("){for(k=h+1;k<i;k++)if(d.charAt(k)==")"){var n=E(f,d.substring(h+1,k),e);parseInt(n.replace(/\D/,""),10)&&(m+=n),h=k;break}}else if(j=="["){for(k=h+1;k<i;k++)if(d.charAt(k)=="]"){var o=d.substring(h+1,k),n=E(f,o,e);n!=E(g,o,e)&&(m+=n),h=k;break}}else if(j=="{")f=b,g=a;else if(j=="}")f=a,g=b;else{for(k=i;k>h;k--)if(l=G[d.substring(h,k)]){f&&(m+=l(f,e)),h=k-1;break}k==h&&f&&(m+=j)}}return m}function H(a){return a.end?I(a.end,a.allDay):s(w(a.start),1)}function I(a,b){return a=w(a),b||a.getHours()||a.getMinutes()?s(a,1):v(a)}function J(a,b){return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function K(a,b){return a.end>b.start&&a.start<b.end}function L(a,b,c,d){var e=[],f,g=a.length,h,i,j,k,l,m,n;for(f=0;f<g;f++)h=a[f],i=h.start,j=b[f],j>c&&i<d&&(i<c?(k=w(c),m=!1):(k=i,m=!0),j>d?(l=w(d),n=!1):(l=j,n=!0),e.push({event:h,start:k,end:l,isStart:m,isEnd:n,msLength:l-k}));return e.sort(J)}function M(a){var b=[],c,d=a.length,e,f,g,h;for(c=0;c<d;c++){e=a[c],f=0;for(;;){g=!1;if(b[f])for(h=0;h<b[f].length;h++)if(K(b[f][h],e)){g=!0;break}if(g)f++;else break}b[f]?b[f].push(e):b[f]=[e]}return b}function N(c,d,e){c.unbind("mouseover").mouseover(function(c){var f=c.target,g,h,i;while(f!=this)g=f,f=f.parentNode;(h=g._fci)!==b&&(g._fci=b,i=d[h],e(i.event,i.element,i),a(c.target).trigger(c)),c.stopPropagation()})}function O(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.width(Math.max(0,c-Q(f,d)))}function P(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.height(Math.max(0,c-U(f,d)))}function Q(a,b){return R(a)+T(a)+(b?S(a):0)}function R(b){return(parseFloat(a.curCSS(b[0],"paddingLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingRight",!0))||0)}function S(b){return(parseFloat(a.curCSS(b[0],"marginLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"marginRight",!0))||0)}function T(b){return(parseFloat(a.curCSS(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderRightWidth",!0))||0)}function U(a,b){return V(a)+X(a)+(b?W(a):0)}function V(b){return(parseFloat(a.curCSS(b[0],"paddingTop",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingBottom",!0))||0)}function W(b){return(parseFloat(a.curCSS(b[0],"marginTop",!0))||0)+(parseFloat(a.curCSS(b[0],"marginBottom",!0))||0)}function X(b){return(parseFloat(a.curCSS(b[0],"borderTopWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderBottomWidth",!0))||0)}function Y(a,b){b=typeof b=="number"?b+"px":b,a.each(function(a,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function Z(){}function $(a,b){return a-b}function _(a){return Math.max.apply(Math,a)}function ba(a){return(a<10?"0":"")+a}function bb(a,c){if(a[c]!==b)return a[c];var d=c.split(/(?=[A-Z])/),e=d.length-1,f;for(;e>=0;e--){f=a[d[e].toLowerCase()];if(f!==b)return f}return a[""]}function bc(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function bd(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function be(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function bf(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function bg(a,b){a.each(function(a,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+m[b.getDay()])})}function bh(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,h=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,i=a.textColor||c.textColor||b("eventTextColor"),j=[];return g&&j.push("background-color:"+g),h&&j.push("border-color:"+h),i&&j.push("color:"+i),j.join(";")}function bi(b,c,d){a.isFunction(b)&&(b=[b]);if(b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function bj(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function bk(a,b){function g(a,b){b&&(r(a,b),a.setDate(1));var g=w(a,!0);g.setDate(1);var h=r(w(g),1),i=w(g),j=w(h),k=d("firstDay"),l=d("weekends")?0:1;l&&(y(i),y(j,-1,!0)),s(i,-((i.getDay()-Math.max(k,l)+7)%7)),s(j,(7-j.getDay()+Math.max(k,l))%7);var m=Math.round((j-i)/(n*7));d("weekMode")=="fixed"&&(s(j,(6-m)*7),m=6),c.title=f(g,d("titleFormat")),c.start=g,c.end=h,c.visStart=i,c.visEnd=j,e(6,m,l?5:7,!0)}var c=this;c.render=g,bn.call(c,a,b,"month");var d=c.opt,e=c.renderBasic,f=b.formatDate}function bl(a,b){function g(a,b){b&&s(a,b*7);var g=s(w(a),-((a.getDay()-d("firstDay")+7)%7)),h=s(w(g),7),i=w(g),j=w(h),k=d("weekends");k||(y(i),y(j,-1,!0)),c.title=f(i,s(w(j),-1),d("titleFormat")),c.start=g,c.end=h,c.visStart=i,c.visEnd=j,e(1,1,k?7:5,!1)}var c=this;c.render=g,bn.call(c,a,b,"basicWeek");var d=c.opt,e=c.renderBasic,f=b.formatDates}function bm(a,b){function g(a,b){b&&(s(a,b),d("weekends")||y(a,b<0?-1:1)),c.title=f(a,d("titleFormat")),c.start=c.visStart=w(a,!0),c.end=c.visEnd=s(w(c.start),1),e(1,1,1,!1)}var c=this;c.render=g,bn.call(c,a,b,"basicDay");var d=c.opt,e=c.renderBasic,f=b.formatDate}function bn(b,c,d){function N(a,b,c,d){B=b,C=c,P();var e=!o;e?Q(a,d):h(),R(e)}function P(){G=f("isRTL"),G?(H=-1,I=C-1):(H=1,I=0),J=f("firstDay"),K=f("weekends")?0:1,L=f("theme")?"ui":"fc",M=f("columnFormat")}function Q(c,d){var e,f=L+"-widget-header",g=L+"-widget-content",h,i,j;e="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(h=0;h<C;h++)e+="<th class='fc- "+f+"'/>";e+="</tr></thead><tbody>";for(h=0;h<c;h++){e+="<tr class='fc-week"+h+"'>";for(i=0;i<C;i++)e+="<td class='fc- "+g+" fc-day"+(h*C+i)+"'>"+"<div>"+(d?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";e+="</tr>"}e+="</tbody></table>",j=a(e).appendTo(b),m=j.find("thead"),n=m.find("th"),o=j.find("tbody"),p=o.find("tr"),q=o.find("td"),r=q.filter(":first-child"),t=p.eq(0).find("div.fc-day-content div"),bf(m.add(m.find("tr"))),bf(p),p.eq(0).addClass("fc-first"),V(q),u=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}function R(b){var c=b||B==1,d=e.start.getMonth(),f=v(new Date),g,h,i;c&&n.each(function(b,c){g=a(c),h=bn(b),g.html(l(h,M)),bg(g,h)}),q.each(function(b,e){g=a(e),h=bn(b),h.getMonth()==d?g.removeClass("fc-other-month"):g.addClass("fc-other-month"),+h==+f?g.addClass(L+"-state-highlight fc-today"):g.removeClass(L+"-state-highlight fc-today"),g.find("div.fc-day-number").text(h.getDate()),c&&bg(g,h)}),p.each(function(b,c){i=a(c),b<B?(i.show(),b==B-1?i.addClass("fc-last"):i.removeClass("fc-last")):i.hide()})}function S(b){y=b;var c=y-m.height(),d,e,g;f("weekMode")=="variable"?d=e=Math.floor(c/(B==1?2:6)):(d=Math.floor(c/B),e=c-d*(B-1)),r.each(function(b,c){b<B&&(g=a(c),Y(g.find("> div"),(b==B-1?e:d)-U(g)))})}function T(a){x=a,F.clear(),A=Math.floor(x/C),O(n.slice(0,-1),A)}function V(a){a.click(W).mousedown(k)}function W(a){if(!f("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),c=bn(b);g("dayClick",this,c,!0,a)}}function X(a,b,c){c&&D.build();var d=w(e.visStart),f=s(w(d),C);for(var g=0;g<B;g++){var h=new Date(Math.max(d,a)),i=new Date(Math.min(f,b));if(h<i){var j,k;G?(j=z(i,d)*H+I+1,k=z(h,d)*H+I+1):(j=z(h,d),k=z(i,d)),V(Z(g,j,g,k-1))}s(d,7),s(f,7)}}function Z(a,c,d,e){var f=D.rect(a,c,d,e,b);return i(f,b)}function $(a,b){return w(a)}function _(a,b,c){X(a,s(w(b),1),!0)}function ba(){j()}function bb(a,b,c){var d=bk(a),e=q[d.row*C+d.col];g("dayClick",e,a,b,c)}function bc(a,b,c){E.start(function(a){j(),a&&Z(a.row,a.col,a.row,a.col)},b)}function bd(a,b,c){var d=E.stop();j();if(d){var e=bl(d);g("drop",a,e,!0,b,c)}}function bh(a){return w(a.start)}function bi(a){return F.left(a)}function bj(a){return F.right(a)}function bk(a){return{row:Math.floor(z(a,e.visStart)/7),col:bp(a.getDay())}}function bl(a){return bm(a.row,a.col)}function bm(a,b){return s(w(e.visStart),a*7+b*H+I)}function bn(a){return bm(Math.floor(a/C),a%C)}function bp(a){return(a-Math.max(J,K)+C)%C*H+I}function bq(a){return p.eq(a)}function br(a){return{left:0,right:x}}var e=this;e.renderBasic=N,e.setHeight=S,e.setWidth=T,e.renderDayOverlay=X,e.defaultSelectionEnd=$,e.renderSelection=_,e.clearSelection=ba,e.reportDayClick=bb,e.dragStart=bc,e.dragStop=bd,e.defaultEventEnd=bh,e.getHoverListener=function(){return E},e.colContentLeft=bi,e.colContentRight=bj,e.dayOfWeekCol=bp,e.dateCell=bk,e.cellDate=bl,e.cellIsAllDay=function(){return!0},e.allDayRow=bq,e.allDayBounds=br,e.getRowCnt=function(){return B},e.getColCnt=function(){return C},e.getColWidth=function(){return A},e.getDaySegmentContainer=function(){return u},bu.call(e,b,c,d),bx.call(e),bw.call(e),bo.call(e);var f=e.opt,g=e.trigger,h=e.clearEvents,i=e.renderOverlay,j=e.clearOverlays,k=e.daySelectionMousedown,l=c.formatDate,m,n,o,p,q,r,t,u,x,y,A,B,C,D,E,F,G,H,I,J,K,L,M;be(b.addClass("fc-grid")),D=new by(function(b,c){var d,e,f;n.each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),p.each(function(c,g){c<B&&(d=a(g),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)}),f[1]=e+d.outerHeight()}),E=new bz(D),F=new bB(function(a){return t.eq(a)})}function bo(){function v(a,b){g(a),t(y(a),b)}function x(){h(),m().empty()}function y(c){var d=q(),e=r(),f=w(b.visStart),g=s(w(f),e),h=a.map(c,H),i,j,k,l,m,n,o=[];for(i=0;i<d;i++){j=M(L(c,h,f,g));for(k=0;k<j.length;k++){l=j[k];for(m=0;m<l.length;m++)n=l[m],n.row=i,n.level=k,o.push(n)}s(f,7),s(g,7)}return o}function z(a,b,c){e(a)&&A(a,b),c.isEnd&&f(a)&&u(a,b,c),i(a,b)}function A(a,b){var e=n(),f;b.draggable({zIndex:9,delay:50,opacity:c("dragOpacity"),revertDuration:c("dragRevertDuration"),start:function(g,h){d("eventDragStart",b,a,g,h),k(a,b),e.start(function(d,e,g,h){b.draggable("option","revert",!d||!g&&!h),p(),d?(f=g*7+h*(c("isRTL")?-1:1),o(s(w(a.start),f),s(H(a),f))):f=0},g,"drag")},stop:function(c,g){e.stop(),p(),d("eventDragStop",b,a,c,g),f?l(this,a,f,0,a.allDay,c,g):(b.css("filter",""),j(a,b))}})}var b=this;b.renderEvents=v,b.compileDaySegs=y,b.clearEvents=x,b.bindDaySeg=z,bv.call(b);var c=b.opt,d=b.trigger,e=b.isEventDraggable,f=b.isEventResizable,g=b.reportEvents,h=b.reportEventClear,i=b.eventElementHandlers,j=b.showEvents,k=b.hideEvents,l=b.eventDrop,m=b.getDaySegmentContainer,n=b.getHoverListener,o=b.renderDayOverlay,p=b.clearOverlays,q=b.getRowCnt,r=b.getColCnt,t=b.renderDaySegs,u=b.resizableDayEvent}function bp(a,b){function g(a,b){b&&s(a,b*7);var g=s(w(a),-((a.getDay()-d("firstDay")+7)%7)),h=s(w(g),7),i=w(g),j=w(h),k=d("weekends");k||(y(i),y(j,-1,!0)),c.title=f(i,s(w(j),-1),d("titleFormat")),c.start=g,c.end=h,c.visStart=i,c.visEnd=j,e(k?7:5)}var c=this;c.render=g,br.call(c,a,b,"agendaWeek");var d=c.opt,e=c.renderAgenda,f=b.formatDates}function bq(a,b){function g(a,b){b&&(s(a,b),d("weekends")||y(a,b<0?-1:1));var g=w(a,!0),h=s(w(g),1);c.title=f(a,d("titleFormat")),c.start=c.visStart=g,c.end=c.visEnd=h,e(1)}var c=this;c.render=g,br.call(c,a,b,"agendaDay");var d=c.opt,e=c.renderAgenda,f=b.formatDate}function br(c,d,e){function bt(a){ba=a,bv(),q?i():bA(),bC()}function bv(){bj=g("theme")?"ui":"fc",bl=g("weekends")?0:1,bk=g("firstDay"),(bm=g("isRTL"))?(bn=-1,bo=ba-1):(bn=1,bo=0),bp=D(g("minTime")),bq=D(g("maxTime")),br=g("columnFormat")}function bA(){var b=bj+"-widget-header",d=bj+"-widget-content",e,f,h,i,j,k=g("slotMinutes")%15==0;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ba;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<ba;f++)e+="<td class='fc- fc-col"+f+" "+d+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";e+="<td class='fc-agenda-gutter "+d+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",q=a(e).appendTo(c),r=q.find("thead"),t=r.find("th").slice(1,-1),y=q.find("tbody"),A=y.find("td").slice(0,-1),B=A.find("div.fc-day-content div"),C=A.eq(0),E=C.find("> div"),bf(r.add(r.find("tr"))),bf(y.add(y.find("tr"))),Q=r.find("th:first"),R=q.find(".fc-agenda-gutter"),F=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c),g("allDaySlot")?(G=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(F),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+g("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+b+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",H=a(e).appendTo(F),I=H.find("tr"),bI(I.find("td")),Q=Q.add(H.find("th:first")),R=R.add(H.find("th.fc-agenda-gutter")),F.append("<div class='fc-agenda-divider "+b+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):G=a([]),J=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(F),K=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(J),L=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(K),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",h=x(),i=u(w(h),bq),u(h,bp),bb=0;for(f=0;h<i;f++)j=h.getMinutes(),e+="<tr class='fc-slot"+f+" "+(j?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+b+"'>"+(!k||!j?p(h,g("axisFormat")):"&nbsp;")+"</th>"+"<td class='"+d+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(h,g("slotMinutes")),bb++;e+="</tbody></table>",M=a(e).appendTo(K),N=M.find("div:first"),bJ(M.find("td")),Q=Q.add(M.find("th:first"))}function bC(){var a,b,c,d,e=v(new Date);for(a=0;a<ba;a++)d=bS(a),b=t.eq(a),b.html(p(d,br)),c=A.eq(a),+d==+e?c.addClass(bj+"-state-highlight fc-today"):c.removeClass(bj+"-state-highlight fc-today"),bg(b.add(c),d)}function bD(a,c){a===b&&(a=V),V=a,bi={};var d=y.position().top,e=J.position().top,f=Math.min(a-d,M.height()+e+1);E.height(f-U(C)),F.css("top",d),J.height(f-e-1),Z=N.height()+1,c&&bF()}function bE(b){T=b,bh.clear(),W=0,O(Q.width("").each(function(b,c){W=Math.max(W,a(c).outerWidth())}),W);var c=J[0].clientWidth;Y=J.width()-c,Y?(O(R,Y),R.show().prev().removeClass("fc-last")):R.hide().prev().addClass("fc-last"),X=Math.floor((c-W)/ba),O(t.slice(0,-1),X)}function bF(){function d(){J.scrollTop(c)}var a=x(),b=w(a);b.setHours(g("firstHour"));var c=bV(a,b)+1;d(),setTimeout(d,0)}function bG(){_=J.scrollTop()}function bH(){J.scrollTop(_)}function bI(a){a.click(bK).mousedown(n)}function bJ(a){a.click(bK).mousedown(cb)}function bK(a){if(!g("selectable")){var b=Math.min(ba-1,Math.floor((a.pageX-q.offset().left-W)/X)),c=bS(b),d=this.parentNode.className.match(/fc-slot(\d+)/);if(d){var e=parseInt(d[1])*g("slotMinutes"),f=Math.floor(e/60);c.setHours(f),c.setMinutes(e%60+bp),h("dayClick",A[b],c,!1,a)}else h("dayClick",A[b],c,!0,a)}}function bL(a,b,c){c&&bc.build();var d=w(f.visStart),e,g;bm?(e=z(b,d)*bn+bo+1,g=z(a,d)*bn+bo+1):(e=z(a,d),g=z(b,d)),e=Math.max(0,e),g=Math.min(ba,g),e<g&&bI(bM(0,e,0,g-1))}function bM(a,b,c,d){var e=bc.rect(a,b,c,d,F);return j(e,F)}function bN(a,b){var c=w(f.visStart),d=s(w(c),1);for(var e=0;e<ba;e++){var g=new Date(Math.max(c,a)),h=new Date(Math.min(d,b));if(g<h){var i=e*bn+bo,k=bc.rect(0,i,0,i,K),l=bV(c,g),m=bV(c,h);k.top=l,k.height=m-l,bJ(j(k,K))}s(c,1),s(d,1)}}function bO(a){return bh.left(a)}function bP(a){return bh.right(a)}function bQ(a){return{row:Math.floor(z(a,f.visStart)/7),col:bU(a.getDay())}}function bR(a){var b=bS(a.col),c=a.row;return g("allDaySlot")&&c--,c>=0&&u(b,bp+c*g("slotMinutes")),b}function bS(a){return s(w(f.visStart),a*bn+bo)}function bT(a){return g("allDaySlot")&&!a.row}function bU(a){return(a-Math.max(bk,bl)+ba)%ba*bn+bo}function bV(a,c){a=w(a,!0);if(c<u(w(a),bp))return 0;if(c<u(w(a),bq)){var d=g("slotMinutes"),e=c.getHours()*60+c.getMinutes()-bp,f=Math.floor(e/d),h=bi[f];return h===b&&(h=bi[f]=M.find("tr:eq("+f+") td div")[0].offsetTop),Math.max(0,Math.round(h-1+Z*(e%d/d)))}return M.height()}function bW(){return{left:W,right:T-Y}}function bX(a){return I}function bY(a){var b=w(a.start);return a.allDay?b:u(b,g("defaultEventMinutes"))}function bZ(a,b){return b?w(a):u(w(a),g("slotMinutes"))}function b$(a,b,c){c?g("allDaySlot")&&bL(a,s(w(b),1),!0):b_(a,b)}function b_(b,c){var d=g("selectHelper");bc.build();if(d){var e=z(b,f.visStart)*bn+bo;if(e>=0&&e<ba){var h=bc.rect(0,e,0,e,K),i=bV(b,b),j=bV(b,c);if(j>i){h.top=i,h.height=j-i,h.left+=2,h.width-=5;if(a.isFunction(d)){var k=d(b,c);k&&(h.position="absolute",h.zIndex=8,S=a(k).css(h).appendTo(K))}else h.isStart=!0,h.isEnd=!0,S=a(o({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},h)),S.css("opacity",g("dragOpacity"));S&&(bJ(S),K.append(S),O(S,h.width,!0),P(S,h.height,!0))}}}else bN(b,c)}function ca(){k(),S&&(S.remove(),S=null)}function cb(b){if(b.which==1&&g("selectable")){m(b);var c;bd.start(function(a,b){ca();if(a&&a.col==b.col&&!bT(a)){var d=bR(b),e=bR(a);c=[d,u(w(d),g("slotMinutes")),e,u(w(e),g("slotMinutes"))].sort($),b_(c[0],c[3])}else c=null},b),a(document).one("mouseup",function(a){bd.stop(),c&&(+c[0]==+c[1]&&cc(c[0],!1,a),l(c[0],c[3],!1,a))})}}function cc(a,b,c){h("dayClick",A[bU(a.getDay())],a,b,c)}function cd(a,b,c){bd.start(function(a){k();if(a)if(bT(a))bM(a.row,a.col,a.row,a.col);else{var b=bR(a),c=u(w(b),g("defaultEventMinutes"));bN(b,c)}},b)}function ce(a,b,c){var d=bd.stop();k(),d&&h("drop",a,bR(d),bT(d),b,c)}var f=this;f.renderAgenda=bt,f.setWidth=bE,f.setHeight=bD,f.beforeHide=bG,f.afterShow=bH,f.defaultEventEnd=bY,f.timePosition=bV,f.dayOfWeekCol=bU,f.dateCell=bQ,f.cellDate=bR,f.cellIsAllDay=bT,f.allDayRow=bX,f.allDayBounds=bW,f.getHoverListener=function(){return bd},f.colContentLeft=bO,f.colContentRight=bP,f.getDaySegmentContainer=function(){return G},f.getSlotSegmentContainer=function(){return L},f.getMinMinute=function(){return bp},f.getMaxMinute=function(){return bq},f.getBodyContent=function(){return K},f.getRowCnt=function(){return 1},f.getColCnt=function(){return ba},f.getColWidth=function(){return X},f.getSlotHeight=function(){return Z},f.defaultSelectionEnd=bZ,f.renderDayOverlay=bL,f.renderSelection=b$,f.clearSelection=ca,f.reportDayClick=cc,f.dragStart=cd,f.dragStop=ce,bu.call(f,c,d,e),bx.call(f),bw.call(f),bs.call(f);var g=f.opt,h=f.trigger,i=f.clearEvents,j=f.renderOverlay,k=f.clearOverlays,l=f.reportSelection,m=f.unselect,n=f.daySelectionMousedown,o=f.slotSegHtml,p=d.formatDate,q,r,t,y,A,B,C,E,F,G,H,I,J,K,L,M,N,Q,R,S,T,V,W,X,Y,Z,_,ba,bb,bc,bd,bh,bi={},bj,bk,bl,bm,bn,bo,bp,bq,br;be(c.addClass("fc-agenda")),bc=new by(function(b,c){function k(a){return Math.max(i,Math.min(j,a))}var d,e,f;t.each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),g("allDaySlot")&&(d=I,e=d.offset().top,b[0]=[e,e+d.outerHeight()]);var h=K.offset().top,i=J.offset().top,j=i+J.outerHeight();for(var l=0;l<bb;l++)b.push([k(h+Z*l),k(h+Z*(l+1))])}),bd=new bz(bc),bh=new bB(function(a){return B.eq(a)})}function bs(){function V(a,b){i(a);var c,e=a.length,f=[],g=[];for(c=0;c<e;c++)a[c].allDay?f.push(a[c]):g.push(a[c]);d("allDaySlot")&&(y(X(f),b),l()),$(Y(g),b)}function W(){j(),m().empty(),n().empty()}function X(b){var d=M(L(b,a.map(b,H),c.visStart,c.visEnd)),e,f=d.length,g,h,i,j=[];for(e=0;e<f;e++){g=d[e];for(h=0;h<g.length;h++)i=g[h],i.row=0,i.level=e,j.push(i)}return j}function Y(b){var d=A(),e=r(),f=q(),g=u(w(c.visStart),e),h=a.map(b,Z),i,j,k,l,m,n,o=[];for(i=0;i<d;i++){j=M(L(b,h,g,u(w(g),f-e))),bt(j);for(k=0;k<j.length;k++){l=j[k];for(m=0;m<l.length;m++)n=l[m],n.col=i,n.level=k,o.push(n)}s(g,1,!0)}return o}function Z(a){return a.end?w(a.end):u(w(a.start),d("defaultEventMinutes"))}function $(c,f){var g,h=c.length,i,j,k,l,m,o,p,q,r,s,u,w,y="",z,B,C,D={},F={},G,H,I,J,K=n(),L,M,O,P=A();(L=d("isRTL"))?(M=-1,O=P-1):(M=1,O=0);for(g=0;g<h;g++)i=c[g],j=i.event,l=t(i.start,i.start),m=t(i.start,i.end),o=i.col,p=i.level,q=i.forward||0,r=v(o*M+O),s=x(o*M+O)-r,s=Math.min(s-6,s*.95),p?u=s/(p+q+1):q?u=(s/(q+1)-6)*2:u=s,w=r+s/(p+q+1)*p*M+(L?s-u:0),i.top=l,i.left=w,i.outerWidth=u,i.outerHeight=m-l,y+=_(j,i);K[0].innerHTML=y,z=K.children();for(g=0;g<h;g++)i=c[g],j=i.event,B=a(z[g]),C=e("eventRender",j,j,B),C===!1?B.remove():(C&&C!==!0&&(B.remove(),B=a(C).css({position:"absolute",top:i.top,left:i.left}).appendTo(K)),i.element=B,j._id===f?bb(j,B,i):B[0]._fci=g,E(j,B));N(K,c,bb);for(g=0;g<h;g++){i=c[g];if(B=i.element)H=D[G=i.key=bd(B[0])],i.vsides=H===b?D[G]=U(B,!0):H,H=F[G],i.hsides=H===b?F[G]=Q(B,!0):H,I=B.find("div.fc-event-content"),I.length&&(i.contentTop=I[0].offsetTop)}for(g=0;g<h;g++){i=c[g];if(B=i.element)B[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px",J=Math.max(0,i.outerHeight-i.vsides),B[0].style.height=J+"px",j=i.event,i.contentTop!==b&&J-i.contentTop<10&&(B.find("div.fc-event-time").text(S(j.start,d("timeFormat"))+" - "+j.title),B.find("div.fc-event-title").remove()),e("eventAfterRender",j,j,B)}}function _(a,b){var c="<",e=a.url,h=bh(a,d),i=h?" style='"+h+"'":"",j=["fc-event","fc-event-skin","fc-event-vert"];return f(a)&&j.push("fc-event-draggable"),b.isStart&&j.push("fc-corner-top"),b.isEnd&&j.push("fc-corner-bottom"),j=j.concat(a.className),a.source&&(j=j.concat(a.source.className||[])),e?c+="a href='"+bc(a.url)+"'":c+="div",c+=" class='"+j.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+h+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+i+">"+"<div class='fc-event-head fc-event-skin'"+i+">"+"<div class='fc-event-time'>"+bc(T(a.start,a.end,d("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+bc(a.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",b.isEnd&&g(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),c+="</"+(e?"a":"div")+">",c}function ba(a,b,c){f(a)&&be(a,b,c.isStart),c.isEnd&&g(a)&&z(a,b,c),k(a,b)}function bb(a,b,c){var d=b.find("div.fc-event-time");f(a)&&bf(a,b,d),c.isEnd&&g(a)&&bg(a,b,d),k(a,b)}function be(a,b,c){function q(){h||(b.width(f).height("").draggable("option","grid",null),h=!0)}var f,g,h=!0,i,j=d("isRTL")?-1:1,k=o(),l=B(),m=C(),n=r();b.draggable({zIndex:9,opacity:d("dragOpacity","month"),revertDuration:d("dragRevertDuration"),start:function(n,o){e("eventDragStart",b,a,n,o),G(a,b),f=b.width(),k.start(function(e,f,k,n){O(),e?(g=!1,i=n*j,e.row?c?h&&(b.width(l-10),P(b,m*Math.round((a.end?(a.end-a.start)/p:d("defaultEventMinutes"))/d("slotMinutes"))),b.draggable("option","grid",[l,1]),h=!1):g=!0:(K(s(w(a.start),i),s(H(a),i)),q()),g=g||h&&!i):(q(),g=!0),b.draggable("option","revert",g)},n,"drag")},stop:function(c,f){k.stop(),O(),e("eventDragStop",b,a,c,f);if(g)q(),b.css("filter",""),F(a,b);else{var j=0;h||(j=Math.round((b.offset().top-D().offset().top)/m)*d("slotMinutes")+n-(a.start.getHours()*60+a.start.getMinutes())),I(this,a,i,j,h,c,f)}}})}function bf(a,b,c){function q(b){var e=u(w(a.start),b),f;a.end&&(f=u(w(a.end),b)),c.text(T(e,f,d("timeFormat")))}function r(){g&&(c.css("display",""),b.draggable("option","grid",[n,p]),g=!1)}var f,g=!1,h,i,j,k=d("isRTL")?-1:1,l=o(),m=A(),n=B(),p=C();b.draggable({zIndex:9,scroll:!1,grid:[n,p],axis:m==1?"y":!1,opacity:d("dragOpacity"),revertDuration:d("dragRevertDuration"),start:function(m,n){e("eventDragStart",b,a,m,n),G(a,b),f=b.position(),i=j=0,l.start(function(e,f,i,j){b.draggable("option","revert",!e),O(),e&&(h=j*k,d("allDaySlot")&&!e.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),K(s(w(a.start),h),s(H(a),h))):r())},m,"drag")},drag:function(a,b){i=Math.round((b.position.top-f.top)/p)*d("slotMinutes"),i!=j&&(g||q(i),j=i)},stop:function(c,d){var j=l.stop();O(),e("eventDragStop",b,a,c,d),j&&(h||i||g)?I(this,a,h,g?0:i,g,c,d):(r(),b.css("filter",""),b.css(f),q(0),F(a,b))}})}function bg(a,b,c){var f,g,i=C();b.resizable({handles:{s:"div.ui-resizable-s"},grid:i,start:function(c,d){f=g=0,G(a,b),b.css("z-index",9),e("eventResizeStart",this,a,c,d)},resize:function(e,j){f=Math.round((Math.max(i,b.height())-j.originalSize.height)/i),f!=g&&(c.text(T(a.start,!f&&!a.end?null:u(h(a),d("slotMinutes")*f),d("timeFormat"))),g=f)},stop:function(c,g){e("eventResizeStop",this,a,c,g),f?J(this,a,0,d("slotMinutes")*f,c,g):(b.css("z-index",8),F(a,b))}})}var c=this;c.renderEvents=V,c.compileDaySegs=X,c.clearEvents=W,c.slotSegHtml=_,c.bindDaySeg=ba,bv.call(c);var d=c.opt,e=c.trigger,f=c.isEventDraggable,g=c.isEventResizable,h=c.eventEnd,i=c.reportEvents,j=c.reportEventClear,k=c.eventElementHandlers,l=c.setHeight,m=c.getDaySegmentContainer,n=c.getSlotSegmentContainer,o=c.getHoverListener,q=c.getMaxMinute,r=c.getMinMinute,t=c.timePosition,v=c.colContentLeft,x=c.colContentRight,y=c.renderDaySegs,z=c.resizableDayEvent,A=c.getColCnt,B=c.getColWidth,C=c.getSlotHeight,D=c.getBodyContent,E=c.reportEventElement,F=c.showEvents,G=c.hideEvents,I=c.eventDrop,J=c.eventResize,K=c.renderDayOverlay,O=c.clearOverlays,R=c.calendar,S=R.formatDate,T=R.formatDates}function bt(a){var b,c,d,e,f,g;for(b=a.length-1;b>0;b--){e=a[b];for(c=0;c<e.length;c++){f=e[c];for(d=0;d<a[b-1].length;d++)g=a[b-1][d],K(f,g)&&(g.forward=Math.max(g.forward||0,(f.forward||0)+1))}}}function bu(a,c,d){function m(a,b){var c=l[a];return typeof c=="object"?bb(c,b||d):c}function n(a,b){return c.trigger.apply(c,[a,b||e].concat(Array.prototype.slice.call(arguments,2),[e]))}function o(a){return q(a)&&!m("disableDragging")}function p(a){return q(a)&&!m("disableResizing")}function q(a){return bj(a.editable,(a.source||{}).editable,m("editable"))}function r(a){i={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],i[d._id]?i[d._id].push(d):i[d._id]=[d]}function t(a){return a.end?w(a.end):f(a)}function v(a,b){j.push(b),k[a._id]?k[a._id].push(b):k[a._id]=[b]}function x(){j=[],k={}}function y(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return n("eventClick",this,a,c)}).hover(function(b){n("eventMouseover",this,a,b)},function(b){n("eventMouseout",this,a,b)})}function z(a,b){B(a,b,"show")}function A(a,b){B(a,b,"hide")}function B(a,b,c){var d=k[a._id],e,f=d.length;for(e=0;e<f;e++)(!b||d[e][0]!=b[0])&&d[e][c]()}function C(a,b,c,d,e,f,g){var j=b.allDay,k=b._id;E(i[k],c,d,e),n("eventDrop",a,b,c,d,e,function(){E(i[k],-c,-d,j),h(k)},f,g),h(k)}function D(a,b,c,d,e,f){var g=b._id;F(i[g],c,d),n("eventResize",a,b,c,d,function(){F(i[g],-c,-d),h(g)},e,f),h(g)}function E(a,c,d,e){d=d||0;for(var f,h=a.length,i=0;i<h;i++)f=a[i],e!==b&&(f.allDay=e),u(s(f.start,c,!0),d),f.end&&(f.end=u(s(f.end,c,!0),d)),g(f,l)}function F(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=u(s(t(d),b,!0),c),g(d,l)}var e=this;e.element=a,e.calendar=c,e.name=d,e.opt=m,e.trigger=n,e.isEventDraggable=o,e.isEventResizable=p,e.reportEvents=r,e.eventEnd=t,e.reportEventElement=v,e.reportEventClear=x,e.eventElementHandlers=y,e.showEvents=z,e.hideEvents=A,e.eventDrop=C,e.eventResize=D;var f=e.defaultEventEnd,g=c.normalizeEvent,h=c.reportEventChange,i={},j=[],k={},l=c.options}function bv(){function E(a,b){var c=y(),d,e=m(),f=n(),g=0,h,i,j,k,l=a.length,o,p,q;c[0].innerHTML=G(a),H(a,c.children()),I(a),J(a,c,b),K(a),L(a),M(a),d=O();for(h=0;h<e;h++){i=0,j=[];for(k=0;k<f;k++)j[k]=0;while(g<l&&(o=a[g]).row==h){p=_(j.slice(o.startCol,o.endCol)),o.top=p,p+=o.outerHeight;for(q=o.startCol;q<o.endCol;q++)j[q]=p;g++}d[h].height(_(j))}R(a,P(d))}function F(b,c,d){var e=a("<div/>"),f,g=y(),h,i=b.length,j;e[0].innerHTML=G(b),f=e.children(),g.append(f),H(b,f),K(b),L(b),M(b),R(b,P(O())),f=[];for(h=0;h<i;h++)j=b[h].element,j&&(b[h].row===c&&j.css("top",d),f.push(j[0]));return a(f)}function G(a){var b=d("isRTL"),c,e=a.length,h,i,j,k,l=q(),m=l.left,n=l.right,o,p,s,v,w,x="";for(c=0;c<e;c++)h=a[c],i=h.event,k=["fc-event","fc-event-skin","fc-event-hori"],f(i)&&k.push("fc-event-draggable"),b?(h.isStart&&k.push("fc-corner-right"),h.isEnd&&k.push("fc-corner-left"),o=u(h.end.getDay()-1),p=u(h.start.getDay()),s=h.isEnd?r(o):m,v=h.isStart?t(p):n):(h.isStart&&k.push("fc-corner-left"),h.isEnd&&k.push("fc-corner-right"),o=u(h.start.getDay()),p=u(h.end.getDay()-1),s=h.isStart?r(o):m,v=h.isEnd?t(p):n),k=k.concat(i.className),i.source&&(k=k.concat(i.source.className||[])),j=i.url,w=bh(i,d),j?x+="<a href='"+bc(j)+"'":x+="<div",x+=" class='"+k.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+s+"px;"+w+"'"+">"+"<div"+" class='fc-event-inner fc-event-skin'"+(w?" style='"+w+"'":"")+">",!i.allDay&&h.isStart&&(x+="<span class='fc-event-time'>"+bc(A(i.start,i.end,d("timeFormat")))+"</span>"),x+="<span class='fc-event-title'>"+bc(i.title)+"</span>"+"</div>",h.isEnd&&g(i)&&(x+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),x+="</"+(j?"a":"div")+">",h.left=s,h.outerWidth=v-s,h.startCol=o,h.endCol=p+1;return x}function H(b,c){var d,f=b.length,g,h,i,j;for(d=0;d<f;d++)g=b[d],h=g.event,i=a(c[d]),j=e("eventRender",h,h,i),j===!1?i.remove():(j&&j!==!0&&(j=a(j).css({position:"absolute",left:g.left}),i.replaceWith(j),i=j),g.element=i)}function I(a){var b,c=a.length,d,e;for(b=0;b<c;b++)d=a[b],e=d.element,e&&i(d.event,e)}function J(a,b,c){var d,e=a.length,f,g,h;for(d=0;d<e;d++)f=a[d],g=f.element,g&&(h=f.event,h._id===c?z(h,g,f):g[0]._fci=d);N(b,a,z)}function K(a){var c,d=a.length,e,f,g,h,i={};for(c=0;c<d;c++)e=a[c],f=e.element,f&&(g=e.key=bd(f[0]),h=i[g],h===b&&(h=i[g]=Q(f,!0)),e.hsides=h)}function L(a){var b,c=a.length,d,e;for(b=0;b<c;b++)d=a[b],e=d.element,e&&(e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px")}function M(a){var c,d=a.length,e,f,g,h,i={};for(c=0;c<d;c++)e=a[c],f=e.element,f&&(g=e.key,h=i[g],h===b&&(h=i[g]=W(f)),e.outerHeight=f[0].offsetHeight+h)}function O(){var a,b=m(),c=[];for(a=0;a<b;a++)c[a]=p(a).find("td:first div.fc-day-content > div");return c}function P(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function R(a,b){var c,d=a.length,f,g,h;for(c=0;c<d;c++)f=a[c],g=f.element,g&&(g[0].style.top=b[f.row]+(f.top||0)+"px",h=f.event,e("eventAfterRender",h,h,g))}function S(b,f,g){var i=d("isRTL"),o=i?"w":"e",p=f.find("div.ui-resizable-"+o),q=!1;be(f),f.mousedown(function(a){a.preventDefault()}).click(function(a){q&&(a.preventDefault(),a.stopImmediatePropagation())}),p.mousedown(function(d){function I(c){e("eventResizeStop",this,b,c),a("body").css("cursor",""),p.stop(),C(),A&&l(this,b,A,0,c),setTimeout(function(){q=!1},0)}if(d.which!=1)return;q=!0;var p=c.getHoverListener(),r=m(),t=n(),u=i?-1:1,y=i?t-1:0,z=f.css("top"),A,E,G=a.extend({},b),H=v(b.start);D(),a("body").css("cursor",o+"-resize").one("mouseup",I),e("eventResizeStart",this,b,d),p.start(function(a,c){if(a){var d=Math.max(H.row,a.row),e=a.col;r==1&&(d=0),d==H.row&&(i?e=Math.min(H.col,e):e=Math.max(H.col,e)),A=d*7+e*u+y-(c.row*7+c.col*u+y);var f=s(h(b),A,!0);if(A){G.end=f;var l=E;E=F(x([G]),g.row,z),E.find("*").css("cursor",o+"-resize"),l&&l.remove(),k(b)}else E&&(j(b),E.remove(),E=null);C(),B(b.start,s(w(f),1))}},d)})}var c=this;c.renderDaySegs=E,c.resizableDayEvent=S;var d=c.opt,e=c.trigger,f=c.isEventDraggable,g=c.isEventResizable,h=c.eventEnd,i=c.reportEventElement,j=c.showEvents,k=c.hideEvents,l=c.eventResize,m=c.getRowCnt,n=c.getColCnt,o=c.getColWidth,p=c.allDayRow,q=c.allDayBounds,r=c.colContentLeft,t=c.colContentRight,u=c.dayOfWeekCol,v=c.dateCell,x=c.compileDaySegs,y=c.getDaySegmentContainer,z=c.bindDaySeg,A=c.calendar.formatDates,B=c.renderDayOverlay,C=c.clearOverlays,D=c.clearSelection}function bw(){function i(a,b,c){j(),b||(b=e(a,c)),f(a,b,c),k(a,b,c)}function j(a){h&&(h=!1,g(),d("unselect",null,a))}function k(a,b,c,e){h=!0,d("select",null,a,b,c,e)}function l(d){var e=b.cellDate,h=b.cellIsAllDay,i=b.getHoverListener(),l=b.reportDayClick;if(d.which==1&&c("selectable")){j(d);var m=this,n;i.start(function(a,b){g(),a&&h(a)?(n=[e(b),e(a)].sort($),f(n[0],n[1],!0)):n=null},d),a(document).one("mouseup",function(a){i.stop(),n&&(+n[0]==+n[1]&&l(n[0],!0,a),k(n[0],n[1],!0,a))})}}var b=this;b.select=i,b.unselect=j,b.reportSelection=k,b.daySelectionMousedown=l;var c=b.opt,d=b.trigger,e=b.defaultSelectionEnd,f=b.renderSelection,g=b.clearSelection,h=!1;c("selectable")&&c("unselectAuto")&&a(document).mousedown(function(b){var d=c("unselectCancel");if(d&&a(b.target).parents(d).length)return;j(b)})}function bx(){function e(b,e){var f=d.shift();return f||(f=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),f[0].parentNode!=e[0]&&f.appendTo(e),c.push(f.css(b).show()),f}function f(){var a;while(a=c.shift())d.push(a.hide().unbind())}var b=this;b.renderOverlay=e,b.clearOverlays=f;var c=[],d=[]}function by(a){var b=this,c,d;b.build=function(){c=[],d=[],a(c,d)},b.cell=function(a,b){var e=c.length,f=d.length,g,h=-1,i=-1;for(g=0;g<e;g++)if(b>=c[g][0]&&b<c[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=d[g][0]&&a<d[g][1]){i=g;break}return h<0||i<0?null:{row:h,col:i}},b.rect=function(a,b,e,f,g){var h=g.offset();return{top:c[a][0]-h.top,left:d[b][0]-h.left,width:d[f][1]-d[b][0],height:c[e][1]-c[a][0]}}}function bz(b){function h(a){bA(a);var c=b.cell(a.pageX,a.pageY);if(!c!=!g||c&&(c.row!=g.row||c.col!=g.col))c?(f||(f=c),e(c,f,c.row-f.row,c.col-f.col)):e(c,f),g=c}var c=this,d,e,f,g;c.start=function(c,i,j){e=c,f=g=null,b.build(),h(i),d=j||"mousemove",a(document).bind(d,h)},c.stop=function(){return a(document).unbind(d,h),g}}function bA(a){a.pageX===b&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY)}function bB(a){function g(b){return d[b]=d[b]||a(b)}var c=this,d={},e={},f={};c.left=function(a){return e[a]=e[a]===b?g(a).position().left:e[a]},c.right=function(a){return f[a]=f[a]===b?c.left(a)+g(a).width():f[a]},c.clear=function(){d={},e={},f={}}}var c={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},d={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},e=a.fullCalendar={version:"1.5.2"},f=e.views={};a.fn.fullCalendar=function(e){if(typeof e=="string"){var f=Array.prototype.slice.call(arguments,1),g;return this.each(function(){var c=a.data(this,"fullCalendar");if(c&&a.isFunction(c[e])){var d=c[e].apply(c,f);g===b&&(g=d),e=="destroy"&&a.removeData(this,"fullCalendar")}}),g!==b?g:this}var i=e.eventSources||[];return delete e.eventSources,e.events&&(i.push(e.events),delete e.events),e=a.extend(!0,{},c,e.isRTL||e.isRTL===b&&c.isRTL?d:{},e),this.each(function(b,c){var d=a(c),f=new h(d,e,i);d.data("fullCalendar",f),f.render()}),this},e.sourceNormalizers=[],e.sourceFetchers=[];var j={dataType:"json",cache:!1},k=1;e.addDays=s,e.cloneDate=w,e.parseDate=B,e.parseISO8601=C,e.parseTime=D,e.formatDate=E,e.formatDates=F;var m=["sun","mon","tue","wed","thu","fri","sat"],n=864e5,o=36e5,p=6e4,G={s:function(a){return a.getSeconds()},ss:function(a){return ba(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return ba(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return ba(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return ba(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return ba(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return ba(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return E(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){var b=a.getDate();return b>10&&b<20?"th":["st","nd","rd"][b%10-1]||"th"}};e.applyAll=bi,f.month=bk,f.basicWeek=bl,f.basicDay=bm,g({weekMode:"fixed"}),f.agendaWeek=bp,f.agendaDay=bq,g({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/MiniCalendar",["jquery","i18n!calendar","vendor/jquery.ba-tinypubsub"],function(b,c){var d;return d=function(){function d(c,d){this.mainCalendar=d,this.refetchEvents=a(this.refetchEvents,this),this.visibleContextListChanged=a(this.visibleContextListChanged,this),this.eventRender=a(this.eventRender,this),this.dayClick=a(this.dayClick,this),this.getEvents=a(this.getEvents,this),this.calendar=b(c),this.calendar.fullCalendar({height:240,weekMode:"variable",allDayDefault:!1,lazyFetching:!1,ignoreTimezone:!0,header:{left:"prev",center:"title",right:"next"},dayClick:this.dayClick,events:this.getEvents,eventRender:this.eventRender},b.subscribe({"Calendar/visibleContextListChanged":this.visibleContextListChanged,"Calendar/refetchEvents":this.refetchEvents}))}return d.prototype.getEvents=function(a,b,c){return this.calendar.find(".fc-content td").removeClass("event slot-available").removeAttr("title"),this.mainCalendar.getEvents(a,b,c)},d.prototype.dayClick=function(a){return this.mainCalendar.gotoDate(a)},d.prototype.eventRender=function(a,b,d){var e,f,g,h,i,j;return f=d.dateCell(a.start),g=d.element.find("tr:nth-child("+(f.row+1)+") td:nth-child("+(f.col+1)+")"),g.addClass("event"),h=c.t("event_on_this_day","There is an event on this day"),e=(i=this.mainCalendar.displayAppointmentEvents)!=null?i.id:void 0,e&&e===((j=a.calendarEvent)!=null?j.appointment_group_id:void 0)&&a.object.available_slots&&(g.addClass("slot-available"),h=c.t("open_appointment_on_this_day","There is an open appointment on this day")),g.attr("title",h),!1},d.prototype.visibleContextListChanged=function(a){return this.calendar.fullCalendar("refetchEvents")},d.prototype.refetchEvents=function(){return this.calendar.fullCalendar("refetchEvents")},d}()})}.call(this),define("vendor/jquery.ui.core-1.9",["jquery","jqueryui/core"],function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})}),define("vendor/jquery.ui.widget-1.9",["jquery","jqueryui/widget"],function(a,b){var c=Array.prototype.slice,d=a.cleanData;a.cleanData=function(b){for(var c=0,e;(e=b[c])!=null;c++)a(e).triggerHandler("remove");d(b)},a.widget=function(b,d,e){var f=b.split(".")[0],g;b=b.split(".")[1],g=f+"-"+b,e||(e=d,d=a.Widget),a.expr[":"][g]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=a.extend(function(c,d){if(!this._createWidget)return new a[f][b](c,d);arguments.length&&this._createWidget(c,d)},a[f][b],{version:e.version});var h=new d;h.options=a.widget.extend({},h.options),a.each(e,function(b,f){a.isFunction(f)&&(e[b]=function(){var a=function(a){return d.prototype[a].apply(this,c.call(arguments,1))},b=function(a,b){return d.prototype[a].apply(this,b)};return function(){var c=this._super,d=this._superApply,e;return this._super=a,this._superApply=b,e=f.apply(this,arguments),this._super=c,this._superApply=d,e}}())}),a[f][b].prototype=a.widget.extend(h,{namespace:f,widgetName:b,widgetEventPrefix:b,widgetBaseClass:g},e),a.widget.bridge(b,a[f][b])},a.widget.extend=function(d){var e=c.call(arguments,1),f=0,g=e.length,h,i;for(;f<g;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(d[h]=a.isPlainObject(i)?a.widget.extend({},d[h],i):i);return d},a.widget.bridge=function(d,e){a.fn[d]=function(f){var g=typeof f=="string",h=c.call(arguments,1),i=this;return f=!g&&h.length?a.widget.extend.apply(null,[f].concat(h)):f,g?this.each(function(){var c=a.data(this,d);if(!c)return console.log("WARNING, this will break with new jqueryui: cannot call methods on "+d+" prior to initialization; "+"attempted to call method '"+f+"'");if(!a.isFunction(c[f])||f.charAt(0)==="_")return a.error("no such method '"+f+"' for "+d+" widget instance");var e=c[f].apply(c,h);if(e!==c&&e!==b)return i=e&&e.jquery?i.pushStack(e.get()):e,!1}):this.each(function(){var b=a.data(this,d);b?b.option(f||{})._init():e(f,this)}),i}},a.Widget=function(b,c){if(!this._createWidget)return new a[namespace][name](b,c);arguments.length&&this._createWidget(b,c)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetName,this),this._bind({remove:"destroy"})),this._create(),this._trigger("create"),this._init()},_getCreateOptions:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled"),this.bindings.unbind("."+this.widgetName),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e=c,f,g,h;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof c=="string"){e={},f=c.split("."),c=f.shift();if(f.length){g=e[c]=a.widget.extend({},this.options[c]);for(h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];c=f.pop();if(d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&(this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(b,c){c?(b=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element);var d=this;a.each(c,function(c,e){b.bind(c+"."+d.widgetName,function(){if(d.options.disabled===!0||a(this).hasClass("ui-state-disabled"))return;return(typeof e=="string"?d[e]:e).apply(d,arguments)})})},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._bind(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._bind(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e=this.options[b],f;c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent)for(var g=a.event.props.length,h;g;)h=a.event.props[--g],c[h]=c.originalEvent[h];return this.element.trigger(c,d),f=a.isArray(d)?[c].concat(d):[c,d],!(a.isFunction(e)&&e.apply(this.element[0],f)===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){typeof e=="string"&&(e={effect:e});var g,h=e?e===!0||typeof e=="number"?c:e.effect||c:b;e=e||{},typeof e=="number"&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&(a.effects.effect[h]||a.uiBackCompat!==!1&&a.effects[h])?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.uiBackCompat!==!1&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})}),define("vendor/jquery.ui.position-1.9",["jquery"],function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e=/[+-]\d+%?/,f=/^\w+/,g=/%$/,h="center",i=a.fn.position;a.position={scrollbarWidth:function(){var b,c,d=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),e=d.children()[0];return a("body").append(d),b=e.offsetWidth,d.css("overflow","scroll"),c=e.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),b-c},getScrollInfo:function(b){var c=b[0],d=b.height()<c.scrollHeight,e=b.width()<c.scrollWidth,f=a.position.scrollbarWidth();return{height:d?f:0,width:e?f:0}}},a.fn.position=function(b){if(!b||!b.of)return i.apply(this,arguments);b=a.extend({},b);var j=a(b.of),k=a(b.within||window),l=j[0],m=(b.collision||"flip").split(" "),n={},o,p,q,r;return l.nodeType===9?(p=j.width(),q=j.height(),r={top:0,left:0}):a.isWindow(l)?(p=j.width(),q=j.height(),r={top:j.scrollTop(),left:j.scrollLeft()}):l.preventDefault?(b.at="left top",p=q=0,r={top:b.of.pageY,left:b.of.pageX}):(p=j.outerWidth(),q=j.outerHeight(),r=j.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" "),g,i;a.length===1&&(a=c.test(a[0])?a.concat([h]):d.test(a[0])?[h].concat(a):[h,h]),a[0]=c.test(a[0])?a[0]:h,a[1]=d.test(a[1])?a[1]:h,g=e.exec(a[0]),i=e.exec(a[1]),n[this]=[g?g[0]:0,i?i[0]:0],b[this]=[f.exec(a[0])[0],f.exec(a[1])[0]]}),m.length===1&&(m[1]=m[0]),b.at[0]==="right"?r.left+=p:b.at[0]===h&&(r.left+=p/2),b.at[1]==="bottom"?r.top+=q:b.at[1]===h&&(r.top+=q/2),o=[parseInt(n.at[0],10)*(g.test(n.at[0])?p/100:1),parseInt(n.at[1],10)*(g.test(n.at[1])?q/100:1)],r.left+=o[0],r.top+=o[1],this.each(function(){var c=a(this),d=c.outerWidth(),e=c.outerHeight(),f=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,j=a.position.getScrollInfo(k),l=d+f+(parseInt(a.curCSS(this,"marginRight",!0))||0)+j.width,s=e+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0)+j.height,t=a.extend({},r),u=[parseInt(n.my[0],10)*(g.test(n.my[0])?c.outerWidth()/100:1),parseInt(n.my[1],10)*(g.test(n.my[1])?c.outerHeight()/100:1)],v;b.my[0]==="right"?t.left-=d:b.my[0]===h&&(t.left-=d/2),b.my[1]==="bottom"?t.top-=e:b.my[1]===h&&(t.top-=e/2),t.left+=u[0],t.top+=u[1],t.left=Math.round(t.left),t.top=Math.round(t.top),v={left:t.left-f,top:t.top-i},a.each(["left","top"],function(f,g){a.ui.position[m[f]]&&a.ui.position[m[f]][g](t,{targetWidth:p,targetHeight:q,elemWidth:d,elemHeight:e,collisionPosition:v,collisionWidth:l,collisionHeight:s,offset:[o[0]+u[0],o[1]+u[1]],my:b.my,at:b.at,within:k,elem:c})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(t,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?e.scrollLeft():d.offset().left,h=f?e.width():d.outerWidth(),i=g-c.collisionPosition.left,j=c.collisionPosition.left+c.collisionWidth-h-g;c.collisionWidth>h||i>0?b.left+=i:j>0?b.left-=j:b.left=Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?e.scrollTop():d.offset().top,h=f?e.height():d.outerHeight(),i=g-c.collisionPosition.top,j=c.collisionPosition.top+c.collisionHeight-h-g;c.collisionHeight>h||i>0?b.top+=i:j>0?b.top-=j:b.top=Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===h)return;c.elem.removeClass("ui-flipped-left ui-flipped-right");var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?0:d.offset().left,i=f?d.width():d.outerWidth(),j=c.collisionPosition.left-g,k=c.collisionPosition.left+c.collisionWidth-i-g,l=c.my[0]==="left",m=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,n=c.at[0]==="left"?c.targetWidth:-c.targetWidth,o=-2*c.offset[0];if(j<0||k>0)c.elem.addClass("ui-flipped-"+(j<0?"right":"left")),b.left+=m+n+o},top:function(b,c){if(c.at[1]===h)return;c.elem.removeClass("ui-flipped-top ui-flipped-bottom");var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?0:d.offset().top,i=f?d.height():d.outerHeight(),j=c.collisionPosition.top-g,k=c.collisionPosition.top+c.collisionHeight-i-g,l=c.my[1]==="top",m=l?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,n=c.at[1]==="top"?c.targetHeight:-c.targetHeight,o=-2*c.offset[1];if(j<0||k>0)c.elem.addClass("ui-flipped-"+(j<0?"bottom":"top")),b.top+=m+n+o}}},a.uiBackCompat!==!1&&function(a){var c=a.fn.position;a.fn.position=function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:b}))}}(a)}),define("vendor/jquery.ui.popup-1.9",["jquery","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9","vendor/jquery.ui.position-1.9"],function(a,b,c,d){var e=0;a.widget("ui.popup",{version:"@VERSION",options:{position:{my:"left top",at:"left bottom"}},_create:function(){this.options.trigger||(this.options.trigger=this.element.prev()),this.element.attr("id")||(this.element.attr("id","ui-popup-"+e++),this.generatedId=!0),this.element.attr("role")||(this.element.attr("role","dialog"),this.generatedRole=!0),this.options.trigger.attr("aria-haspopup","true").attr("aria-owns",this.element.attr("id")),this.element.addClass("ui-popup"),this.close(),this._bind(this.options.trigger,{keydown:function(b){this.options.trigger.is("a:ui-button")&&b.keyCode==a.ui.keyCode.SPACE&&b.preventDefault(),b.keyCode==a.ui.keyCode.SPACE&&this.options.trigger.is("a:not(:ui-button)")&&this.options.trigger.trigger("click",b),b.keyCode==a.ui.keyCode.DOWN&&(b.preventDefault(),this.options.trigger.trigger("click",b))},click:function(a){a.preventDefault();if(this.isOpen)return;var b=this;clearTimeout(this.closeTimer),setTimeout(function(){b.open(a)},1)}}),this.element.is(":ui-menu")||this._bind({keydown:function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this.element),d=c.first(),e=c.last();b.target===e[0]&&!b.shiftKey?(d.focus(1),b.preventDefault()):b.target===d[0]&&b.shiftKey&&(e.focus(1),b.preventDefault())}}),this._bind({focusout:function(a){var b=this;b.closeTimer=setTimeout(function(){b.close(a)},100)},focusin:function(a){clearTimeout(this.closeTimer)}}),this._bind({keyup:function(b){b.keyCode==a.ui.keyCode.ESCAPE&&this.element.is(":visible")&&(this.close(b),this.options.trigger.focus())}}),this._bind(document,{click:function(b){this.isOpen&&!a(b.target).closest(".ui-popup").length&&this.close(b)}})},_destroy:function(){this.element.show().removeClass("ui-popup").removeAttr("aria-hidden").removeAttr("aria-expanded").unbind("keypress.ui-popup"),this.options.trigger.removeAttr("aria-haspopup").removeAttr("aria-owns"),this.generatedId&&this.element.removeAttr("id"),this.generatedRole&&this.element.removeAttr("role")},open:function(b){var c=a.extend({},{of:this.options.trigger},this.options.position);this.element.show().attr("aria-hidden","false").attr("aria-expanded","true").position(c);if(this.element.is(":ui-menu"))this.element.menu("focus",b,this.element.children("li").first()),this.element.focus();else{var d=this.element.find(":tabbable");this.removeTabIndex=!1,d.length||(this.element.is(":tabbable")||(this.element.attr("tabindex","0"),this.removeTabIndex=!0),d=d.add(this.element[0])),d.first().focus(1)}this.options.trigger.attr("tabindex",-1),this.isOpen=!0,this._trigger("open",b)},close:function(a){this.element.hide().attr("aria-hidden","true").attr("aria-expanded","false"),this.options.trigger.attr("tabindex",0),this.removeTabIndex&&this.element.removeAttr("tabindex"),this.isOpen=!1,this._trigger("close",a)}})}),define("vendor/jquery.ui.button-1.9",["jquery","jqueryui/button","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9"],function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"@VERSION",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),typeof this.options.disabled!="boolean"&&(this.options.disabled=this.element.prop("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i=this.type==="checkbox"||this.type==="radio",l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";h.label===null&&(h.label=this.buttonElement.html()),this.element.is(":disabled")&&(h.disabled=!0),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){if(h.disabled)return;a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(h.disabled)return;a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){if(f)return;b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(h.disabled)return;f=!1,d=a.pageX,e=a.pageY}).bind("mouseup.button",function(a){if(h.disabled)return;if(d!==a.pageX||e!==a.pageY)f=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().last(),b="label[for="+this.element.attr("id")+"]";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super("_setOption",a,b);if(a==="disabled"){b?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(i),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.ui.button.version="@VERSION",a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){a==="disabled"&&this.buttons.button("option",a,b),this._super("_setOption",a,b)},refresh:function(){var b=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(b?"ui-corner-right":"ui-corner-left").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}),define("vendor/jquery.ui.menu-1.9",["jquery","jqueryui/autocomplete","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9"],function(a){var b=0;a.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:150,options:{position:{my:"left top",at:"right top"}},_create:function(){var c=this;this.activeMenu=this.element,this.menuId=this.element.attr("id")||"ui-menu-"+b++,this.element.find(".ui-icon").length&&this.element.addClass("ui-menu-icons"),this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"menu"}).bind("click.menu",function(b){var d=a(b.target).closest(".ui-menu-item:has(a)");if(c.options.disabled)return!1;if(!d.length)return;(!c.active||c.active[0]!==d[0])&&c.focus(b,d),c.select(b)}).bind("mouseover.menu",function(b){if(c.options.disabled)return;var d=a(b.target).closest(".ui-menu-item");d.length&&(d.siblings().children(".ui-state-active").removeClass("ui-state-active"),c.focus(b,d))}).bind("mouseout.menu",function(b){if(c.options.disabled)return;var d=a(b.target).closest(".ui-menu-item");d.length&&c.blur(b)}).bind("focus.menu",function(b){if(c.options.disabled)return;c.focus(b,a(b.target).children(".ui-menu-item:first"))}).bind("blur.menu",function(a){if(c.options.disabled)return;c.collapseAll(a)}),this.refresh(),this.element.attr("tabIndex",0).bind("keydown.menu",function(b){if(c.options.disabled)return;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:c.previousPage(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.PAGE_DOWN:c.nextPage(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.HOME:c._move("first","first",b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.END:c._move("last","last",b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.UP:c.previous(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.DOWN:c.next(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.LEFT:c.collapse(b)&&b.stopImmediatePropagation(),b.preventDefault();break;case a.ui.keyCode.RIGHT:c.expand(b)&&b.stopImmediatePropagation(),b.preventDefault();break;case a.ui.keyCode.ENTER:c.active.children("a[aria-haspopup='true']").length?c.expand(b)&&b.stopImmediatePropagation():(c.select(b),b.stopImmediatePropagation()),b.preventDefault();break;case a.ui.keyCode.ESCAPE:c.collapse(b)&&b.stopImmediatePropagation(),b.preventDefault();break;default:b.stopPropagation(),clearTimeout(c.filterTimer);var d,e=c.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1;f==e?g=!0:f=e+f;function h(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}d=c.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+h(f),"i")).test(a(this).children("a").text())}),d=g&&d.index(c.active.next())!=-1?c.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),d=c.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+h(f),"i")).test(a(this).children("a").text())})),d.length?(c.focus(b,d),d.length>1?(c.previousFilter=f,c.filterTimer=setTimeout(function(){delete c.previousFilter},1e3)):delete c.previousFilter):delete c.previousFilter}}),this._bind(document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b)}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find("ul").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").show(),this.element.find(".ui-menu-item").unbind(".menu").removeClass("ui-menu-item").removeAttr("role").children("a").removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").removeAttr("id").children(".ui-icon").remove()},refresh:function(){var b=this,c=this.element.find("ul:not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr("role","menu").hide().attr("aria-hidden","true").attr("aria-expanded","false"),d=c.add(this.element).children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation");d.children("a").addClass("ui-corner-all").attr("tabIndex",-1).attr("role","menuitem").attr("id",function(a){return b.element.attr("id")+"-"+a}),c.each(function(){var b=a(this),c=b.prev("a");c.attr("aria-haspopup","true").prepend('<span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>'),b.attr("aria-labelledby",c.attr("id"))})},focus:function(b,c){var d,e=this;this.blur(b);if(this._hasScroll()){var f=parseFloat(a.curCSS(this.activeMenu[0],"borderTopWidth",!0))||0,g=parseFloat(a.curCSS(this.activeMenu[0],"paddingTop",!0))||0,h=c.offset().top-this.activeMenu.offset().top-f-g,i=this.activeMenu.scrollTop(),j=this.activeMenu.height(),k=c.height();h<0?this.activeMenu.scrollTop(i+h):h+k>j&&this.activeMenu.scrollTop(i+h-j+k)}this.active=c.first().children("a").addClass("ui-state-focus").end(),e.element.attr("aria-activedescendant",e.active.children("a").attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e.timer=setTimeout(function(){e._close()},e.delay),d=a(">ul",c),d.length&&/^mouse/.test(b.type)&&e._startOpening(d),this.activeMenu=c.parent(),this._trigger("focus",b,{item:c})},blur:function(a){if(!this.active)return;clearTimeout(this.timer),this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active})},_startOpening:function(a){clearTimeout(this.timer);if(a.attr("aria-hidden")!=="true")return;var b=this;b.timer=setTimeout(function(){b._close(),b._open(a)},b.delay)},_open:function(b){clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents()).hide().attr("aria-hidden","true");var c=a.extend({},{of:this.active},a.type(this.options.position)=="function"?this.options.position(this.active):this.options.position);b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(a){this.element.find("ul").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active"),this.blur(a),this.activeMenu=this.element},_close:function(){this.active.parent().find("ul").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parents("li:not(.ui-menubar-item)").first();if(b&&b.length)return this.active.parent().attr("aria-hidden","true").attr("aria-expanded","false").hide(),this.focus(a,b),!0},expand:function(a){var b=this,c=this.active&&this.active.children("ul").children("li").first();if(c&&c.length)return this._open(c.parent()),setTimeout(function(){b.focus(a,c)},20),!0},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){if(!this.active){this.focus(c,this.activeMenu.children(".ui-menu-item")[b]());return}var d;a==="first"||a==="last"?d=this.active[a==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):d=this.active[a+"All"](".ui-menu-item").eq(0),d.length?this.focus(c,d):this.focus(c,this.activeMenu.children(".ui-menu-item")[b]())},nextPage:function(b){if(this._hasScroll()){if(!this.active){this.focus(b,this.activeMenu.children(".ui-menu-item").first());return}if(this.last())return;var c=this.active.offset().top,d=this.element.height(),e;this.active.nextAll(".ui-menu-item").each(function(){return e=a(this),a(this).offset().top-c-d<0}),this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(b){if(this._hasScroll()){if(!this.active){this.focus(b,this.activeMenu.children(".ui-menu-item").first());return}if(this.first())return;var c=this.active.offset().top,d=this.element.height(),e;this.active.prevAll(".ui-menu-item").each(function(){return e=a(this),a(this).offset().top-c+d>0}),this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.height()<this.element.prop("scrollHeight")},select:function(a){var b={item:this.active};this.collapseAll(a),this._trigger("select",a,b)}})}),define("jquery.ui.menu.inputmenu",["jquery","vendor/jquery.ui.menu-1.9"],function(a,b){var c=a.ui.menu.prototype,d=c.refresh;a.extend(c,{refresh:function(){d.call(this);var b=this,c=this.element.find("li.ui-menu-item"),e=!1;this.element.bind("click.menu",function(a){(new RegExp(/^a$/i)).test(a.target.tagName)||a.preventDefault()});var f=0;this.element.find("input[type='checkbox'], input[type='radio']").each(function(){var b=a(this).closest("label");b.length&&(a(this).insertBefore(b),a(this).attr("id")||a(this).attr("id","ui-input-"+f++),b.attr("for",a(this).attr("id")))}),c.children("a").each(function(b,c){var d=a(c),f=d.parent();d.children().is("input[type='checkbox'], input[type='radio']")&&(d.closest("ul").addClass("ui-menu-icons"),d.children("input[type='checkbox']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-check"></span>'),f.attr({role:"menuitemcheckbox","aria-checked":"true"})):d.children("input[type='radio']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-radio-on"></span>'),f.attr({role:"menuitemradio","aria-checked":"true"})):d.children("input[type='radio']").length?(d.prepend('<span class="ui-icon ui-icon-radio-off"></span>'),f.attr({role:"menuitemradio","aria-checked":"false"})):f.attr({role:"menuitemcheckbox","aria-checked":"false"}),d.children().is("input[type='radio']")&&f.attr("radio-group",d.children("input[type='radio']").attr("name")),f.prev().length&&!f.prev().children("a").length?(f.prev().addClass("ui-state-disabled").html("<span class='ui-menu-input-group'>"+f.prev().text()+"</span>").bind("click.menu",!1).after('<li class="ui-menu-item"><hr /></li>'),e=!0):f.prev().length&&!f.prev().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.before("<li><hr /></li>"),e&&f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")?(f.after("<li><hr /></li>"),e=!1):f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.after("<li><hr /></li>"),d.children("input[type='checkbox'], input[type='radio']").hide())}),c.bind("keydown.menu",function(c){c.keyCode===a.ui.keyCode.SPACE&&(b.active.children("a").children().is("input[type='checkbox'], input[type='radio']")&&(b.select(c),c.stopImmediatePropagation()),c.preventDefault())})},select:function(b){var c={item:this.active};this.active.children("a").children().is("input[type='checkbox']")&&(this.active.attr("aria-checked")==="false"?(this.active.children("a").prepend('<span class="ui-icon ui-icon-check"></span>'),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='checkbox']").prop("checked","checked").trigger("change")):this.active.attr("aria-checked")==="true"&&(this.active.children("a").children("span.ui-icon-check").remove(),this.active.attr("aria-checked","false"),this.active.children("a").children("input[type='checkbox']").removeAttr("checked").trigger("change"))),this.active.children("a").children().is("input[type='radio']")&&this.active.attr("aria-checked")==="false"&&(this.active.children("a").children("span.ui-icon-radio-off").toggleClass("ui-icon-radio-on ui-icon-radio-off"),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='radio']").prop("checked","checked").trigger("change"),this.active.siblings("[radio-group="+a(this.active).attr("radio-group")+"]").each(function(){a(this).attr("aria-checked","false"),a(this).children("a").children("span.ui-icon-radio-on").toggleClass("ui-icon-radio-on ui-icon-radio-off"),a(this).children("a").children("input[type='radio']").removeAttr("checked")})),this.active.children("a").children().is("input[type='checkbox'], input[type='radio']")||this.collapseAll(),this._trigger("select",b,c)}})}),function(){define("compiled/jquery.kylemenu",["jquery","jquery.ui.menu.inputmenu","vendor/jquery.ui.popup-1.9","vendor/jquery.ui.button-1.9"],function(a,b,c,d){return a.fn.kyleMenu=function(b){return this.each(function(){var c,d,e,f;return f=a.extend(!0,{},a.fn.kyleMenu.defaults,b),d=a(this),f.noButton||(d.button(f.buttonOpts),d.bind("mouseleave.button",function(){if(c.is(".ui-state-open"))return d.addClass("ui-state-active")})),c=d.next().menu(f.menuOpts).popup(f.popupOpts).addClass("ui-kyle-menu use-css-transitions-for-show-hide"),e=f.appendMenuTo,e&&c.appendTo(e),d.data("kyleMenu",c),c.bind("menuselect",function(){return a(this).popup("close").removeClass("ui-state-open")})})},a.fn.kyleMenu.defaults={popupOpts:{position:{my:"center top",at:"center bottom",offset:"0 10px",within:"#main",collision:"fit"},open:function(b){var c,d,e,f,g;return a(this).find(".ui-menu-carat").remove(),c=a(this).popup("option","trigger"),c.addClass("ui-state-active"),g=c.outerWidth(),f=c.offset().left-a(this).offset().left,d=b.pageX-c.offset().left,e=Math.min(Math.max(6,d),g-6)+f,a('<span class="ui-menu-carat"><span /></span>').css("left",e).prependTo(this),a(this).css("-webkit-transform-origin-x",e+"px").addClass("ui-state-open")},close:function(){return a(this).popup("option","trigger").removeClass("ui-state-active"),a(this).removeClass("ui-state-open")}},buttonOpts:{icons:{primary:"ui-icon-home",secondary:"ui-icon-droparrow"}}},a(".al-trigger").live("click",function(b){var c,d,e;c=a(this);if(!c.is(".ui-button"))return b.preventDefault(),d={buttonOpts:{icons:{primary:null,secondary:null}}},e=a.extend(d,c.data("kyleMenuOptions")),c.kyleMenu(e),c.data("kyleMenu").popup("open")})})}.call(this),define("vendor/jquery.ui.core-1.9",["jquery","jqueryui/core"],function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})}),define("vendor/jquery.ui.widget-1.9",["jquery","jqueryui/widget"],function(a,b){var c=Array.prototype.slice,d=a.cleanData;a.cleanData=function(b){for(var c=0,e;(e=b[c])!=null;c++)a(e).triggerHandler("remove");d(b)},a.widget=function(b,d,e){var f=b.split(".")[0],g;b=b.split(".")[1],g=f+"-"+b,e||(e=d,d=a.Widget),a.expr[":"][g]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=a.extend(function(c,d){if(!this._createWidget)return new a[f][b](c,d);arguments.length&&this._createWidget(c,d)},a[f][b],{version:e.version});var h=new d;h.options=a.widget.extend({},h.options),a.each(e,function(b,f){a.isFunction(f)&&(e[b]=function(){var a=function(a){return d.prototype[a].apply(this,c.call(arguments,1))},b=function(a,b){return d.prototype[a].apply(this,b)};return function(){var c=this._super,d=this._superApply,e;return this._super=a,this._superApply=b,e=f.apply(this,arguments),this._super=c,this._superApply=d,e}}())}),a[f][b].prototype=a.widget.extend(h,{namespace:f,widgetName:b,widgetEventPrefix:b,widgetBaseClass:g},e),a.widget.bridge(b,a[f][b])},a.widget.extend=function(d){var e=c.call(arguments,1),f=0,g=e.length,h,i;for(;f<g;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(d[h]=a.isPlainObject(i)?a.widget.extend({},d[h],i):i);return d},a.widget.bridge=function(d,e){a.fn[d]=function(f){var g=typeof f=="string",h=c.call(arguments,1),i=this;return f=!g&&h.length?a.widget.extend.apply(null,[f].concat(h)):f,g?this.each(function(){var c=a.data(this,d);if(!c)return console.log("WARNING, this will break with new jqueryui: cannot call methods on "+d+" prior to initialization; "+"attempted to call method '"+f+"'");if(!a.isFunction(c[f])||f.charAt(0)==="_")return a.error("no such method '"+f+"' for "+d+" widget instance");var e=c[f].apply(c,h);if(e!==c&&e!==b)return i=e&&e.jquery?i.pushStack(e.get()):e,!1}):this.each(function(){var b=a.data(this,d);b?b.option(f||{})._init():e(f,this)}),i}},a.Widget=function(b,c){if(!this._createWidget)return new a[namespace][name](b,c);arguments.length&&this._createWidget(b,c)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetName,this),this._bind({remove:"destroy"})),this._create(),this._trigger("create"),this._init()},_getCreateOptions:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled"),this.bindings.unbind("."+this.widgetName),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e=c,f,g,h;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof c=="string"){e={},f=c.split("."),c=f.shift();if(f.length){g=e[c]=a.widget.extend({},this.options[c]);for(h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];c=f.pop();if(d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&(this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(b,c){c?(b=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element);var d=this;a.each(c,function(c,e){b.bind(c+"."+d.widgetName,function(){if(d.options.disabled===!0||a(this).hasClass("ui-state-disabled"))return;return(typeof e=="string"?d[e]:e).apply(d,arguments)})})},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._bind(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._bind(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e=this.options[b],f;c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent)for(var g=a.event.props.length,h;g;)h=a.event.props[--g],c[h]=c.originalEvent[h];return this.element.trigger(c,d),f=a.isArray(d)?[c].concat(d):[c,d],!(a.isFunction(e)&&e.apply(this.element[0],f)===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){typeof e=="string"&&(e={effect:e});var g,h=e?e===!0||typeof e=="number"?c:e.effect||c:b;e=e||{},typeof e=="number"&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&(a.effects.effect[h]||a.uiBackCompat!==!1&&a.effects[h])?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.uiBackCompat!==!1&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})}),define("vendor/jquery.ui.position-1.9",["jquery"],function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e=/[+-]\d+%?/,f=/^\w+/,g=/%$/,h="center",i=a.fn.position;a.position={scrollbarWidth:function(){var b,c,d=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),e=d.children()[0];return a("body").append(d),b=e.offsetWidth,d.css("overflow","scroll"),c=e.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),b-c},getScrollInfo:function(b){var c=b[0],d=b.height()<c.scrollHeight,e=b.width()<c.scrollWidth,f=a.position.scrollbarWidth();return{height:d?f:0,width:e?f:0}}},a.fn.position=function(b){if(!b||!b.of)return i.apply(this,arguments);b=a.extend({},b);var j=a(b.of),k=a(b.within||window),l=j[0],m=(b.collision||"flip").split(" "),n={},o,p,q,r;return l.nodeType===9?(p=j.width(),q=j.height(),r={top:0,left:0}):a.isWindow(l)?(p=j.width(),q=j.height(),r={top:j.scrollTop(),left:j.scrollLeft()}):l.preventDefault?(b.at="left top",p=q=0,r={top:b.of.pageY,left:b.of.pageX}):(p=j.outerWidth(),q=j.outerHeight(),r=j.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" "),g,i;a.length===1&&(a=c.test(a[0])?a.concat([h]):d.test(a[0])?[h].concat(a):[h,h]),a[0]=c.test(a[0])?a[0]:h,a[1]=d.test(a[1])?a[1]:h,g=e.exec(a[0]),i=e.exec(a[1]),n[this]=[g?g[0]:0,i?i[0]:0],b[this]=[f.exec(a[0])[0],f.exec(a[1])[0]]}),m.length===1&&(m[1]=m[0]),b.at[0]==="right"?r.left+=p:b.at[0]===h&&(r.left+=p/2),b.at[1]==="bottom"?r.top+=q:b.at[1]===h&&(r.top+=q/2),o=[parseInt(n.at[0],10)*(g.test(n.at[0])?p/100:1),parseInt(n.at[1],10)*(g.test(n.at[1])?q/100:1)],r.left+=o[0],r.top+=o[1],this.each(function(){var c=a(this),d=c.outerWidth(),e=c.outerHeight(),f=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,j=a.position.getScrollInfo(k),l=d+f+(parseInt(a.curCSS(this,"marginRight",!0))||0)+j.width,s=e+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0)+j.height,t=a.extend({},r),u=[parseInt(n.my[0],10)*(g.test(n.my[0])?c.outerWidth()/100:1),parseInt(n.my[1],10)*(g.test(n.my[1])?c.outerHeight()/100:1)],v;b.my[0]==="right"?t.left-=d:b.my[0]===h&&(t.left-=d/2),b.my[1]==="bottom"?t.top-=e:b.my[1]===h&&(t.top-=e/2),t.left+=u[0],t.top+=u[1],t.left=Math.round(t.left),t.top=Math.round(t.top),v={left:t.left-f,top:t.top-i},a.each(["left","top"],function(f,g){a.ui.position[m[f]]&&a.ui.position[m[f]][g](t,{targetWidth:p,targetHeight:q,elemWidth:d,elemHeight:e,collisionPosition:v,collisionWidth:l,collisionHeight:s,offset:[o[0]+u[0],o[1]+u[1]],my:b.my,at:b.at,within:k,elem:c})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(t,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?e.scrollLeft():d.offset().left,h=f?e.width():d.outerWidth(),i=g-c.collisionPosition.left,j=c.collisionPosition.left+c.collisionWidth-h-g;c.collisionWidth>h||i>0?b.left+=i:j>0?b.left-=j:b.left=Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?e.scrollTop():d.offset().top,h=f?e.height():d.outerHeight(),i=g-c.collisionPosition.top,j=c.collisionPosition.top+c.collisionHeight-h-g;c.collisionHeight>h||i>0?b.top+=i:j>0?b.top-=j:b.top=Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===h)return;c.elem.removeClass("ui-flipped-left ui-flipped-right");var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?0:d.offset().left,i=f?d.width():d.outerWidth(),j=c.collisionPosition.left-g,k=c.collisionPosition.left+c.collisionWidth-i-g,l=c.my[0]==="left",m=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,n=c.at[0]==="left"?c.targetWidth:-c.targetWidth,o=-2*c.offset[0];if(j<0||k>0)c.elem.addClass("ui-flipped-"+(j<0?"right":"left")),b.left+=m+n+o},top:function(b,c){if(c.at[1]===h)return;c.elem.removeClass("ui-flipped-top ui-flipped-bottom");var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?0:d.offset().top,i=f?d.height():d.outerHeight(),j=c.collisionPosition.top-g,k=c.collisionPosition.top+c.collisionHeight-i-g,l=c.my[1]==="top",m=l?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,n=c.at[1]==="top"?c.targetHeight:-c.targetHeight,o=-2*c.offset[1];if(j<0||k>0)c.elem.addClass("ui-flipped-"+(j<0?"bottom":"top")),b.top+=m+n+o}}},a.uiBackCompat!==!1&&function(a){var c=a.fn.position;a.fn.position=function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:b}))}}(a)}),define("vendor/jquery.ui.popup-1.9",["jquery","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9","vendor/jquery.ui.position-1.9"],function(a,b,c,d){var e=0;a.widget("ui.popup",{version:"@VERSION",options:{position:{my:"left top",at:"left bottom"}},_create:function(){this.options.trigger||(this.options.trigger=this.element.prev()),this.element.attr("id")||(this.element.attr("id","ui-popup-"+e++),this.generatedId=!0),this.element.attr("role")||(this.element.attr("role","dialog"),this.generatedRole=!0),this.options.trigger.attr("aria-haspopup","true").attr("aria-owns",this.element.attr("id")),this.element.addClass("ui-popup"),this.close(),this._bind(this.options.trigger,{keydown:function(b){this.options.trigger.is("a:ui-button")&&b.keyCode==a.ui.keyCode.SPACE&&b.preventDefault(),b.keyCode==a.ui.keyCode.SPACE&&this.options.trigger.is("a:not(:ui-button)")&&this.options.trigger.trigger("click",b),b.keyCode==a.ui.keyCode.DOWN&&(b.preventDefault(),this.options.trigger.trigger("click",b))},click:function(a){a.preventDefault();if(this.isOpen)return;var b=this;clearTimeout(this.closeTimer),setTimeout(function(){b.open(a)},1)}}),this.element.is(":ui-menu")||this._bind({keydown:function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this.element),d=c.first(),e=c.last();b.target===e[0]&&!b.shiftKey?(d.focus(1),b.preventDefault()):b.target===d[0]&&b.shiftKey&&(e.focus(1),b.preventDefault())}}),this._bind({focusout:function(a){var b=this;b.closeTimer=setTimeout(function(){b.close(a)},100)},focusin:function(a){clearTimeout(this.closeTimer)}}),this._bind({keyup:function(b){b.keyCode==a.ui.keyCode.ESCAPE&&this.element.is(":visible")&&(this.close(b),this.options.trigger.focus())}}),this._bind(document,{click:function(b){this.isOpen&&!a(b.target).closest(".ui-popup").length&&this.close(b)}})},_destroy:function(){this.element.show().removeClass("ui-popup").removeAttr("aria-hidden").removeAttr("aria-expanded").unbind("keypress.ui-popup"),this.options.trigger.removeAttr("aria-haspopup").removeAttr("aria-owns"),this.generatedId&&this.element.removeAttr("id"),this.generatedRole&&this.element.removeAttr("role")},open:function(b){var c=a.extend({},{of:this.options.trigger},this.options.position);this.element.show().attr("aria-hidden","false").attr("aria-expanded","true").position(c);if(this.element.is(":ui-menu"))this.element.menu("focus",b,this.element.children("li").first()),this.element.focus();else{var d=this.element.find(":tabbable");this.removeTabIndex=!1,d.length||(this.element.is(":tabbable")||(this.element.attr("tabindex","0"),this.removeTabIndex=!0),d=d.add(this.element[0])),d.first().focus(1)}this.options.trigger.attr("tabindex",-1),this.isOpen=!0,this._trigger("open",b)},close:function(a){this.element.hide().attr("aria-hidden","true").attr("aria-expanded","false"),this.options.trigger.attr("tabindex",0),this.removeTabIndex&&this.element.removeAttr("tabindex"),this.isOpen=!1,this._trigger("close",a)}})}),define("vendor/jquery.ui.button-1.9",["jquery","jqueryui/button","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9"],function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"@VERSION",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),typeof this.options.disabled!="boolean"&&(this.options.disabled=this.element.prop("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i=this.type==="checkbox"||this.type==="radio",l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";h.label===null&&(h.label=this.buttonElement.html()),this.element.is(":disabled")&&(h.disabled=!0),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){if(h.disabled)return;a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(h.disabled)return;a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){if(f)return;b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(h.disabled)return;f=!1,d=a.pageX,e=a.pageY}).bind("mouseup.button",function(a){if(h.disabled)return;if(d!==a.pageX||e!==a.pageY)f=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().last(),b="label[for="+this.element.attr("id")+"]";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super("_setOption",a,b);if(a==="disabled"){b?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(i),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.ui.button.version="@VERSION",a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){a==="disabled"&&this.buttons.button("option",a,b),this._super("_setOption",a,b)},refresh:function(){var b=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(b?"ui-corner-right":"ui-corner-left").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}),define("vendor/jquery.ui.menu-1.9",["jquery","jqueryui/autocomplete","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9"],function(a){var b=0;a.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:150,options:{position:{my:"left top",at:"right top"}},_create:function(){var c=this;this.activeMenu=this.element,this.menuId=this.element.attr("id")||"ui-menu-"+b++,this.element.find(".ui-icon").length&&this.element.addClass("ui-menu-icons"),this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"menu"}).bind("click.menu",function(b){var d=a(b.target).closest(".ui-menu-item:has(a)");if(c.options.disabled)return!1;if(!d.length)return;(!c.active||c.active[0]!==d[0])&&c.focus(b,d),c.select(b)}).bind("mouseover.menu",function(b){if(c.options.disabled)return;var d=a(b.target).closest(".ui-menu-item");d.length&&(d.siblings().children(".ui-state-active").removeClass("ui-state-active"),c.focus(b,d))}).bind("mouseout.menu",function(b){if(c.options.disabled)return;var d=a(b.target).closest(".ui-menu-item");d.length&&c.blur(b)}).bind("focus.menu",function(b){if(c.options.disabled)return;c.focus(b,a(b.target).children(".ui-menu-item:first"))}).bind("blur.menu",function(a){if(c.options.disabled)return;c.collapseAll(a)}),this.refresh(),this.element.attr("tabIndex",0).bind("keydown.menu",function(b){if(c.options.disabled)return;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:c.previousPage(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.PAGE_DOWN:c.nextPage(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.HOME:c._move("first","first",b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.END:c._move("last","last",b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.UP:c.previous(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.DOWN:c.next(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.LEFT:c.collapse(b)&&b.stopImmediatePropagation(),b.preventDefault();break;case a.ui.keyCode.RIGHT:c.expand(b)&&b.stopImmediatePropagation(),b.preventDefault();break;case a.ui.keyCode.ENTER:c.active.children("a[aria-haspopup='true']").length?c.expand(b)&&b.stopImmediatePropagation():(c.select(b),b.stopImmediatePropagation()),b.preventDefault();break;case a.ui.keyCode.ESCAPE:c.collapse(b)&&b.stopImmediatePropagation(),b.preventDefault();break;default:b.stopPropagation(),clearTimeout(c.filterTimer);var d,e=c.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1;f==e?g=!0:f=e+f;function h(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}d=c.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+h(f),"i")).test(a(this).children("a").text())}),d=g&&d.index(c.active.next())!=-1?c.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),d=c.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+h(f),"i")).test(a(this).children("a").text())})),d.length?(c.focus(b,d),d.length>1?(c.previousFilter=f,c.filterTimer=setTimeout(function(){delete c.previousFilter},1e3)):delete c.previousFilter):delete c.previousFilter}}),this._bind(document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b)}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find("ul").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").show(),this.element.find(".ui-menu-item").unbind(".menu").removeClass("ui-menu-item").removeAttr("role").children("a").removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").removeAttr("id").children(".ui-icon").remove()},refresh:function(){var b=this,c=this.element.find("ul:not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr("role","menu").hide().attr("aria-hidden","true").attr("aria-expanded","false"),d=c.add(this.element).children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation");d.children("a").addClass("ui-corner-all").attr("tabIndex",-1).attr("role","menuitem").attr("id",function(a){return b.element.attr("id")+"-"+a}),c.each(function(){var b=a(this),c=b.prev("a");c.attr("aria-haspopup","true").prepend('<span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>'),b.attr("aria-labelledby",c.attr("id"))})},focus:function(b,c){var d,e=this;this.blur(b);if(this._hasScroll()){var f=parseFloat(a.curCSS(this.activeMenu[0],"borderTopWidth",!0))||0,g=parseFloat(a.curCSS(this.activeMenu[0],"paddingTop",!0))||0,h=c.offset().top-this.activeMenu.offset().top-f-g,i=this.activeMenu.scrollTop(),j=this.activeMenu.height(),k=c.height();h<0?this.activeMenu.scrollTop(i+h):h+k>j&&this.activeMenu.scrollTop(i+h-j+k)}this.active=c.first().children("a").addClass("ui-state-focus").end(),e.element.attr("aria-activedescendant",e.active.children("a").attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e.timer=setTimeout(function(){e._close()},e.delay),d=a(">ul",c),d.length&&/^mouse/.test(b.type)&&e._startOpening(d),this.activeMenu=c.parent(),this._trigger("focus",b,{item:c})},blur:function(a){if(!this.active)return;clearTimeout(this.timer),this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active})},_startOpening:function(a){clearTimeout(this.timer);if(a.attr("aria-hidden")!=="true")return;var b=this;b.timer=setTimeout(function(){b._close(),b._open(a)},b.delay)},_open:function(b){clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents()).hide().attr("aria-hidden","true");var c=a.extend({},{of:this.active},a.type(this.options.position)=="function"?this.options.position(this.active):this.options.position);b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(a){this.element.find("ul").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active"),this.blur(a),this.activeMenu=this.element},_close:function(){this.active.parent().find("ul").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parents("li:not(.ui-menubar-item)").first();if(b&&b.length)return this.active.parent().attr("aria-hidden","true").attr("aria-expanded","false").hide(),this.focus(a,b),!0},expand:function(a){var b=this,c=this.active&&this.active.children("ul").children("li").first();if(c&&c.length)return this._open(c.parent()),setTimeout(function(){b.focus(a,c)},20),!0},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){if(!this.active){this.focus(c,this.activeMenu.children(".ui-menu-item")[b]());return}var d;a==="first"||a==="last"?d=this.active[a==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):d=this.active[a+"All"](".ui-menu-item").eq(0),d.length?this.focus(c,d):this.focus(c,this.activeMenu.children(".ui-menu-item")[b]())},nextPage:function(b){if(this._hasScroll()){if(!this.active){this.focus(b,this.activeMenu.children(".ui-menu-item").first());return}if(this.last())return;var c=this.active.offset().top,d=this.element.height(),e;this.active.nextAll(".ui-menu-item").each(function(){return e=a(this),a(this).offset().top-c-d<0}),this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(b){if(this._hasScroll()){if(!this.active){this.focus(b,this.activeMenu.children(".ui-menu-item").first());return}if(this.first())return;var c=this.active.offset().top,d=this.element.height(),e;this.active.prevAll(".ui-menu-item").each(function(){return e=a(this),a(this).offset().top-c+d>0}),this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.height()<this.element.prop("scrollHeight")},select:function(a){var b={item:this.active};this.collapseAll(a),this._trigger("select",a,b)}})}),define("jquery.ui.menu.inputmenu",["jquery","vendor/jquery.ui.menu-1.9"],function(a,b){var c=a.ui.menu.prototype,d=c.refresh;a.extend(c,{refresh:function(){d.call(this);var b=this,c=this.element.find("li.ui-menu-item"),e=!1;this.element.bind("click.menu",function(a){(new RegExp(/^a$/i)).test(a.target.tagName)||a.preventDefault()});var f=0;this.element.find("input[type='checkbox'], input[type='radio']").each(function(){var b=a(this).closest("label");b.length&&(a(this).insertBefore(b),a(this).attr("id")||a(this).attr("id","ui-input-"+f++),b.attr("for",a(this).attr("id")))}),c.children("a").each(function(b,c){var d=a(c),f=d.parent();d.children().is("input[type='checkbox'], input[type='radio']")&&(d.closest("ul").addClass("ui-menu-icons"),d.children("input[type='checkbox']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-check"></span>'),f.attr({role:"menuitemcheckbox","aria-checked":"true"})):d.children("input[type='radio']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-radio-on"></span>'),f.attr({role:"menuitemradio","aria-checked":"true"})):d.children("input[type='radio']").length?(d.prepend('<span class="ui-icon ui-icon-radio-off"></span>'),f.attr({role:"menuitemradio","aria-checked":"false"})):f.attr({role:"menuitemcheckbox","aria-checked":"false"}),d.children().is("input[type='radio']")&&f.attr("radio-group",d.children("input[type='radio']").attr("name")),f.prev().length&&!f.prev().children("a").length?(f.prev().addClass("ui-state-disabled").html("<span class='ui-menu-input-group'>"+f.prev().text()+"</span>").bind("click.menu",!1).after('<li class="ui-menu-item"><hr /></li>'),e=!0):f.prev().length&&!f.prev().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.before("<li><hr /></li>"),e&&f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")?(f.after("<li><hr /></li>"),e=!1):f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.after("<li><hr /></li>"),d.children("input[type='checkbox'], input[type='radio']").hide())}),c.bind("keydown.menu",function(c){c.keyCode===a.ui.keyCode.SPACE&&(b.active.children("a").children().is("input[type='checkbox'], input[type='radio']")&&(b.select(c),c.stopImmediatePropagation()),c.preventDefault())})},select:function(b){var c={item:this.active};this.active.children("a").children().is("input[type='checkbox']")&&(this.active.attr("aria-checked")==="false"?(this.active.children("a").prepend('<span class="ui-icon ui-icon-check"></span>'),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='checkbox']").prop("checked","checked").trigger("change")):this.active.attr("aria-checked")==="true"&&(this.active.children("a").children("span.ui-icon-check").remove(),this.active.attr("aria-checked","false"),this.active.children("a").children("input[type='checkbox']").removeAttr("checked").trigger("change"))),this.active.children("a").children().is("input[type='radio']")&&this.active.attr("aria-checked")==="false"&&(this.active.children("a").children("span.ui-icon-radio-off").toggleClass("ui-icon-radio-on ui-icon-radio-off"),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='radio']").prop("checked","checked").trigger("change"),this.active.siblings("[radio-group="+a(this.active).attr("radio-group")+"]").each(function(){a(this).attr("aria-checked","false"),a(this).children("a").children("span.ui-icon-radio-on").toggleClass("ui-icon-radio-on ui-icon-radio-off"),a(this).children("a").children("input[type='radio']").removeAttr("checked")})),this.active.children("a").children().is("input[type='checkbox'], input[type='radio']")||this.collapseAll(),this._trigger("select",b,c)}})}),function(){define("compiled/jquery.kylemenu",["jquery","jquery.ui.menu.inputmenu","vendor/jquery.ui.popup-1.9","vendor/jquery.ui.button-1.9"],function(a,b,c,d){return a.fn.kyleMenu=function(b){return this.each(function(){var c,d,e,f;return f=a.extend(!0,{},a.fn.kyleMenu.defaults,b),d=a(this),f.noButton||(d.button(f.buttonOpts),d.bind("mouseleave.button",function(){if(c.is(".ui-state-open"))return d.addClass("ui-state-active")})),c=d.next().menu(f.menuOpts).popup(f.popupOpts).addClass("ui-kyle-menu use-css-transitions-for-show-hide"),e=f.appendMenuTo,e&&c.appendTo(e),d.data("kyleMenu",c),c.bind("menuselect",function(){return a(this).popup("close").removeClass("ui-state-open")})})},a.fn.kyleMenu.defaults={popupOpts:{position:{my:"center top",at:"center bottom",offset:"0 10px",within:"#main",collision:"fit"},open:function(b){var c,d,e,f,g;return a(this).find(".ui-menu-carat").remove(),c=a(this).popup("option","trigger"),c.addClass("ui-state-active"),g=c.outerWidth(),f=c.offset().left-a(this).offset().left,d=b.pageX-c.offset().left,e=Math.min(Math.max(6,d),g-6)+f,a('<span class="ui-menu-carat"><span /></span>').css("left",e).prependTo(this),a(this).css("-webkit-transform-origin-x",e+"px").addClass("ui-state-open")},close:function(){return a(this).popup("option","trigger").removeClass("ui-state-active"),a(this).removeClass("ui-state-open")}},buttonOpts:{icons:{primary:"ui-icon-home",secondary:"ui-icon-droparrow"}}},a(".al-trigger").live("click",function(b){var c,d,e;c=a(this);if(!c.is(".ui-button"))return b.preventDefault(),d={buttonOpts:{icons:{primary:null,secondary:null}}},e=a.extend(d,c.data("kyleMenuOptions")),c.kyleMenu(e),c.data("kyleMenu").popup("open")})})}.call(this),function(){require(["compiled/jquery.kylemenu"])}.call(this),define("compiled/bundles/jquery_ui_menu",function(){}),define("compiled/bundles/jquery_ui_menu",function(){}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/CommonEvent",["jquery","jquery.ajaxJSON","vendor/jquery.ba-tinypubsub"],function(b){return function(){function c(b,c,d){this.save=a(this.save,this),this.removeClass=a(this.removeClass,this),this.addClass=a(this.addClass,this),this.isUndated=a(this.isUndated,this),this.contextCode=a(this.contextCode,this),this.isAppointmentGroupEvent=a(this.isAppointmentGroupEvent,this),this.isAppointmentGroupFilledEvent=a(this.isAppointmentGroupFilledEvent,this),this.isNewEvent=a(this.isNewEvent,this),this.eventType="generic",this.contextInfo=c,this.actualContextInfo=d,this.allPossibleContexts=null,this.className=[],this.object={}}return c.prototype.isNewEvent=function(){var a;return this.eventType==="generic"||((a=this.object)!=null?!a.id:!void 0)},c.prototype.isAppointmentGroupFilledEvent=function(){var a,b;return((a=this.object)!=null?(b=a.child_events)!=null?b.length:void 0:void 0)>0},c.prototype.isAppointmentGroupEvent=function(){var a;return(a=this.object)!=null?a.appointment_group_url:void 0},c.prototype.contextCode=function(){var a,b,c;return((a=this.object)!=null?a.effective_context_code:void 0)||((b=this.object)!=null?b.context_code:void 0)||((c=this.contextInfo)!=null?c.asset_string:void 0)},c.prototype.isUndated=function(){return this.start===null},c.prototype.displayTimeString=function(){return""},c.prototype.readableType=function(){return""},c.prototype.fullDetailsURL=function(){return null},c.prototype.startDate=function(){return this.date},c.prototype.endDate=function(){return this.startDate()},c.prototype.possibleContexts=function(){return this.allPossibleContexts||[this.contextInfo]},c.prototype.addClass=function(a){var b,c,d,e,f;c=!1,f=this.className;for(d=0,e=f.length;d<e;d++){b=f[d];if(b===a){c=!0;break}}if(!c)return this.className.push(a)},c.prototype.removeClass=function(a){var b,c,d,e,f,g;c=0,f=this.className,g=[];for(d=0,e=f.length;d<e;d++)b=f[d],g.push(b===a?this.className.splice(c,1):c+=1);return g},c.prototype.save=function(c,d,e){var f,g,h,i,j;return h=a(function(a){return this.copyDataFromObject(a),b.publish("CommonEvent/eventSaved",this),typeof d=="function"?d():void 0},this),g=a(function(a){return b.publish("CommonEvent/eventSaveFailed",this),typeof e=="function"?e():void 0},this),j=this.methodAndURLForSave(),f=j[0],i=j[1],b.publish("CommonEvent/eventSaving",this),b.ajaxJSON(i,f,c,h,g)},c}()})}.call(this),define("jst/calendar/calendarApp",["compiled/handlebars_helpers","i18n!calendar.calendar_app"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/calendarApp"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<div>\n  <div id="calendar-header">\n    <div style="float: right">\n      <a href="#" id="refresh_calendar_link">',g="Refresh",h="refresh",i={},j="calendar.calendarApp",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a>\n    </div>\n    \n    <span id="calendar_views">\n      <input type="radio" id="week"      name="calendar_view" /><label for="week">',g="Week",h="links.calendar_week",i={},j="calendar.calendarApp",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n      <input type="radio" id="month"     name="calendar_view" checked="checked" /><label for="month">',g="Month",h="links.calendar_month",i={},j="calendar.calendarApp",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n      <input type="radio" id="scheduler" name="calendar_view" /><label for="scheduler">',g="Scheduler",h="links.calendar_scheduler",i={},j="calendar.calendarApp",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+=' <span stye="display: none" class="counter-badge"></span></label>\n    </div>\n  </span>\n  \n  <div class="scheduler-wrapper" style="display: none">\n    <div class="appointment-list">\n      <div class="list-wrapper"></div>\n    </div>\n  </div>\n  <div class="calendar"></div>\n</div>',f}),c["calendar/calendarApp"]}),define("jst/calendar/eventDetails",["compiled/handlebars_helpers","i18n!calendar.event_details"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/eventDetails"]=b(function(a,b,c,d,e){function q(a,b){var d="",e;return d+='\n        <a href="',e=c.fullDetailsURL||a.fullDetailsURL,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"fullDetailsURL",{hash:{}})),d+=o(e)+'" class="view_event_link">',e=c.title||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"</a>\n      ",d}function r(a,b){var d="",e;return d+="\n        ",e=c.title||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"\n      ",d}function s(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Calendar",f="calendar",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+='</th>\n          <td><a href="',e=c.contextInfo||a.contextInfo,e=e===null||e===undefined||e===!1?e:e.url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"contextInfo.url",{hash:{}})),d+=o(e)+'">',e=c.contextInfo||a.contextInfo,e=e===null||e===undefined||e===!1?e:e.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"contextInfo.name",{hash:{}})),d+=o(e)+"</a>\n            ",e=c.actualContextInfo||a.actualContextInfo,f=c["if"],j=k.program(6,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n          </td>\n        </tr>\n      ",d}function t(a,b){var d="",e;return d+='\n              <br><span class="event-details-actual-context">',e=c.actualContextInfo||a.actualContextInfo,e=e===null||e===undefined||e===!1?e:e.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"actualContextInfo.name",{hash:{}})),d+=o(e)+"</span>\n            ",d}function u(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Location",f="location",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</th>\n          <td>",e=c.location_name||a.location_name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"location_name",{hash:{}})),d+=o(e)+"</td>\n        </tr>\n      ",d}function v(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Details",f="details",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="</th>\n          <td>",e=c.description||a.description,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"description",{hash:{}}));if(e||e===0)d+=e;return d+="</td>\n        </tr>\n      ",d}function w(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Attendees",f="attendees",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;d+="</th>\n          <td>\n            ",e=c.can_edit||a.can_edit,f=c["if"],j=k.program(13,x,b),j.hash={},j.fn=j,j.inverse=k.program(16,z,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n          </td>\n        </tr>\n      ",d}function x(a,b){var d="",e,f;d+='\n              <ul id="attendees">\n                ',e=c.reservations||a.reservations,f=c.each,j=k.program(14,y,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n              </ul>\n            ",d}function y(a,b){var d="",e;return d+='\n                  <li data-url="',e=c.event_url||a.event_url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"event_url",{hash:{}})),d+=o(e)+'">\n                    <div class="ellipsis">',e=c.name||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+'</div>\n                    <a href="javascript:void(0)" class="cancel_appointment_link"></a>\n                  </li>\n                ',d}function z(a,b){var d="",e,f;d+="\n              <ul>\n                ",e=c.reservations||a.reservations,f=c.each,j=k.program(17,A,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n              </ul>\n            ",d}function A(a,b){var d="",e;return d+="\n                  <li>",e=c.name||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</li>\n                ",d}function B(a,b){var d="",e,f,g,h;d+='\n        <tr>\n          <th scope="row">',e="Slots available",f="slots_available",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</th>\n          <td>",e=c.availableSlotsText||a.availableSlotsText,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"availableSlotsText",{hash:{}})),d+=o(e)+"</td>\n        </tr>\n      ",d}function C(a,b){var d="",e;return d+='\n      <div class="available_slots">\n        ',e=c.available_slots_text||a.available_slots_text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"available_slots_text",{hash:{}})),d+=o(e)+"\n      </div>\n    ",d}function D(a,b){var d="",e,f,g,h;d+='\n      <a href="#" class="button-secondary delete_event_link">',e="Delete",f="links.delete",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a>\n    ",d}function E(a,b){var d="",e,f,g,h;d+='\n        <a href="#" class="reserve_event_link"><strong>',e="Reserve",f="links.reserve",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</strong></a>\n      ",d}function F(a,b){var d="",e,f,g,h;d+='\n        <a href="#" class="unreserve_event_link">',e="Un-reserve",f="links.unreserve",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a>\n      ",d}function G(a,b){var d="",e,f,g,h;d+='\n        <a href="#" class="edit_event_link">',e="Edit",f="links.edit",g={},h="calendar.eventDetails",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a>\n      ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression,p=c.blockHelperMissing;f+='<div class="event-details carat-bottom">\n  <div class=\'event-details-header\'>\n    <a href="#" class="popover_close x-close-link"></a>\n    <h3 class="details_title title">\n      ',g=c.fullDetailsURL||b.fullDetailsURL,h=c.can_edit||b.can_edit,i=c.ifAll||b.ifAll,j=k.program(1,q,e),j.hash={},j.fn=j,j.inverse=k.program(3,r,e),typeof i===l?g=i.call(b,h,g,j):g=p.call(b,i,h,g,j);if(g||g===0)f+=g;f+='\n    </h3>\n  </div>\n  <div class="event-details-content">\n    <div class="event-details-timestring">',g=c.displayTimeString||b.displayTimeString,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"displayTimeString",{hash:{}}));if(g||g===0)f+=g;f+='</div>\n    <table cellspacing="0">\n      ',g=c.contextInfo||b.contextInfo,h=c["if"],j=k.program(5,s,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",g=c.location_name||b.location_name,h=c["if"],j=k.program(8,u,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",g=c.description||b.description,h=c["if"],j=k.program(10,v,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",g=c.reservations||b.reservations,h=c["if"],j=k.program(12,w,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",g=c.availableSlotsText||b.availableSlotsText,h=c["if"],j=k.program(19,B,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    </table>\n    <div class="details_description lock_explanation">',g=c.lock_explanation||b.lock_explanation,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"lock_explanation",{hash:{}}));if(g||g===0)f+=g;f+="</div>\n    ",g=c.available_slots_text||b.available_slots_text,h=c["if"],j=k.program(21,C,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n  </div>\n  <div class="popover-links-holder event-details-footer">\n    ',g=c.can_delete||b.can_delete,h=c["if"],j=k.program(23,D,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    <div class="event-details-links">\n      ',g=c.can_reserve||b.can_reserve,h=c["if"],j=k.program(25,E,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",g=c.can_unreserve||b.can_unreserve,h=c["if"],j=k.program(27,F,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",g=c.can_edit||b.can_edit,h=c["if"],j=k.program(29,G,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n    </div>\n  </div>\n</div>\n",f}),c["calendar/eventDetails"]}),define("jst/calendar/deleteItem",["compiled/handlebars_helpers","i18n!calendar.delete_item"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/deleteItem"]=b(function(a,b,c,d,e){function o(a,b){var d="",e;return d+="\n  <p>\n    ",e=c.details||a.details,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"details",{hash:{}})),d+=n(e)+"\n  </p>\n  ",d}function p(a,b){var d="",e,f,g,h;d+='\n  <div>\n    <label for="cancel_reason">',e="Reason for deletion:",f="deletion_reason",g={},h="calendar.deleteItem",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+='</label><br />\n    <textarea id="cancel_reason"></textarea>\n  </div>\n  ',d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;f+='<div id="delete_event_dialog">\n  <p>\n    ',g=c.message||b.message,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"message",{hash:{}})),f+=n(g)+"\n  </p>\n  ",g=c.details||b.details,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;f+="\n  ",g=c.hide_reason||b.hide_reason,h=c.unless,i=j.program(3,p,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n</div>",f}),c["calendar/deleteItem"]}),define("jst/calendar/reservationOverLimitDialog",["compiled/handlebars_helpers","i18n!calendar.reservation_over_limit_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/reservationOverLimitDialog"]=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+="\n    ",e="Cancel existing reservation and sign up for this one?",f="cancel_existing_reservation",g={},h="calendar.reservationOverLimitDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  ",d}function r(a,b){var d="",e,f,g,h;d+="\n    ",e="Appointment limit reached",f="appointment_limit_reached",g={},h="calendar.reservationOverLimitDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  ",d}function s(a,b){var d="",e,f,g;return d+="\n    <div>\n      ",e=c.end_at||a.end_at,f=c.start_at||a.start_at,g=c.semanticDateRange||a.semanticDateRange,typeof g===m?e=g.call(a,f,e,{hash:{}}):g===o?e=n.call(a,"semanticDateRange",f,e,{hash:{}}):e=g,d+=p(e)+"\n    </div>\n  ",d}function t(a,b){var d="",e,f,g,h;d+="\n    ",e="Would you like to cancel that and sign up for this?",f="would_you_like_to_cancel_that_and_sign_up_for_this",g={},h="calendar.reservationOverLimitDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  ",d}function u(a,b){var d="",e,f,g,h;d+="\n    ",e="Please cancel one of your other reservations and try again.",f="cancel_some_appointments_and_try_again",g={},h="calendar.reservationOverLimitDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<div title="\n  ',g=c.reschedulable||b.reschedulable,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.program(3,r,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+='">\n\n  ',g="You are already signed up for:",h="you_are_already_signed_up_for",i={},j="calendar.reservationOverLimitDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="<br>\n  ",g=c.reservations||b.reservations,h=c.each,k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n  ",g=c.reschedulable||b.reschedulable,h=c["if"],k=l.program(7,t,e),k.hash={},k.fn=k,k.inverse=l.program(9,u,e),g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n</div>\n",f}),c["calendar/reservationOverLimitDialog"]}),define("jst/calendar/TimeBlockRow",["compiled/handlebars_helpers","i18n!calendar.time_block_row"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/TimeBlockRow"]=b(function(a,b,c,d,e){function p(a,b){return'class="locked"'}function q(a,b){return" disabled"}function r(a,b){return" disabled"}function s(a,b){return" disabled"}function t(a,b){var d="",e,f,g,h;d+='\n      <a href="#" class="delete-block-link">',e="Remove row",f="remove_row",g={},h="calendar.TimeBlockRow",g.scope=h,h=c.t||a.t,j={},j.hash=g,typeof h===l?e=h.call(a,f,e,j):h===n?e=m.call(a,"t",f,e,j):e=h;if(e||e===0)d+=e;return d+="</a>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+="<tr ",g=c.locked||b.locked,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='>\n  <td class="date-column"><input name="date" class="date_field" value="',g="MMM d, yyyy",h=c.start||b.start,i=c.dateToString||b.dateToString,typeof i===l?g=i.call(b,h,g,{hash:{}}):i===n?g=m.call(b,"dateToString",h,g,{hash:{}}):g=i,f+=o(g)+'"',g=c.locked||b.locked,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='/></td>\n  <td class="start-time-column"><input name="start_time" class="time_field start_time" value="',g="h:mmtt",h=c.start||b.start,i=c.dateToString||b.dateToString,typeof i===l?g=i.call(b,h,g,{hash:{}}):i===n?g=m.call(b,"dateToString",h,g,{hash:{}}):g=i,f+=o(g)+'"',g=c.locked||b.locked,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='/></td>\n  <td class="separator-column">-</td>\n  <td class="end-time-column"><input name="end_time" class="time_field end_time" value="',g="h:mmtt",h=c.end||b.end,i=c.dateToString||b.dateToString,typeof i===l?g=i.call(b,h,g,{hash:{}}):i===n?g=m.call(b,"dateToString",h,g,{hash:{}}):g=i,f+=o(g)+'"',g=c.locked||b.locked,h=c["if"],j=k.program(7,s,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='/></td>\n  <td class="delete-column">\n    ',g=c.locked||b.locked,h=c.unless,j=k.program(9,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n  </td>\n</tr>\n",f}),c["calendar/TimeBlockRow"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty;define("compiled/calendar/TimeBlockRow",["i18n!calendar","jst/calendar/TimeBlockRow"],function(c,d){var e;return e=function(){function e(b,c){this.TimeBlockList=b,c==null&&(c={}),this.focus=a(this.focus,this),this.remove=a(this.remove,this),this.locked=c.locked,this.$row=$(d(c)).bind({focusin:this.focus,focusout:a(function(){return this.$row.removeClass("focused")},this)}),this.inputs={},this.locked||(this.$row.find(".date_field").date_field(),this.$row.find(".time_field").time_field()),$.each(this.inputNames,a(function(b,c){this.inputs[c]={},this.inputs[c].$el=this.$row.find("input[name='"+c+"']").change(a(function(){return this.handleInputChange(c)},this)),this.updateModel(c);if(this.locked)return this.inputs[c].valid=!0},this)),this.$row.find(".delete-block-link").click(this.remove)}return e.prototype.inputNames=["date","start_time","end_time"],e.prototype.updateModel=function(a){return this.inputs[a].val=$.trim(this.inputs[a].$el.val())},e.prototype.handleInputChange=function(a){this.updateModel(a),this.validateField(a),this.validate()},e.prototype.updateDom=function(a,b){return this.inputs[a].val=b,this.inputs[a].$el.val(b)},e.prototype.remove=function(a){return a!=null&&a.preventDefault(),this.$row.remove(),this.TimeBlockList.rowRemoved(this)},e.prototype.focus=function(){this.$row.addClass("focused");if(this.$row.is(":last-child"))return this.$row.parents(".time-block-list-body-wrapper").scrollTop(9999)},e.prototype.validateField=function(a){var b,c;return b=this.inputs[a].$el.nextAll(".datetime_suggest"),c=b.hasClass("invalid_datetime"),c||this.updateDom(a,b.text()),this.inputs[a].$el.toggleClass("error",c),this.inputs[a].valid=!c},e.prototype.validate=function(){var a,d,e,f,g,h;if(this.locked)return!0;f=!0,g=this.inputs;for(d in g){if(!b.call(g,d))continue;a=g[d],(h=a.$el.data("associated_error_box"))!=null&&h.remove(),this.validateField(d)||(f=!1)}return f&&!this.blank()&&(this.validDate()&&this.inputs.end_time.val&&this.endAt()<new Date&&(f=!1,this.inputs.end_time.$el.addClass("error").errorBox(c.t("ends_in_past_error","You cannot create an appointment slot that ends in the past"))),this.inputs.start_time.val&&this.inputs.end_time.val&&(e=this.validDate()||"Today",this.timeToDate(e,this.inputs.end_time.val)<=this.timeToDate(e,this.inputs.start_time.val)&&(f=!1,this.inputs.start_time.$el.addClass("error").errorBox(c.t("end_before_start_error","Start time must be before end time"))))),this.blank()||f},e.prototype.timeToDate=function(a,b){return Date.parse(a+" "+b)},e.prototype.endAt=function(){if(this.validDate())return this.timeToDate(this.inputs.date.val,this.inputs.end_time.val)},e.prototype.startAt=function(){if(this.validDate())return this.timeToDate(this.inputs.date.val,this.inputs.start_time.val)},e.prototype.validDate=function(){if(this.inputs.date.val&&this.inputs.date.valid)return this.inputs.date.val},e.prototype.getData=function(){return[this.startAt(),this.endAt(),!!this.locked]},e.prototype.blank=function(){return this.inputs.date.val===""&&this.inputs.start_time.val===""&&this.inputs.end_time.val===""},e}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/TimeBlockList",["jquery","i18n!calendar","compiled/calendar/TimeBlockListManager","compiled/calendar/TimeBlockRow","jquery.instructure_date_and_time","jquery.instructure_forms","vendor/date"],function(b,c,d,e){var f;return f=function(){function f(c,e,f){this.handleSplitClick=a(this.handleSplitClick,this),this.addRow=a(this.addRow,this),this.element=b(c),this.splitterDiv=b(e),this.blocksManager=new d(f),this.splitterDiv.find(".split-link").click(this.handleSplitClick),this.element.delegate("input","change",a(function(a){if(b(a.currentTarget).closest("tr").is(":last-child"))return this.addRow()},this)),this.render()}return f.prototype.render=function(){var a,b,c,d;this.rows=[],this.element.empty(),d=this.blocksManager.blocks;for(b=0,c=d.length;b<c;b++)a=d[b],this.addRow(a);return this.addRow()},f.prototype.rowRemoved=function(a){var b,c;this.rows=function(){var d,e,f,g;f=this.rows,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],c!==a&&(c.locked||(b=!0),g.push(c));return g}.call(this);if(!b)return this.addRow()},f.prototype.addRow=function(a){var b;return b=new e(this,a),this.element.append(b.$row),this.rows.push(b),b},f.prototype.handleSplitClick=function(a){var b;return a.preventDefault(),b=this.splitterDiv.find("[name=duration]").val(),this.split(b)},f.prototype.split=function(a){if(a&&this.validate())return this.blocksManager.split(a),this.render()},f.prototype.validate=function(){var a,b,d,e,f,g;b=!0,this.blocksManager.reset(),f=this.rows;for(d=0,e=f.length;d<e;d++)a=f[d],a.validate()?a.blank()||(g=this.blocksManager).add.apply(g,a.getData()):b=!1;return b||alert(c.t("time_block_errors","There are errors in your time block selections.")),b},f.prototype.blocks=function(){var a,b,c,d,e;d=this.blocksManager.blocks,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.locked||e.push([a.start,a.end]);return e},f}()})}.call(this),define("jst/calendar/editCalendarEvent",["compiled/handlebars_helpers","i18n!calendar.edit_calendar_event"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editCalendarEvent"]=b(function(a,b,c,d,e){function q(a,b){var d="",e;return d+="\n          ",e=c.title||a.title,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"title",{hash:{}})),d+=p(e)+"\n        ",d}function r(a,b){var d="",e;return d+='\n          <input id="calendar_event_title" name="calendar_event[title]" size="30" style="width: 150px;" type="text" value="',e=c.title||a.title,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"title",{hash:{}})),d+=p(e)+'"/>\n        ',d}function s(a,b){var d="",e,f;d+="\n            ",e=c.can_create_calendar_events||a.can_create_calendar_events,f=c["if"],k=l.program(6,t,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n          ",d}function t(a,b){var d="",e;return d+='\n              <option value="',e=c.asset_string||a.asset_string,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"asset_string",{hash:{}})),d+=p(e)+'">',e=c.name||a.name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"name",{hash:{}})),d+=p(e)+"</option>\n            ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+="<form action='#' id='edit_calendar_event_form' style='padding: 5px; width: 400px'>\n  <table class=\"formtable\" style=\"width: 100%;\">\n    <tr>\n      <td style=\"vertical-align: top;\">",g="Title:",h="title",i={},j="calendar.editCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</td>\n      <td>\n        ",g=c.lockedTitle||b.lockedTitle,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.program(3,r,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n      </td>\n    </tr>\n    <tr>\n      <td style="vertical-align: top;">',g="Date:",h="date",i={},j="calendar.editCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</td>\n      <td><input type="text" name="date" style="width: 100px;" class="date_field"/></td>\n    </tr>\n    <tr>\n      <td style="vertical-align: top;">',g="From:",h="from",i={},j="calendar.editCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</td>\n      <td>\n        <div style="float: left;"><input type="text" name="start_time" style="width: 60px;" class="time_field start_time"/></div>\n        ',g="* to *",h="timespan_separator",i={},j="calendar.editCalendarEvent",i.scope=j,j='<div style="float: left; margin: 5px">$1</div>',i.w0=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='\n        <div style="float: left;"><input type="text" name="end_time" style="width: 60px;" class="time_field end_time"/></div>\n        <div class="clear"></div>\n      </td>\n    </tr>\n    <tr class="context_select">\n      <td>',g="Calendar:",h="calendar",i={},j="calendar.editCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</td>\n      <td>\n        <select class="context_id" name="calendar_event[context_code]">\n          ',g=c.contexts||b.contexts,h=c.each,k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n        </select>\n      </td>\n    </tr><tr>\n      <td></td>\n      <td><a href="#" class="more_options_link">',g="more options",h="links.more_options",i={},j="calendar.editCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></td>\n    </tr><tr>\n      <td colspan="2" class="button-container" style="text-align: right">\n        <button type="submit" class="button">',g="Submit",h="buttons.submit",i={},j="calendar.editCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n      </td>\n    </tr>\n  </table>\n</form>\n",f}),c["calendar/editCalendarEvent"]}),define("jst/calendar/genericSelect",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/genericSelect"]=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+='\n    <option value="',e=c.asset_string||a.asset_string,f=c["if"],i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.program(4,q,b),e=f.call(a,e,i);if(e||e===0)d+=e;return d+='">',e=c.name||a.name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"name",{hash:{}})),d+=n(e)+"</option>\n  ",d}function p(a,b){var d;return d=c.asset_string||a.asset_string,typeof d===k?d=d.call(a,{hash:{}}):d===m&&(d=l.call(a,"asset_string",{hash:{}})),n(d)}function q(a,b){var d;return d=c.id||a.id,typeof d===k?d=d.call(a,{hash:{}}):d===m&&(d=l.call(a,"id",{hash:{}})),n(d)}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;f+='<select class="',g=c.cssClass||b.cssClass,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"cssClass",{hash:{}})),f+=n(g)+'" name="',g=c.name||b.name,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"name",{hash:{}})),f+=n(g)+'">\n  ',g=c.collection||b.collection,h=c.each,i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n</select>",f}),c["calendar/genericSelect"]}),define("jst/calendar/editAssignment",["compiled/handlebars_helpers","i18n!calendar.edit_assignment"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editAssignment"]=b(function(a,b,c,d,e){function q(a,b){var d="",e,f;d+="\n            ",e=c.can_create_assignments||a.can_create_assignments,f=c["if"],k=l.program(2,r,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n          ",d}function r(a,b){var d="",e;return d+='\n              <option value="',e=c.asset_string||a.asset_string,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"asset_string",{hash:{}})),d+=p(e)+'">',e=c.name||a.name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"name",{hash:{}})),d+=p(e)+"</option>\n            ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+="<form action='#' id='edit_assignment_form' style='padding: 5px; width: 400px'>\n  <table class=\"formtable\" style=\"width: 100%;\">\n    <tr>\n      <td>",g="Title:",h="title",i={},j="calendar.editAssignment",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</td>\n      <td><input id="assignment_title" name="assignment[title]" size="30" style="width: 200px;" type="text" value="',g=c.title||b.title,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"title",{hash:{}})),f+=p(g)+'"/></td>\n    </tr>\n    <tr>\n      <td>',g="Due:",h="due",i={},j="calendar.editAssignment",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</td>\n      <td>\n        <input class="datetime_field" id="assignment_due_at" name="assignment[due_at]" size="30" style="width: 150px;" type="text" />\n      </td>\n    </tr>\n    <tr class="context_select">\n      <td>',g="Calendar:",h="calendar",i={},j="calendar.editAssignment",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</td>\n      <td>\n        <select class="context_id">\n          ',g=c.contexts||b.contexts,h=c.each,k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n        </select>\n      </td>\n    </tr>\n    <tr>\n      <td>",g="Group:",h="group",i={},j="calendar.editAssignment",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</td>\n      <td class="assignment_group_select">\n        <select class="assignment_group" name="assignment[assignment_group_id]">\n          <option value="new">[ New Group ]</option>\n        </select>\n      </td>\n    </tr>\n    <tr>\n      <td></td>\n      <td><a href="#" class="more_options_link">',g="more options",h="links.more_options",i={},j="calendar.editAssignment",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></td>\n    </tr>\n    <tr>\n      <td colspan="2" style="text-align: right">\n        <button type="submit" class="button">',g="Submit",h="buttons.submit",i={},j="calendar.editAssignment",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n      </td>\n    </tr>\n  </table>\n</form>",f}),c["calendar/editAssignment"]}),define("jst/calendar/editApptCalendarEvent",["compiled/handlebars_helpers","i18n!calendar.edit_appt_calendar_event"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editApptCalendarEvent"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<form action="',g=c.calendarEvent||b.calendarEvent,g=g===null||g===undefined||g===!1?g:g.appointment_group_url,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"calendarEvent.appointment_group_url",{hash:{}})),f+=p(g)+'" id="edit_appt_calendar_event_form">\n  <p>\n    <strong>',g="Description:",h="description",i={},j="calendar.editApptCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</strong><br>\n    <textarea name="description">',g=c.description||b.description,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"description",{hash:{}})),f+=p(g)+'</textarea>\n  </p>\n  <p>\n    <input type="checkbox" name="max_participants_option">\n    ',g="Limit this slot to",h="slot_limit",i={},j="calendar.editApptCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='\n    <input type="number" name="max_participants" class="max-participants" min="1" disabled>\n    ',g="users.",h="users",i={},j="calendar.editApptCalendarEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="\n  </p>\n</form>\n",f}),c["calendar/editApptCalendarEvent"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditApptCalendarEventDialog",["i18n!appt_calendar_event_dialog","jst/calendar/editApptCalendarEvent"],function(b,c){var d;return d=function(){function d(d){var e;this.event=d,this.save=a(this.save,this),this.form=$("<div></div>").html(c(this.event)).appendTo("body"),e=this.form.find("[name=max_participants_option]"),this.$maxParticipants=this.form.find("[name=max_participants]"),e.change(a(function(){return this.$maxParticipants.prop("disabled",!e.prop("checked"))},this)),this.event.calendarEvent.participants_per_appointment&&(e.click(),this.$maxParticipants.val(this.event.calendarEvent.participants_per_appointment)),this.dialog=this.form.dialog({autoOpen:!1,width:"auto",resizable:!1,title:b.t("title","Edit %{name}",{name:this.event.title}),buttons:[{text:b.t("update","Update"),"class":"button",click:this.save}]})}return d.prototype.show=function(){return this.dialog.dialog("open")},d.prototype.save=function(){var a,c,d,e;return a=this.dialog.getFormData(),c=a.max_participants_option==="on",d=a.max_participants,c&&d<=0?(this.$maxParticipants.errorBox(b.t("invalid_participants","You must allow at least one user to attend")),!1):(this.event.calendarEvent.description=a.description,c?(this.event.calendarEvent.total_slots=d,this.event.calendarEvent.remaining_slots=d-this.event.calendarEvent.child_events.length):(this.event.calendarEvent.total_slots=void 0,this.event.calendarEvent.remaining_slots=void 0),e=c?d:"",this.event.save({"calendar_event[description]":a.description,"calendar_event[participants_per_appointment]":e}),this.dialog.dialog("destroy"),this.form.remove())},d}()})}.call(this),define("jst/calendar/editAppointmentGroup",["compiled/handlebars_helpers","i18n!calendar.edit_appointment_group"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editAppointmentGroup"]=b(function(a,b,c,d,e){function r(a,b){var d="",e,f;d+="\n          ",e=c.can_create_appointment_groups||a.can_create_appointment_groups,f=c["if"],k=l.program(2,s,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n        ",d}function s(a,b){var d="",e;return d+='\n            <option value="',e=c.asset_string||a.asset_string,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"asset_string",{hash:{}})),d+=p(e)+'">',e=c.name||a.name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"name",{hash:{}})),d+=p(e)+"</option>\n          ",d}function t(a,b){return"checked"}function u(a,b){return" "}function v(a,b){return' style="display:none;" '}function w(a,b){return' style="display:none;" '}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression,q=c.blockHelperMissing;f+="<form action='#' id='edit_appointment_form'>\n  <div class=\"left-column-wrapper\">\n    <p>\n      <b>",g="Name",h="name",i={},j="calendar.editAppointmentGroup",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</b><br />\n      <input type="text" name="title" style="width: 190px" value="',g=c.appointment_group||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.title,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"appointment_group.title",{hash:{}})),f+=p(g)+'">\n    </p>\n    <p>\n      <b>',g="Location",h="location",i={},j="calendar.editAppointmentGroup",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</b><br />\n      <input type="text" name="location" style="width: 190px" value="',g=c.appointment_group||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.location_name,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"appointment_group.location_name",{hash:{}})),f+=p(g)+'">\n    </p>\n    <p>\n      <b>',g="Calendar",h="calendar",i={},j="calendar.editAppointmentGroup",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</b><br />\n      <select name="context_code" class="context_id">\n        ',g=c.contexts||b.contexts,h=c.each,k=l.program(1,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n      </select>\n    </p>\n    <p>\n      <input type="checkbox" class="group-signup-checkbox" id="group-signup-checkbox" name="use_group_signup" value="1" ',g="Group",h=c.participant_type||b.participant_type,i=c.ifEqual||b.ifEqual,k=l.program(4,t,e),k.hash={},k.fn=k,k.inverse=l.noop,typeof i===m?g=i.call(b,h,g,k):g=q.call(b,i,h,g,k);if(g||g===0)f+=g;f+='>\n      <label for="group-signup-checkbox">Have students sign up in groups.</label>\n    </p>\n    <p>\n      <div class="section-signup">\n        <b>',g="Limit Signups to",h="course_section",i={},j="calendar.editAppointmentGroup",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</b><br />\n        <div class="section_select">\n          <select name="section_id"></select>\n        </div>\n      </div>\n      <div class="group-signup" style="display: none">\n        <b>',g="Group Category",h="group_category",i={},j="calendar.editAppointmentGroup",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</b><br />\n        <div class="group_select">\n          <select name="group_category_id"></select>\n        </div>\n      </div>\n    </p>\n  </div>\n  <div class="right-column-wrapper">\n    <div class="time-block-list-wrapper">\n      <div class="time-block-list">\n        <table class="time-block-list-header">\n          <tr>\n            <th class="date-column">Date</th>\n            <th class="time-range-column" colspan="4">Time Range</th>\n          </tr>\n        </table>\n        <div class="time-block-list-body-wrapper">\n          <table class="time-block-list-body"></table>\n        </div>\n        <div class="splitter" style="font-size: 0.8em">\n          <p>\n            <a class="split-link button small-button" href="#">Split</a>into slots of <input type="number" name="duration" value="30" style="width: 40px" /> minutes each.\n          </p>\n        </div>\n      </div>\n    </div>\n    <div style="margin-top: 1.5em">\n      <b>Options</b>\n      <ul class="ag-options">\n        <li>\n          <input type="checkbox" id="appointment-blocks-per-slot-option-button" name="per_slot_option" value="1" />\n          <label for="appointment-blocks-per-slot-option-button">Limit each time slot to</label>\n          <input type="number" name="participants_per_appointment" value="',g=c.appointment_group||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.participants_per_appointment,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"appointment_group.participants_per_appointment",{hash:{}})),f+=p(g)+'" style="width: 40px;" />\n          <label for="appointment-blocks-per-slot-option-button">\n            <span ',g="Group",h=c.participant_type||b.participant_type,i=c.ifEqual||b.ifEqual,k=l.program(6,u,e),k.hash={},k.fn=k,k.inverse=l.program(8,v,e),typeof i===m?g=i.call(b,h,g,k):g=q.call(b,i,h,g,k);if(g||g===0)f+=g;f+=' class="per_appointment_groups_label">groups.</span>\n            <span ',g="Group",h=c.participant_type||b.participant_type,i=c.ifEqual||b.ifEqual,k=l.program(10,w,e),k.hash={},k.fn=k,k.inverse=l.noop,typeof i===m?g=i.call(b,h,g,k):g=q.call(b,i,h,g,k);if(g||g===0)f+=g;return f+=' class="per_appointment_users_label">users.</span>\n          </label>\n        </li>\n        <li>\n          <input type="checkbox" id="appointment-blocks-participant-visibility-button" name="participant_visibility" value="1" />\n          <label for="appointment-blocks-participant-visibility-button">Allow students to see who has signed up for time slots.</label>\n        </li>\n        <li>\n          <input type="checkbox" id="max-per-student-option" name="max_appointments_per_participant_option" value="1">\n          <label for="max-per-student-option">Limit participants to</label>\n          <input type="number" name="max_appointments_per_participant" value="',g=c.appointment_group||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.max_appointments_per_participant,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"appointment_group.max_appointments_per_participant",{hash:{}})),f+=p(g)+'" min="1"style="width: 40px">\n          <label for="max-per-student-option">appointment(s).</label>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="details-wrapper">\n    <b>Details:</b><br />\n    <textarea name="description" style="width: 100%">',g=c.appointment_group||b.appointment_group,g=g===null||g===undefined||g===!1?g:g.description,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"appointment_group.description",{hash:{}})),f+=p(g)+"</textarea>\n  </div>\n</form>\n",f}),c["calendar/editAppointmentGroup"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditAppointmentGroupDetails",["jquery","i18n!EditAppointmentGroupDetails","compiled/calendar/TimeBlockList","jst/calendar/editAppointmentGroup","jst/calendar/genericSelect","jquery.ajaxJSON","jquery.disableWhileLoading","jquery.instructure_forms"],function(b,c,d,e,f){var g;return g=function(){function g(c,f,g,h){var i,j,k,l,m;this.apptGroup=f,this.contextChangeCB=g,this.closeCB=h,this.contextChange=a(this.contextChange,this),this.save=a(this.save,this),this.saveClick=a(this.saveClick,this),this.saveWithoutPublishingClick=a(this.saveWithoutPublishingClick,this),this.currentContextInfo=null,b(c).html(e({title:this.apptGroup.title,contexts:this.apptGroup.contexts,appointment_group:this.apptGroup})),this.form=b(c).find("form"),this.form.find("select.context_id").change(this.contextChange).change(),this.apptGroup.id?(this.form.attr("action",this.apptGroup.url),this.form.find(".context_id").val(this.apptGroup.context_code).attr("disabled",!0),this.form.find("select.context_id").change(),this.form.find(".group_category").attr("disabled",!0),this.form.find(".course_section").attr("disabled",!0),this.form.find(".group-signup-checkbox").attr("disabled",!0),this.apptGroup.participant_type==="Group"?(this.form.find(".group-signup-checkbox").prop("checked",!0),this.form.find(".group_category").val(this.apptGroup.sub_context_code)):(this.form.find(".group-signup-checkbox").prop("checked",!1),this.apptGroup.sub_context_code?this.form.find(".course_section").val(this.apptGroup.sub_context_code):this.form.find(".course_section").val("all"))):this.form.attr("action",this.currentContextInfo.create_appointment_group_url),m=function(){var a,b,c,d;c=this.apptGroup.appointmentEvents||[],d=[];for(a=0,b=c.length;a<b;a++)i=c[a],d.push([i.start,i.end,!0]);return d}.call(this),this.timeBlockList=new d(this.form.find(".time-block-list-body"),this.form.find(".splitter"),m),this.form.find('[name="slot_duration"]').change(a(function(a){if(this.form.find('[name="autosplit_option"]').is(":checked"))return this.timeBlockList.split(a.target.value),this.timeBlockList.render()},this)),this.form.find('[name="participant_visibility"]').prop("checked",this.apptGroup.participant_visibility==="protected"),this.form.find(".group-signup-checkbox").change(a(function(a){var b;return b=!!a.target.checked,this.form.find(".per_appointment_groups_label").toggle(b),this.form.find(".per_appointment_users_label").toggle(!b),this.form.find(".section-signup").toggle(!b),this.form.find(".group-signup").toggle(b)},this)),this.form.find(".group-signup-checkbox").change(),this.form.find('[name="per_slot_option"]').change(a(function(a){var b,c;b=a.target,c=this.form.find('[name="participants_per_appointment"]');if(!b.checked)return c.attr("disabled",!0);c.attr("disabled",!1);if(c.val()==="")return c.val("1")},this)),this.apptGroup.participants_per_appointment>0?(this.form.find('[name="per_slot_option"]').prop("checked",!0),this.form.find('[name="participants_per_appointment"]').val(this.apptGroup.participants_per_appointment)):this.form.find('[name="participants_per_appointment"]').attr("disabled",!0),l=this.form.find('[name="max_appointments_per_participant"]'),j=this.apptGroup.max_appointments_per_participant||1,l.val(j),k=this.form.find("#max-per-student-option"),k.change(function(){return l.prop("disabled",!k.prop("checked"))}),j>0?k.prop("checked",!0):l.attr("disabled",!0),this.apptGroup.workflow_state==="active"&&this.form.find("#appointment-blocks-active-button").attr("disabled",!0).prop("checked",!0)}return g.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.apptGroup.contexts;for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},g.prototype.saveWithoutPublishingClick=function(a){return a.preventDefault(),this.save(!1)},g.prototype.saveClick=function(a){return a.preventDefault(),this.save(!0)},g.prototype.save=function(d){var e,f,g,h,i,j,k,l,m,n,o;f=this.form.getFormData({object_name:"appointment_group"}),e=this.apptGroup.id===void 0,k={"appointment_group[title]":f.title,"appointment_group[description]":f.description,"appointment_group[location_name]":f.location};if(f.max_appointments_per_participant_option){if(f.max_appointments_per_participant<1)return b('[name="max_appointments_per_participant"]').errorBox(c.t("bad_max_appts","You must allow at least one appointment per participant")),!1;k["appointment_group[max_appointments_per_participant]"]=f.max_appointments_per_participant}else k["appointment_group[max_appointments_per_participant]"]="";k["appointment_group[new_appointments]"]=[];if(!this.timeBlockList.validate())return!1;o=this.timeBlockList.blocks();for(m=0,n=o.length;m<n;m++)l=o[m],k["appointment_group[new_appointments]"].push([b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(l[0])),b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(l[1]))]);return f.per_slot_option==="1"&&f.participants_per_appointment&&(k["appointment_group[participants_per_appointment]"]=f.participants_per_appointment),d&&this.apptGroup.workflow_state!=="active"&&(k["appointment_group[publish]"]="1"),k["appointment_group[participant_visibility]"]=f.participant_visibility==="1"?"protected":"private",e&&(k["appointment_group[context_code]"]=f.context_code,f.use_group_signup==="1"&&f.group_category_id?k["appointment_group[sub_context_code]"]=f.group_category_id:f.section_id&&f.section_id!=="all"&&(k["appointment_group[sub_context_code]"]=f.section_id),k["appointment_group[min_appointments_per_participant]"]=1),j=a(function(){return this.closeCB(!0)},this),i=a(function(){},this),h=this.apptGroup.id?"PUT":"POST",g=b.ajaxJSON(this.form.attr("action"),h,k,j,i),this.form.disableWhileLoading(g)},g.prototype.contextChange=function(a){var c,d,e;c=b(a.target).val(),this.currentContextInfo=this.contextInfoForCode(c),this.apptGroup.contextInfo=this.currentContextInfo;if(this.currentContextInfo===null)return;this.currentContextInfo.course_sections&&(e={cssClass:"course_section",name:"section_id",collection:[{id:"all",name:"All Sections"}].concat(this.currentContextInfo.course_sections)},this.form.find(".section_select").html(f(e))),!this.currentContextInfo.group_categories||this.currentContextInfo.group_categories.length===0?this.form.find(".group-signup-checkbox").attr("disabled",!0).prop("checked",!1).change():this.currentContextInfo.group_categories&&(this.form.find(".group-signup-checkbox").attr("disabled",!1),d={cssClass:"group_category",name:"group_category_id",collection:this.currentContextInfo.group_categories},this.form.find(".group_select").html(f(d))),this.contextChangeCB(c);if(!this.apptGroup.id)return this.form.attr("action",this.currentContextInfo.create_appointment_group_url)},g}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditAppointmentGroupDialog",["jquery","i18n!calendar","compiled/calendar/EditAppointmentGroupDetails","jst/calendar/editAppointmentGroup","jquery.instructure_jquery_patches"],function(b,c,d,e){var f,g;return g=b('<div id="edit_event"><div class="wrapper"></div>').appendTo("body").dialog({autoOpen:!1,width:"auto",resizable:!1,title:c.t("titles.edit_appointment_group","Edit Appointment Group")}),f=function(){function b(b,c){this.apptGroup=b,this.parentCloseCB=c,this.show=a(this.show,this),this.closeCB=a(this.closeCB,this),this.contextChange=a(this.contextChange,this),this.currentContextInfo=null}return b.prototype.contextChange=function(a){},b.prototype.closeCB=function(a){return g.dialog("close"),this.parentCloseCB(a)},b.prototype.show=function(){var a;return this.appointmentGroupsForm=new d(g.find(".wrapper"),this.apptGroup,this.contextChange,this.closeCB),a=this.apptGroup.workflow_state==="active"?[{text:c.t("save_changes","Save Changes"),click:this.appointmentGroupsForm.saveClick}]:[{text:c.t("save_and_publish","Save & Publish"),"class":"ui-button-primary",click:this.appointmentGroupsForm.saveClick},{text:c.t("save","Save"),click:this.appointmentGroupsForm.saveWithoutPublishingClick}],g.dialog("option","buttons",a).dialog("open")},b}()})}.call(this),define("jst/calendar/editEvent",["compiled/handlebars_helpers","i18n!calendar.edit_event"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/editEvent"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<div class="content" id="edit_event_tabs">\n  <ul class="tab_list">\n    <li><a href="#edit_calendar_event_form_holder" class="edit_calendar_event_option">',g="Event",h="tabs.event",i={},j="calendar.editEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></li>\n    <li><a href="#edit_assignment_form_holder" class="edit_assignment_option">',g="Assignment",h="tabs.assignment",i={},j="calendar.editEvent",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+='</a></li>\n  </ul>\n  <div id="edit_calendar_event_form_holder" class="tab_holder"></div>\n  <div id="edit_assignment_form_holder" class="tab_holder"></div>\n</div>',f}),c["calendar/editEvent"]}),define("jst/calendar/appointmentGroupList",["compiled/handlebars_helpers","i18n!calendar.appointment_group_list"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/appointmentGroupList"]=b(function(a,b,c,d,e){function p(a,b){var d="",e,f,g,h;d+='\n  <button class="button single_item_done_button">Done, Go Back To List</button>\n  <h2 id="appointment-group-list-header">',e="My Appointment Groups",f="my_appointment_groups",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+='</h2>\n  <ul id="appointment-group-list">\n    ',e=c.appointment_groups||a.appointment_groups,f=c.each,i=j.program(2,q,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n  </ul>\n",d}function q(a,b){var d="",e,f;d+="\n      <li class='appointment-group-item admin-link-hover-area ",e=c.requiring_action||a.requiring_action,f=c["if"],i=j.program(3,r,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+=" ",e=c.published||a.published,f=c.unless,i=j.program(5,s,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="' data-appointment-group-id='",e=c.id||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=o(e)+"'>\n        ",e=c.is_manageable||a.is_manageable,f=c["if"],i=j.program(7,t,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="\n        ",e=c.requiring_action||a.requiring_action,f=c["if"],i=j.program(12,w,b),i.hash={},i.fn=i,i.inverse=j.program(14,x,b),e=f.call(a,e,i);if(e||e===0)d+=e;d+='\n\n        <h3><a class="view_calendar_link" href="#">',e=c.title||a.title,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"title",{hash:{}})),d+=o(e)+"</a></h3>\n        ",e=c.context||a.context,f=c["if"],i=j.program(18,A,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="\n        ",e=c.location_name||a.location_name,f=c["if"],i=j.program(20,B,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="\n        ",e=c.description||a.description,f=c["if"],i=j.program(22,C,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="\n        ",e=c.is_manageable||a.is_manageable,f=c["if"],i=j.program(24,D,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n      </li>\n    ",d}function r(a,b){return"requiring-action"}function s(a,b){return"unpublished-ag"}function t(a,b){var d="",e,f,g;d+='\n          <div class="admin-links">\n            <button class="al-trigger"><span class="al-trigger-inner">Manage</span></button>\n            <ul class="al-options">\n              <li><a class="edit_link" href="#"><span class="ui-icon ui-icon-pencil" />Edit</a></li>\n              <li><a class="message_link" href="#"><span class="ui-icon ui-icon-mail-closed" />',e="Group",f=c.participant_type||a.participant_type,g=c.ifEqual||a.ifEqual,i=j.program(8,u,b),i.hash={},i.fn=i,i.inverse=j.program(10,v,b),typeof g===k?e=g.call(a,f,e,i):e=n.call(a,g,f,e,i);if(e||e===0)d+=e;return d+='</a></li>\n              <li><a class="delete_link" href="#"><span class="ui-icon ui-icon-trash" />Delete</a></li>\n            </ul>\n          </div>\n        ',d}function u(a,b){var d,e,f,g;return d="Message Groups Who...",e="message_groups",f={},g="calendar.appointmentGroupList",f.scope=g,g=c.t||a.t,i={},i.hash=f,typeof g===k?d=g.call(a,e,d,i):g===m?d=l.call(a,"t",e,d,i):d=g,d||d===0?d:""}function v(a,b){var d,e,f,g;return d="Message Students Who...",e="message_students",f={},g="calendar.appointmentGroupList",f.scope=g,g=c.t||a.t,i={},i.hash=f,typeof g===k?d=g.call(a,e,d,i):g===m?d=l.call(a,"t",e,d,i):d=g,d||d===0?d:""}function w(a,b){return'\n          <div class="alert-message block-message warning">\n            <p>\n              You can <a class="view_calendar_link" href="#">sign up</a> for this.\n            </p>\n          </div>\n        '}function x(a,b){var d="",e,f;d+="\n          ",e=c.signed_up_times||a.signed_up_times,f=c["if"],i=j.program(15,y,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n        ",d}function y(a,b){var d="",e,f;d+='\n            <div class="alert-message block-message success">\n              <p>You\'re signed up for</p>\n              ',e=c.signed_up_times||a.signed_up_times,f=c.each,i=j.program(16,z,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n            </div>\n          ",d}function z(a,b){var d="",e;d+='\n                <p><strong><a href="#" class="show_event_link" data-event-id="',e=c.id||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=o(e)+'">',e=c.formatted_time||a.formatted_time,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"formatted_time",{hash:{}}));if(e||e===0)d+=e;return d+="</a></strong></p>\n              ",d}function A(a,b){var d="",e;return d+="\n          <div class='ag-context'><a href=\"",e=c.context||a.context,e=e===null||e===undefined||e===!1?e:e.url,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"context.url",{hash:{}})),d+=o(e)+'">',e=c.context||a.context,e=e===null||e===undefined||e===!1?e:e.name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"context.name",{hash:{}})),d+=o(e)+"</a></div>\n        ",d}function B(a,b){var d="",e,f,g,h;d+='\n          <div class="ag-location">\n            <strong>',e="Location:",f="location",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="</strong>\n            <span>",e=c.location_name||a.location_name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"location_name",{hash:{}})),d+=o(e)+"</span>\n          </div>\n        ",d}function C(a,b){var d="",e,f;return d+='\n          <p class="ag-description">',e=c.description||a.description,f=c.newlinesToBreak||a.newlinesToBreak,typeof f===k?e=f.call(a,e,{hash:{}}):f===m?e=l.call(a,"newlinesToBreak",e,{hash:{}}):e=f,d+=o(e)+"</p>\n        ",d}function D(a,b){var d="",e,f,g;d+='\n          <div class="ag-x-of-x-signed-up">\n            ',e="Group",f=c.participant_type||a.participant_type,g=c.ifEqual||a.ifEqual,i=j.program(25,E,b),i.hash={},i.fn=i,i.inverse=j.program(27,F,b),typeof g===k?e=g.call(a,f,e,i):e=n.call(a,g,f,e,i);if(e||e===0)d+=e;d+="\n            ",e=c.published||a.published,f=c.unless,i=j.program(29,G,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n          </div>\n        ",d}function E(a,b){var d="",e,f,g,h;d+="\n              ",e="%{signed_up} groups have signed up",f="x_groups_have_signed_up",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="\n            ",d}function F(a,b){var d="",e,f,g,h;d+="\n              ",e="%{signed_up} people have signed up",f="x_people_have_signed_up",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="\n            ",d}function G(a,b){return"(unpublished)"}function H(a,b){var d="",e,f;d+="\n  ",e=c.canManageAGroup||a.canManageAGroup,f=c["if"],i=j.program(32,I,b),i.hash={},i.fn=i,i.inverse=j.program(34,J,b),e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n",d}function I(a,b){var d="",e,f,g,h;d+="\n    <h2>\n      ",e="You have not created any appointment groups, and there are none you can sign up for",f="scheduler_explanation_teacher_header",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+="\n    </h2>\n    <p>\n      ",e="This is the Scheduler Tool. You can use it to create appointment groups for your students to sign up for.",f="scheduler_explanation_teacher_paragraph_1",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+="\n    </p>\n    <p>\n      ",e="For example, lets say you want to go over the midterm paper assignment with each of the students in your course. You would create a new appointment group, specify the dates and times that you're available, tell it to split that time into 15 minute blocks and only allow one student per time-block.",f="scheduler_explanation_teacher_paragraph_2",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+="\n    </p>\n    <p>\n      ",e="Then students would get notified and see that they need to sign up for one of the specified time blocks. They will be shown a calendar with the available time blocks overlaid on top of everything on their other calendars so they can pick a time that works for them.",f="scheduler_explanation_teacher_paragraph_3",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+="\n    </p>\n    <p>\n      ",e='* Get started now by clicking the "Create an appointment group" button to the right *',f="scheduler_explanation_teacher_paragraph_4",g={},h="calendar.appointmentGroupList",g.scope=h,h="<strong>$1</strong>",g.w0=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="\n    </p>\n  ",d}function J(a,b){var d="",e,f,g,h;d+="\n    <h2>\n      ",e="You do not have any appointment groups to sign up for",f="scheduler_explanation_student_header",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+="\n    </h2>\n    <p>\n      ",e='Teachers can use this scheduler tool to schedule things for their students to sign up for. Things like: "office hours", "group presentation time-slots" or "lunch with an alumnus".',f="scheduler_explanation_student_paragraph_1",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+="\n    </p>\n    <p>\n      ",e="None of your teachers have made any appointments you can sign up for so there is not anything for you do to now. You will be notified if anyone does create something so you can come sign up for it.",f="scheduler_explanation_student_paragraph_2",g={},h="calendar.appointmentGroupList",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="\n    </p>\n  ",d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=c.blockHelperMissing,o=this.escapeExpression;g=c.appointment_groups||b.appointment_groups,h=c["if"],i=j.program(1,p,e),i.hash={},i.fn=i,i.inverse=j.program(31,H,e),g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n",f}),c["calendar/appointmentGroupList"]}),define("jst/calendar/schedulerRightSideAdminSection",["compiled/handlebars_helpers","i18n!calendar.scheduler_right_side_admin_section"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/schedulerRightSideAdminSection"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<div class="rs-section">\n  <p>The scheduler tool lets you set up time slots that students (or student groups) can sign up for. To get started, click the button below.</p>\n  <button class="create_link button">',g="Create an appointment group",h="create_a_new_set_of_appointments",i={},j="calendar.schedulerRightSideAdminSection",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n</div>\n",f}),c["calendar/schedulerRightSideAdminSection"]}),define("jst/calendar/messageParticipants",["compiled/handlebars_helpers","i18n!calendar.message_participants"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/messageParticipants"]=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+="\n  ",e="Message Groups",f="message_groups",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n",d}function r(a,b){var d="",e,f,g,h;d+="\n  ",e="Message Students",f="message_students",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n",d}function s(a,b){var d="",e,f,g,h;d+='\n      <option value="all">',e="All groups",f="all_groups",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="unregistered">',e="Groups who haven't signed up yet",f="unregistered_groups",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="registered">',e="Groups who have already signed up",f="registered_groups",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</option>\n      ",d}function t(a,b){var d="",e,f,g,h;d+='\n      <option value="all">',e="All users",f="all_users",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="unregistered">',e="Users who haven't signed up yet",f="unregistered_users",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='</option>\n      <option value="registered">',e="Users who have already signed up",f="registered_users",g={},h="calendar.messageParticipants",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</option>\n      ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=c.blockHelperMissing;f+='<form title="',g="Group",h=c.participant_type||b.participant_type,i=c.ifEqual||b.ifEqual,k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.program(3,r,e),typeof i===m?g=i.call(b,h,g,k):g=p.call(b,i,h,g,k);if(g||g===0)f+=g;f+="\" action='#' id='message_participants_form'>\n  <h2>",g="Send a message to...",h="send_message_to",i={},j="calendar.messageParticipants",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</h2>\n  <div>\n    <select class="message_groups">\n      ',g="Group",h=c.participant_type||b.participant_type,i=c.ifEqual||b.ifEqual,k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.program(7,t,e),typeof i===m?g=i.call(b,h,g,k):g=p.call(b,i,h,g,k);if(g||g===0)f+=g;f+='\n    </select>\n  </div>\n  <ul class="participant_list"></ul>\n  <div class="clear"></div>\n  <div>\n    <label for="body">',g="Message:",h="message_label",i={},j="calendar.messageParticipants",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+='</label><br />\n    <textarea id="body" name="body"></textarea>\n  </div>\n  <div class="error"></div>\n</form>\n',f}),c["calendar/messageParticipants"]}),define("jst/calendar/recipientList",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/recipientList"]=b(function(a,b,c,d,e){function q(a,b){var d="",e,f;d+="\n  ",e=c.recipients||a.recipients,f=c.each,j=k.program(2,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function r(a,b){var d="",e;return d+="\n    <li>\n      <span>",e=c.name||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+'</span>\n      <input name="recipients[]" type="hidden" value="group_',e=c.id||a.id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"id",{hash:{}})),d+=o(e)+'" />\n    </li>\n  ',d}function s(a,b){var d="",e,f;d+="\n  ",e=c.recipients||a.recipients,f=c.each,j=k.program(5,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function t(a,b){var d="",e;return d+="\n    <li>\n      <span>",e=c.name||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+'</span>\n      <input name="recipients[]" type="hidden" value="',e=c.id||a.id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"id",{hash:{}})),d+=o(e)+'" />\n    </li>\n  ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression,p=c.blockHelperMissing;g="Group",h=c.recipientType||b.recipientType,i=c.ifEqual||b.ifEqual,j=k.program(1,q,e),j.hash={},j.fn=j,j.inverse=k.program(4,s,e),typeof i===l?g=i.call(b,h,g,j):g=p.call(b,i,h,g,j);if(g||g===0)f+=g;return f+="\n",f}),c["calendar/recipientList"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/MessageParticipantsDialog",["i18n!calendar","jst/calendar/messageParticipants","jst/calendar/recipientList"],function(b,c,d){var e;return e=function(){function e(b,d){this.group=b,this.dataSource=d,this.messageFailed=a(this.messageFailed,this),this.messageSent=a(this.messageSent,this),this.sendMessage=a(this.sendMessage,this),this.loadParticipants=a(this.loadParticipants,this),this.$form=$(c(this.group)).submit(this.sendMessage),this.$select=this.$form.find("select.message_groups").change(this.loadParticipants).val("unregistered"),this.$participantList=this.$form.find("ul")}return e.prototype.show=function(){return this.$form.dialog({width:400,resizable:!1,buttons:[{text:b.t("buttons.send_message","Send"),"data-text-while-loading":b.t("buttons.sending_message","Sending..."),click:function(){return $(this).submit()}},{text:b.t("buttons.cancel","Cancel"),click:function(){return $(this).dialog("close")}}],close:function(){return $(this).remove()}}),this.loadParticipants()},e.prototype.participantStatus=function(a){var b;return a==null&&(a=null),b=$('<li class="status" />'),this.$participantList.html(b),a?b.text(a):b.spin()},e.prototype.loadParticipants=function(){var c;return c=this.$select.val(),this.loading=!0,this.participantStatus(),this.dataSource.getParticipants(this.group,c,a(function(a){var c;return delete this.loading,a.length?this.$participantList.html(d({recipientType:this.group.participant_type,recipients:a})):(c=this.group.participant_type==="Group"?b.t("no_groups","No groups found"):b.t("no_users","No users found"),this.participantStatus(c))},this))},e.prototype.sendMessage=function(a){var b,c;a.preventDefault();if(this.loading)return;b=this.$form.getFormData();if(!b["recipients[]"]||!b.body)return;return c=$.ajaxJSON("/conversations","POST",b,this.messageSent,this.messageFailed),this.$form.disableWhileLoading(c,{buttons:["[data-text-while-loading] .ui-button-text"]})},e.prototype.messageSent=function(a){return this.$form.dialog("close"),$.flashMessage(b.t("messages_sent","Messages Sent"))},e.prototype.messageFailed=function(a){return this.$form.find(".error").text(b.t("errors.send_message_failed","There was an error sending your message, please try again"))},e}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/Scheduler",["jquery","i18n!calendar","jst/calendar/appointmentGroupList","jst/calendar/schedulerRightSideAdminSection","compiled/calendar/EditAppointmentGroupDialog","compiled/calendar/MessageParticipantsDialog","jst/calendar/deleteItem","jquery.instructure_date_and_time","jquery.instructure_jquery_patches","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","vendor/jquery.spin"],function(b,c,d,e,f,g,h){var i;return i=function(){function i(c,d){this.calendar=d,this.messageLinkClick=a(this.messageLinkClick,this),this.deleteLinkClick=a(this.deleteLinkClick,this),this.editLinkClick=a(this.editLinkClick,this),this.showList=a(this.showList,this),this.doneClick=a(this.doneClick,this),this.viewCalendarForGroup=a(this.viewCalendarForGroup,this),this.viewCalendarForGroupId=a(this.viewCalendarForGroupId,this),this.viewCalendarForElement=a(this.viewCalendarForElement,this),this.showEventLinkClick=a(this.showEventLinkClick,this),this.viewCalendarLinkClick=a(this.viewCalendarLinkClick,this),this.redraw=a(this.redraw,this),this.loadData=a(this.loadData,this),this.canManageAGroup=a(this.canManageAGroup,this),this.hide=a(this.hide,this),this.show=a(this.show,this),this.eventDeleted=a(this.eventDeleted,this),this.eventSaved=a(this.eventSaved,this),this.dialogCloseCB=a(this.dialogCloseCB,this),this.createClick=a(this.createClick,this),this.div=b(c),this.contexts=this.calendar.contexts,this.listDiv=this.div.find(".appointment-list"),this.div.delegate(".single_item_done_button","click",this.doneClick),this.div.delegate(".view_calendar_link","click",this.viewCalendarLinkClick),this.listDiv.delegate(".edit_link","click",this.editLinkClick),this.listDiv.delegate(".message_link","click",this.messageLinkClick),this.listDiv.delegate(".delete_link","click",this.deleteLinkClick),this.listDiv.delegate(".show_event_link","click",this.showEventLinkClick),this.canManageAGroup()&&(this.div.addClass("can-manage"),this.rightSideAdminSection=b(e()),this.rightSideAdminSection.find(".create_link").click(this.createClick)),b.subscribe("CommonEvent/eventSaved",this.eventSaved),b.subscribe("CommonEvent/eventDeleted",this.eventDeleted)}return i.prototype.createClick=function(a){var b;return a.preventDefault(),b={contexts:this.calendar.contexts},this.createDialog=new f(b,this.dialogCloseCB),this.createDialog.show()},i.prototype.dialogCloseCB=function(a){if(a)return this.calendar.dataSource.clearCache(),this.loadData()},i.prototype.eventSaved=function(a){if(this.active)return this.calendar.dataSource.clearCache(),this.loadData()},i.prototype.eventDeleted=function(a){if(this.active)return this.calendar.dataSource.clearCache(),this.loadData()},i.prototype.toggleListMode=function(a){var c;return a?(delete this.viewingGroup,this.calendar.updateFragment({appointment_group_id:null}),this.showList(),this.canManageAGroup()?(b("#right-side .rs-section").hide(),this.rightSideAdminSection.appendTo("#right-side")):b("#right-side-wrapper").hide()):(b("#right-side-wrapper").show(),b("#right-side .rs-section").not("#undated-events, #calendar-feed").show(),(c=this.rightSideAdminSection)!=null?c.detach():void 0)},i.prototype.show=function(){return b("#undated-events, #calendar-feed").hide(),this.active=!0,this.div.show(),this.loadData(),this.toggleListMode(!0),b.publish("Calendar/saveVisibleContextListAndClear")},i.prototype.hide=function(){return b("#undated-events, #calendar-feed").show(),this.active=!1,this.div.hide(),this.toggleListMode(!1),this.calendar.displayAppointmentEvents=null,b.publish("Calendar/restoreVisibleContextList")},i.prototype.canManageAGroup=function(){var a,b,c,d;d=this.contexts;for(b=0,c=d.length;b<c;b++){a=d[b];if(a.can_create_appointment_groups)return!0}return!1},i.prototype.loadData=function(){var c;if(!this.loadingDeferred||this.loadingDeferred&&!this.loadingDeferred.isResolved())this.loadingDeferred=new b.Deferred;return this.groups={},(c=this.loadingDiv)==null&&(this.loadingDiv=b('<div id="scheduler-loading" />').appendTo(this.div).spin()),this.calendar.dataSource.getAppointmentGroups(this.canManageAGroup(),a(function(a){var b,c,d;for(c=0,d=a.length;c<d;c++)b=a[c],this.groups[b.id]=b;return this.redraw(),this.loadingDeferred.resolve()},this))},i.prototype.redraw=function(){var a,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;this.loadingDiv.hide();if(this.groups){g=[],r=this.groups;for(i in r){f=r[i],f.signed_up_times=null;if(f.appointmentEvents){s=f.appointmentEvents;for(j=0,n=s.length;j<n;j++){a=s[j];if(a.object.reserved){t=a.childEvents;for(k=0,o=t.length;k<o;k++)c=t[k],c.object.own_reservation&&((u=f.signed_up_times)==null&&(f.signed_up_times=[]),f.signed_up_times.push({id:c.id,formatted_time:c.displayTimeString()}))}}}f.signed_up=0;if(f.appointmentEvents){v=f.appointmentEvents;for(l=0,p=v.length;l<p;l++)a=v[l],a.childEvents&&(f.signed_up+=a.childEvents.length)}w=this.contexts;for(m=0,q=w.length;m<q;m++)e=w[m],e.asset_string===f.context_code&&(f.context=e);f.published=f.workflow_state==="active",g.push(f)}h=d({appointment_groups:g,canManageAGroup:this.canManageAGroup()}),this.listDiv.find(".list-wrapper").html(h),this.viewingGroup&&(this.viewingGroup=this.groups[this.viewingGroup.id],this.viewingGroup?(this.listDiv.find(".appointment-group-item[data-appointment-group-id='"+this.viewingGroup.id+"']").addClass("active"),this.calendar.displayAppointmentEvents=this.viewingGroup):this.toggleListMode(!0))}return b.publish("Calendar/refetchEvents")},i.prototype.viewCalendarLinkClick=function(a){return a.preventDefault(),this.viewCalendarForElement(b(a.target))},i.prototype.showEventLinkClick=function(a){var c,d,e,f,g,h,i,j,k,l;a.preventDefault(),f=this.viewCalendarForElement(b(a.target)),e=b(a.target).data("event-id");if(e){k=f.object.appointmentEvents;for(g=0,i=k.length;g<i;g++){c=k[g],l=c.object.childEvents;for(h=0,j=l.length;h<j;h++){d=l[h];if(d.id===e){this.calendar.gotoDate(d.start);return}}}}},i.prototype.viewCalendarForElement=function(a){var b,c,d,e,f;return d=a.closest(".appointment-group-item"),c=d.data("appointment-group-id"),d.addClass("active"),b=(e=this.groups)!=null?e[c]:void 0,this.viewCalendarForGroup((f=this.groups)!=null?f[c]:void 0),b},i.prototype.viewCalendarForGroupId=function(b){return this.loadData(),this.loadingDeferred.done(a(function(){var a;return this.viewCalendarForGroup((a=this.groups)!=null?a[b]:void 0)},this))},i.prototype.viewCalendarForGroup=function(c){return this.calendar.updateFragment({appointment_group_id:c.id}),this.toggleListMode(!1),this.viewingGroup=c,this.loadingDeferred.done(a(function(){return this.div.addClass("showing-single"),this.calendar.calendar.show(),this.calendar.calendar.fullCalendar("changeView","agendaWeek"),this.viewingGroup.start_at?this.calendar.gotoDate(b.parseFromISO(this.viewingGroup.start_at).time):this.calendar.gotoDate(new Date),this.calendar.displayAppointmentEvents=this.viewingGroup,b.publish("Calendar/refetchEvents")},this))},i.prototype.doneClick=function(a){return a.preventDefault(),this.toggleListMode(!0)},i.prototype.showList=function(){return this.div.removeClass("showing-single"),this.listDiv.find(".appointment-group-item").removeClass("active"),this.calendar.calendar.hide(),this.calendar.displayAppointmentEvents=null},i.prototype.editLinkClick=function(a){var c,d;a.preventDefault(),c=(d=this.groups)!=null?d[b(a.target).closest(".appointment-group-item").data("appointment-group-id")]:void 0;if(!c)return;return c.contexts=this.calendar.contexts,this.createDialog=new f(c,this.dialogCloseCB),this.createDialog.show()},i.prototype.deleteLinkClick=function(d){var e,f;d.preventDefault(),e=(f=this.groups)!=null?f[b(d.target).closest(".appointment-group-item").data("appointment-group-id")]:void 0;if(!e)return;return b("<div />").confirmDelete({url:e.url,message:b(h({message:c.t("confirm_appointment_group_deletion","Are you sure you want to delete this appointment group?"),details:c.t("appointment_group_deletion_details","Deleting it will also delete any appointments that have been signed up for by students.")})),dialog:{title:c.t("confirm_deletion","Confirm Deletion")},prepareData:a(function(a){return{cancel_reason:a.find("#cancel_reason").val()}},this),confirmed:a(function(){return b(d.target).closest(".appointment-group-item").addClass("event_pending")},this),success:a(function(){return this.calendar.dataSource.clearCache(),this.loadData()},this)})},i.prototype.messageLinkClick=function(a){var c,d;return a.preventDefault(),c=(d=this.groups)!=null?d[b(a.target).closest(".appointment-group-item").data("appointment-group-id")]:void 0,this.messageDialog=new g(c,this.calendar.dataSource),this.messageDialog.show()},i}()})}.call(this),define("jst/calendar/contextList",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/contextList"]=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+='\n    <li data-context="',e=c.asset_string||a.asset_string,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"asset_string",{hash:{}})),d+=n(e)+'" class="context_list_context">\n      <span class="checkbox group_',e=c.asset_string||a.asset_string,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"asset_string",{hash:{}})),d+=n(e)+'"></span>\n      ',e=c.name||a.name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"name",{hash:{}})),d+=n(e)+"\n      ",e=c.can_create_stuff||a.can_create_stuff,f=c["if"],i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n    </li>\n  ",d}function p(a,b){var d="",e,f;d+='\n        <button class="settings"></button>\n        <ul class="actions ui-menu-small">\n          ',e=c.can_create_calendar_events||a.can_create_calendar_events,f=c["if"],i=j.program(3,q,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="\n          ",e=c.can_create_assignments||a.can_create_assignments,f=c["if"],i=j.program(5,r,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n        </ul>\n      ",d}function q(a,b){return'\n            <li><a href="#" data-action="add_event">Add Event</a></li>\n          '}function r(a,b){return'\n            <li><a href="#" data-action="add_assignment">Add Assignment</a></li>\n          '}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;f+='<ul id="context-list">\n  ',g=c.contexts||b.contexts,h=c.each,i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n</ul>\n",f}),c["calendar/contextList"]}),define("jst/calendar/undatedEvents",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["calendar/undatedEvents"]=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+="\n  <b>Undated Events</b>\n  <ul>\n    ",e=c.events||a.events,f=c.each,i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n  </ul>\n",d}function p(a,b){var d="",e;return d+='\n      <li class="undated_event event group_',e=c.contextCode||a.contextCode,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"contextCode",{hash:{}})),d+=n(e)+" ",e=c.id||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=n(e)+'" data-event-id="',e=c.id||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=n(e)+'">\n        ',e=c.title||a.title,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"title",{hash:{}})),d+=n(e)+"\n      </li>\n    ",d}function q(a,b){return'\n  <div class="spin_holder"></div>\n  <a href="#" data-text-while-loading="Loading undated events..." class="undated-events-link">Show undated events</a>\n'}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;g=c.events||b.events,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.program(4,q,e),g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n",f}),c["calendar/undatedEvents"]}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/calendar/CommonEvent.Assignment",["i18n!calendar","compiled/calendar/CommonEvent","jquery.instructure_date_and_time","jquery.instructure_misc_helpers"],function(b,d){var e,f;return f=b.t("prompts.delete_assignment","Are you sure you want to delete this assignment?"),e=function(){function b(c,d){this.saveDates=a(this.saveDates,this),this.copyDataFromObject=a(this.copyDataFromObject,this),b.__super__.constructor.apply(this,arguments),this.eventType="assignment",this.deleteConfirmation=f,this.deleteURL=d.assignment_url,this.addClass("assignment"),this.copyDataFromObject(c)}return c(b,d),b.prototype.copyDataFromObject=function(a){return a.assignment&&(a=a.assignment),this.object=this.assignment=a,this.id="assignment_"+a.id,this.title=a.title||a.name||"Untitled",this.addClass("group_"+this.contextCode()),this.start=a.due_at?$.parseFromISO(a.due_at,"due_date").time:null,this.isDueAtMidnight()&&(this.midnightFudged=!0,this.start.setMinutes(30)),this.description=a.description},b.prototype.fullDetailsURL=function(){return $.replaceTags(this.contextInfo.assignment_url,"id",this.assignment.id)},b.prototype.startDate=function(){return this.assignment.due_at?$.parseFromISO(this.assignment.due_at,"due_date").time:null},b.prototype.displayTimeString=function(){var a,b;return this.assignment.due_at?(a=$.parseFromISO(this.assignment.due_at,"due_date"),b=""+$.dateString(a.date)+" at "+a.time_string,"Due: <time datetime='"+a.time.toISOString()+"'>"+b+"</time>"):"No Date"},b.prototype.saveDates=function(a,b){return this.save({"assignment[due_at]":$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.start))},a,b)},b.prototype.methodAndURLForSave=function(){var a,b;return this.isNewEvent()?(a="POST",b=this.contextInfo.create_assignment_url):(a="PUT",b=$.replaceTags(this.contextInfo.assignment_url,"id",this.assignment.id)),[a,b]},b.prototype.isDueAtMidnight=function(){return this.midnightFudged||this.start&&this.start.getHours()===23&&this.start.getMinutes()===59},b}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define("compiled/calendar/CommonEvent.CalendarEvent",["i18n!calendar","compiled/util/semanticDateRange","compiled/calendar/CommonEvent","jquery.instructure_date_and_time","jquery.instructure_misc_helpers"],function(b,d,e){var f,g;return g=b.t("prompts.delete_event","Are you sure you want to delete this event?"),f=function(){function b(c,d,e){this.saveDates=a(this.saveDates,this),this.copyDataFromObject=a(this.copyDataFromObject,this),b.__super__.constructor.call(this,c,d,e),this.eventType="calendar_event",this.deleteConfirmation=g,this.deleteURL=d.calendar_event_url,this.copyDataFromObject(c)}return c(b,e),b.prototype.copyDataFromObject=function(a){return a.calendar_event&&(a=a.calendar_event),this.object=this.calendarEvent=a,this.id="calendar_event_"+a.id,this.title=a.title||"Untitled",this.start=a.start_at?$.parseFromISO(a.start_at).time:null,this.end=a.end_at?$.parseFromISO(a.end_at).time:null,this.allDay=a.all_day,this.editable=!0,this.lockedTitle=this.object.parent_event_id!=null,this.addClass("group_"+this.contextCode()),this.isAppointmentGroupEvent()&&(this.addClass("scheduler-event"),this.object.reserved&&this.addClass("scheduler-reserved"),this.object.available_slots===0&&this.addClass("scheduler-full"),(this.object.available_slots===void 0||this.object.available_slots>0)&&this.addClass("scheduler-available"),this.editable=!1),this.description=a.description},b.prototype.startDate=function(){return this.calendarEvent.start_at?$.parseFromISO(this.calendarEvent.start_at).time:null},b.prototype.endDate=function(){return this.calendarEvent.end_at?$.parseFromISO(this.calendarEvent.end_at).time:null},b.prototype.fullDetailsURL=function(){var a;return this.isAppointmentGroupEvent()?null:$.replaceTags(this.contextInfo.calendar_event_url,"id",(a=this.calendarEvent.parent_event_id)!=null?a:this.calendarEvent.id)},b.prototype.displayTimeString=function(){return d(this.calendarEvent.start_at,this.calendarEvent.end_at)},b.prototype.saveDates=function(a,b){return this.save({"calendar_event[start_at]":this.start?$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.start)):"","calendar_event[end_at]":this.end?$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.end)):""},a,b)},b.prototype.methodAndURLForSave=function(){var a,b;return this.isNewEvent()?(a="POST",b="/api/v1/calendar_events"):(a="PUT",b=this.calendarEvent.url),[a,b]},b}()})}.call(this),function(){define("compiled/calendar/commonEventFactory",["jquery","compiled/calendar/CommonEvent","compiled/calendar/CommonEvent.Assignment","compiled/calendar/CommonEvent.CalendarEvent","compiled/str/splitAssetString"],function(a,b,c,d,e){return function(a,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(a===null)return n=new b,n.allPossibleContexts=f,n;g=a.context_code,j=a.effective_context_code||g,p=null,a.assignment||a.assignment_group_id?p="assignment":p="calendar_event",a=a.assignment||a.calendar_event||a;if(a.hidden)return null;g==null&&(g=a.context_code),j==null&&(j=a.effective_context_code||a.context_code),k=null;for(q=0,r=f.length;q<r;q++){i=f[q];if(i.asset_string===j){k=i;break}}return k===null?null:(g!==j&&(o=e(g)),h=o&&(m=k[o[0]])?function(){var a,b,c;c=[];for(a=0,b=m.length;a<b;a++)l=m[a],l.id===o[1]&&c.push(l);return c}()[0]:void 0,p==="assignment"?n=new c(a,k):n=new d(a,k,h),n.can_edit=!1,n.can_delete=!1,k.can_create_calendar_events&&(n.can_edit=!0,n.can_delete=!0),n.object.workflow_state==="locked"&&(n.can_edit=!1),n.object.appointment_group_id&&k.can_create_calendar_events&&(n.can_edit=!0),n)}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EventDataSource",["jquery","compiled/calendar/commonEventFactory","jquery.ajaxJSON","vendor/jquery.ba-tinypubsub"],function(b,c){return function(){function d(c){this.fetchNextBatch=a(this.fetchNextBatch,this),this.startFetch=a(this.startFetch,this),this.getParticipants=a(this.getParticipants,this),this.getEvents=a(this.getEvents,this),this.getEventsForAppointmentGroup=a(this.getEventsForAppointmentGroup,this),this.processAppointmentData=a(this.processAppointmentData,this),this.getAppointmentGroups=a(this.getAppointmentGroups,this),this.getAppointmentGroupsFromCache=a(this.getAppointmentGroupsFromCache,this),this.getEventsFromCache=a(this.getEventsFromCache,this),this.processNextRequest=a(this.processNextRequest,this),this.getEventsFromCacheForContext=a(this.getEventsFromCacheForContext,this),this.addEventToCache=a(this.addEventToCache,this),this.needUndatedEventsForContexts=a(this.needUndatedEventsForContexts,this),this.requiredDateRangeForContexts=a(this.requiredDateRangeForContexts,this),this.requiredDateRangeForContext=a(this.requiredDateRangeForContext,this),this.clearCache=a(this.clearCache,this),this.eventWithId=a(this.eventWithId,this),this.eventDeleted=a(this.eventDeleted,this),this.eventSaved=a(this.eventSaved,this),this.contexts=c,this.clearCache(),this.inFlightRequest=!1,this.pendingRequests=[],b.subscribe("CommonEvent/eventDeleted",this.eventDeleted),b.subscribe("CommonEvent/eventSaved",this.eventSaved)}return d.prototype.eventSaved=function(a){return this.addEventToCache(a)},d.prototype.eventDeleted=function(a){var b,c;b=(c=this.cache.contexts[a.contextCode()])!=null?c.events:void 0;if(b)return delete b[a.id]},d.prototype.eventWithId=function(a){var b,c,d;d=this.cache.contexts;for(b in d){c=d[b];if(c.events[a])return c.events[a]}return null},d.prototype.clearCache=function(){var a,b,c,d,e;this.cache={contexts:{},appointmentGroups:{},participants:{},fetchedAppointmentGroups:null},d=this.contexts,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.cache.contexts[a.asset_string]={events:{},fetchedRanges:[],fetchedUndated:!1});return e},d.prototype.requiredDateRangeForContext=function(a,b,c){var d,e,f,g,h;if(!(d=this.cache.contexts[c]))return[a,b];if(!(f=d.fetchedRanges))return[a,b];for(g=0,h=f.length;g<h;g++)e=f[g],e[0]<=a&&a<=e[1]&&(a=e[1]),e[0]<=b&&b<=e[1]&&(b=e[0]);return[a,b]},d.prototype.requiredDateRangeForContexts=function(a,b,c){var d,e,f,g,h,i,j,k;f=b,g=a;for(i=0,j=c.length;i<j;i++)d=c[i],k=this.requiredDateRangeForContext(a,b,d),h=k[0],e=k[1],h<f&&(f=h),e>g&&(g=e);return[f,g]},d.prototype.needUndatedEventsForContexts=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++){b=a[c];if(!this.cache.contexts[b].fetchedUndated)return!0}return!1},d.prototype.addEventToCache=function(a){var b,c;return b=a.contextCode(),c=this.cache.contexts[b],c.events[a.id]=a},d.prototype.getEventsFromCacheForContext=function(a,b,c){var d,e,f,g,h;d=this.cache.contexts[c],f=[],h=d.events;for(g in h)e=h[g],(!e.start&&!a||e.start>=a&&e.start<=b)&&f.push(e);return f},d.prototype.processNextRequest=function(){var a,b,c;c=this.pendingRequests.shift();if(c)return b=c[0],a=c[1],b.apply(null,a)},d.prototype.getEventsFromCache=function(a,b,c){var d,e,f,g;e=[];for(f=0,g=c.length;f<g;f++)d=c[f],e=e.concat(this.getEventsFromCacheForContext(a,b,d));return e},d.prototype.getAppointmentGroupsFromCache=function(){var a,b,c,d;c=this.cache.appointmentGroups,d=[];for(b in c)a=c[b],d.push(a);return d},d.prototype.getAppointmentGroups=function(b,c){var d,e,f;if(this.inFlightRequest){this.pendingRequests.push([this.getAppointmentGroups,arguments]);return}if(this.cache.fetchedAppointmentGroups&&this.cache.fetchedAppointmentGroups.manageable===b){c(this.getAppointmentGroupsFromCache()),this.processNextRequest();return}return this.cache.fetchedAppointmentGroups={manageable:b},this.cache.appointmentGroups={},d=a(function(a,b,c){var d,e,f,g;if(a){g=[];for(e=0,f=a.length;e<f;e++)d=a[e],c.scope==="manageable"?d.is_manageable=!0:d.is_scheduleable=!0,g.push(this.processAppointmentData(d));return g}},this),e=a(function(){return c(this.getAppointmentGroupsFromCache())},this),f=[["/api/v1/appointment_groups",{include:["appointments","child_events"]}]],b&&f.push(["/api/v1/appointment_groups",{scope:"manageable",include:["appointments","child_events"]}]),this.startFetch(f,d,e)},d.prototype.processAppointmentData=function(a){var b,d,e,f,g,h,i,j,k;g=a.id,this.cache.appointmentGroups[g]=a;if(a.appointments){a.appointmentEvents=[],j=a.appointments,k=[];for(h=0,i=j.length;h<i;h++)f=j[h],e=c(f,this.contexts),k.push(function(){var g,h,i,j;if(e&&e.object.workflow_state!=="deleted"){a.appointmentEvents.push(e),this.addEventToCache(e);if(f.child_events){e.childEvents=[],i=f.child_events,j=[];for(g=0,h=i.length;g<h;g++)d=i[g],b=c(d,this.contexts),this.addEventToCache(e),j.push(e.childEvents.push(b));return j}}}.call(this));return k}},d.prototype.getEventsForAppointmentGroup=function(b,c){var d,e;if(this.inFlightRequest){this.pendingRequests.push([this.getEventsForAppointmentGroup,arguments]);return}if(b.appointmentEvents){c(b.appointmentEvents),this.processNextRequest();return}return d=a(function(a){if(a)return this.processAppointmentData(a)},this),e={include:["appointments","child_events"]},this.startFetch([[b.url,e]],d,a(function(){return c(b.appointmentEvents)},this))},d.prototype.getEvents=function(d,e,f,g){var h,i,j,k,l,m,n,o,p;if(this.inFlightRequest){this.pendingRequests.push([this.getEvents,arguments]);return}m=a(function(a,c,d){var e,f,g;return g=this.requiredDateRangeForContexts(a,c,d),f=g[0],e=g[1],f<e?{context_codes:d,start_date:b.dateToISO8601UTC(f),end_date:b.dateToISO8601UTC(e)}:null},this),n=a(function(a){return this.needUndatedEventsForContexts(a)?{context_codes:a,undated:"1"}:null},this),l=d?m(d,e,f):n(f);if(!l){g(this.getEventsFromCache(d,e,f)),this.processNextRequest();return}for(o=0,p=f.length;o<p;o++)h=f[o],i=this.cache.contexts[h],i&&(d?i.fetchedRanges.push([d,e]):i.fetchedUndated=!0);return k=a(function(){return g(this.getEventsFromCache(d,e,f))},this),j=a(function(a){var b,d,e,f,g;if(a){g=[];for(e=0,f=a.length;e<f;e++)b=a[e],d=c(b,this.contexts),g.push(d&&d.object.workflow_state!=="deleted"?this.addEventToCache(d):void 0);return g}},this),this.startFetch([["/api/v1/calendar_events",l],["/api/v1/calendar_events",b.extend({type:"assignment"},l)]],j,k)},d.prototype.getParticipants=function(b,c,d){var e,f,g,h;if(this.inFlightRequest){this.pendingRequests.push([this.getParticipants,arguments]);return}g=""+b.id+"_"+c;if(this.cache.participants[g]){d(this.cache.participants[g]),this.processNextRequest();return}return this.cache.participants[g]=[],e=a(function(a,b,c){if(a)return this.cache.participants[g].push.apply(this.cache.participants[g],a)},this),f=a(function(){return d(this.cache.participants[g])},this),h=b.participant_type==="Group"?"groups":"users",this.startFetch([["/api/v1/appointment_groups/"+b.id+"/"+h,{registration_status:c}]],e,f)},d.prototype.startFetch=function(b,c,d){var e,f,g,h,i,j;e=0,this.inFlightRequest=!0,g=a(function(a,f,g,h){c(a,g,h);if(f){e+=1;if(e>=b.length)return d(),this.inFlightRequest=!1,this.processNextRequest()}},this),j=[];for(h=0,i=b.length;h<i;h++)f=b[h],j.push(a(function(a){return this.fetchNextBatch(a[0],a[1],function(b,c){return g(b,c,a[0],a[1])})},this)(f));return j},d.prototype.fetchNextBatch=function(c,d,e){var f;return f=function(a){var b,c,d,e,f,g,h,i;if(!a)return null;e={},h=a.split(",");for(f=0,g=h.length;f<g;f++)b=h[f],i=b.split(";"),c=i[0],d=i[1],c=c.replace(/^</,"").replace(/>$/,""),d=d.split('"')[1],e[d]=c;return e},b.publish("EventDataSource/ajaxStarted"),d.per_page=50,b.ajaxJSON(c,"GET",d,a(function(a,c){var g,h;b.publish("EventDataSource/ajaxEnded"),g=typeof c.getResponseHeader=="function"?c.getResponseHeader("Link"):void 0,h=f(g);if(h!=null?h.next:void 0){e(a,!1),this.fetchNextBatch(h.next,d,e);return}return e(a,!0)},this))},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditCalendarEventDetails",["jquery","compiled/calendar/commonEventFactory","compiled/calendar/TimeBlockList","jst/calendar/editCalendarEvent","jst/calendar/genericSelect","jquery.instructure_date_and_time","jquery.instructure_forms","jquery.instructure_misc_helpers","vendor/date"],function(b,c,d,e,f){var g;return g=function(){function d(c,d,f,g){this.event=d,this.contextChangeCB=f,this.closeCB=g,this.formSubmit=a(this.formSubmit,this),this.setupTimeAndDatePickers=a(this.setupTimeAndDatePickers,this),this.contextChange=a(this.contextChange,this),this.setContext=a(this.setContext,this),this.moreOptionsClick=a(this.moreOptionsClick,this),this.activate=a(this.activate,this),this.currentContextInfo=null,this.form=b(e({title:this.event.title,contexts:this.event.possibleContexts(),lockedTitle:this.event.lockedTitle})),b(c).append(this.form),this.setupTimeAndDatePickers(),this.form.submit(this.formSubmit),this.form.find(".more_options_link").click(this.moreOptionsClick),this.form.find("select.context_id").change(this.contextChange),this.form.find("select.context_id").triggerHandler("change",!1),this.event.isNewEvent()||this.form.find(".context_select").hide()}return d.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.event.possibleContexts();for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},d.prototype.activate=function(){return this.form.find("select.context_id").change()},d.prototype.moreOptionsClick=function(a){var c,d,e;if(this.event.object.parent_event_id)return;return a.preventDefault(),e=b(a.target).attr("href").split("#"),c=b("#edit_calendar_event_form").getFormData({object_name:"calendar_event"}),d={},c.title&&(d.title=c.title),c.date&&(d.start_at=""+c.date+" "+(c.start_time||""),d.end_at=""+c.date+" "+(c.end_time||"")),d.return_to=window.location.href,e[0]+="?"+b.param(d),window.location.href=e.join("#")},d.prototype.setContext=function(a){return this.form.find("select.context_id").val(a).triggerHandler("change",!1)},d.prototype.contextChange=function(a,c){var d,e;d=b(a.target).val(),this.currentContextInfo=this.contextInfoForCode(d),this.event.contextInfo=this.currentContextInfo;if(this.currentContextInfo===null)return;return c!==!1&&this.contextChangeCB(d),e=null,this.event.isNewEvent()?e=this.currentContextInfo.new_calendar_event_url:e=this.event.fullDetailsURL()+"/edit",this.form.find(".more_options_link").attr("href",e)},d.prototype.setupTimeAndDatePickers=function(){var c,d;this.form.find(".date_field").date_field(),this.form.find(".time_field").time_field().blur(a(function(a){var c,d,e,f;f=this.form.find(".time_field.start_time").next(".datetime_suggest").text(),this.form.find(".time_field.start_time").next(".datetime_suggest").hasClass("invalid_datetime")&&(f=null),f==null&&(f=this.form.find(".time_field.start_time").val()),d=this.form.find(".time_field.end_time").next(".datetime_suggest").text(),this.form.find(".time_field.end_time").next(".datetime_suggest").hasClass("invalid_datetime")&&(d=null),d==null&&(d=this.form.find(".time_field.end_time").val()),e=Date.parse(f),c=Date.parse(d),e=e||c,c=c||e,b(a.target).hasClass("end_time")?e>c&&(e=c):c<e&&(c=e),e&&this.form.find(".time_field.start_time").val(e.toString("h:mmtt").toLowerCase());if(c)return this.form.find(".time_field.end_time").val(c.toString("h:mmtt").toLowerCase())},this)),d=this.event.startDate(),c=this.event.endDate(),this.event.allDay||(d&&this.form.find(".time_field.start_time").val(d.toString("h:mmtt")).change().blur(),c&&this.form.find(".time_field.end_time").val(c.toString("h:mmtt")).change().blur());if(d)return this.form.find(".date_field").val(d.toString("MMM d, yyyy")).change()},d.prototype.formSubmit=function(a){var d,e,f,g,h,i,j,k;return a.preventDefault(),d=this.form.getFormData({object_name:"calendar_event"}),d.date?(i=Date.parse(""+d.date+" "+d.start_time),(j=d.end_time)==null&&(d.end_time=d.start_time),e=Date.parse(""+d.date+" "+d.end_time)):(i=null,e=null),h={"calendar_event[title]":(k=d.title)!=null?k:this.event.title,"calendar_event[start_at]":i?b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(i)):"","calendar_event[end_at]":e?b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(e)):""},this.event.isNewEvent()?(h["calendar_event[context_code]"]=d.context_code,g={calendar_event:{title:h["calendar_event[title]"],start_at:i?b.dateToISO8601UTC(i):null,end_at:e?b.dateToISO8601UTC(e):null,context_code:this.form.find(".context_id").val()}},f=c(g,this.event.possibleContexts()),f.save(h)):(this.event.title=h["calendar_event[title]"],this.event.start=i,this.event.end=e,this.event.save(h)),this.closeCB()},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditAssignmentDetails",["jquery","compiled/calendar/commonEventFactory","jst/calendar/editAssignment","jst/calendar/genericSelect","jquery.instructure_date_and_time","jquery.instructure_forms","jquery.instructure_misc_helpers"],function(b,c,d,e){var f;return f=function(){function f(c,e,f,g){this.event=e,this.contextChangeCB=f,this.closeCB=g,this.formSubmit=a(this.formSubmit,this),this.setupTimeAndDatePickers=a(this.setupTimeAndDatePickers,this),this.contextChange=a(this.contextChange,this),this.setContext=a(this.setContext,this),this.moreOptionsClick=a(this.moreOptionsClick,this),this.activate=a(this.activate,this),this.currentContextInfo=null,this.form=b(d({title:this.event.title,contexts:this.event.possibleContexts()})),b(c).append(this.form),this.setupTimeAndDatePickers(),this.form.submit(this.formSubmit),this.form.find(".more_options_link").click(this.moreOptionsClick),this.form.find("select.context_id").change(this.contextChange),this.form.find("select.context_id").triggerHandler("change",!1),this.event.isNewEvent()||(this.form.find(".context_select").hide(),this.form.attr("method","PUT"),this.form.attr("action",b.replaceTags(this.event.contextInfo.assignment_url,"id",this.event.object.id)))}return f.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.event.possibleContexts();for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},f.prototype.activate=function(){var a;this.form.find("select.context_id").change();if((a=this.event.assignment)!=null?a.assignment_group_id:void 0)return this.form.find(".assignment_group_select .assignment_group").val(this.event.assignment.assignment_group_id)},f.prototype.moreOptionsClick=function(a){var c,d,e;return a.preventDefault(),e=b(a.target).attr("href").split("#"),c=this.form.getFormData({object_name:"assignment"}),d={},c.title&&(d.title=c.title),c.due_at&&(d.due_at=c.due_at),c.assignment_group_id&&(d.assignment_group_id=c.assignment_group_id),d.return_to=window.location.href,e[0]+="?"+b.param(d),window.location.href=e.join("#")},f.prototype.setContext=function(a){return this.form.find("select.context_id").val(a).triggerHandler("change",!1)},f.prototype.contextChange=function(a,c){var d,f,g;if(this.ignoreContextChange)return;f=b(a.target).val(),this.currentContextInfo=this.contextInfoForCode(f),this.event.contextInfo=this.currentContextInfo;if(this.currentContextInfo===null)return;return c!==!1&&this.contextChangeCB(f),d={cssClass:"assignment_group",name:"assignment[assignment_group_id]",collection:this.currentContextInfo.assignment_groups},this.form.find(".assignment_group_select").html(e(d)),this.form.attr("action",this.currentContextInfo.create_assignment_url),g=this.event.assignment?""+this.event.assignment.html_url+"/edit":this.currentContextInfo.new_assignment_url,this.form.find(".more_options_link").attr("href",g)},f.prototype.setupTimeAndDatePickers=function(){var a,b;this.form.find(".datetime_field").datetime_field(),b=this.event.startDate(),a=this.event.endDate();if(this.event.allDay)return this.form.find(".datetime_field").val(b.toString("MMM d, yyyy")).change();if(b)return this.form.find(".datetime_field").val(b.toString("MMM d, yyyy h:mmtt")).change()},f.prototype.formSubmit=function(a){var d,e,f,g,h;return a.preventDefault(),e=this.form.getFormData()["assignment[due_at]"],e===""?d=null:d=this.form.find("#assignment_due_at").data("date"),h={"assignment[name]":this.form.find("#assignment_title").val(),"assignment[due_at]":d?b.dateToISO8601UTC(b.unfudgeDateForProfileTimezone(d)):"","assignment[assignment_group_id]":this.form.find(".assignment_group").val()},this.event.isNewEvent()?(g={assignment:{title:h["assignment[name]"],due_at:d?b.dateToISO8601UTC(d):null,context_code:this.form.find(".context_id").val()}},f=c(g,this.event.possibleContexts()),f.save(h)):(this.event.title=h["assignment[name]"],this.event.start=d,this.event.save(h)),this.closeCB()},f}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/EditEventDetailsDialog",["jquery","i18n!calendar","use!underscore","compiled/calendar/CommonEvent","compiled/calendar/EditCalendarEventDetails","compiled/calendar/EditAssignmentDetails","compiled/calendar/EditApptCalendarEventDialog","compiled/calendar/EditAppointmentGroupDetails","jst/calendar/editEvent","jquery.instructure_jquery_patches","jqueryui/tabs"],function(b,c,d,e,f,g,h,i,j){var k;return k=b('<div id="edit_event"><div /></div>').appendTo("body").dialog({autoOpen:!1,width:"auto",resizable:!1,title:c.t("titles.edit_event","Edit Event")}),function(){function c(b){this.event=b,this.show=a(this.show,this),this.closeCB=a(this.closeCB,this),this.contextChange=a(this.contextChange,this),this.setupTabs=a(this.setupTabs,this),this.currentContextInfo=null}return c.prototype.contextInfoForCode=function(a){var b,c,d,e;e=this.event.possibleContexts();for(c=0,d=e.length;c<d;c++){b=e[c];if(b.asset_string===a)return b}return null},c.prototype.setupTabs=function(){var a,c;return c=k.find("#edit_event_tabs"),c.tabs().bind("tabsselect",function(a,c){return b(c.panel).closest(".tab_holder").data("form-widget").activate()}),this.event.eventType==="calendar_event"?(c.tabs("select",0),c.tabs("remove",1),this.calendarEventForm.activate()):this.event.eventType==="assignment"?(c.tabs("select",1),c.tabs("remove",0),this.assignmentDetailsForm.activate()):(a=d.any(this.event.allPossibleContexts,function(a){return a.can_create_assignments}),a||c.tabs("remove",1),this.calendarEventForm.activate())},c.prototype.contextChange=function(a){k.removeClass(k.data("group_class")),k.addClass("group_"+a).data("group_class","group_"+a),this.calendarEventForm&&this.calendarEventForm.setContext(a);if(this.assignmentDetailsForm)return this.assignmentDetailsForm.setContext(a)},c.prototype.closeCB=function(){return k.dialog("close")},c.prototype.show=function(){var a,c;if(this.event.isAppointmentGroupEvent())return(new h(this.event)).show();c=j(),k.children().replaceWith(c);if(this.event.isNewEvent()||this.event.eventType==="calendar_event")a=k.find("#edit_calendar_event_form_holder"),this.calendarEventForm=new f(a,this.event,this.contextChange,this.closeCB),a.data("form-widget",this.calendarEventForm);if(this.event.isNewEvent()||this.event.eventType==="assignment")this.assignmentDetailsForm=new g(b("#edit_assignment_form_holder"),this.event,this.contextChange,this.closeCB),k.find("#edit_assignment_form_holder").data("form-widget",this.assignmentDetailsForm);return this.setupTabs(),k.dialog("open")},c}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/ShowEventDetailsDialog",["jquery","i18n!calendar","compiled/util/Popover","compiled/calendar/CommonEvent","compiled/calendar/EditEventDetailsDialog","jst/calendar/eventDetails","jst/calendar/deleteItem","jst/calendar/reservationOverLimitDialog","use!underscore","jquery.ajaxJSON","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub"],function(b,c,d,e,f,g,h,i,j){var k;return k=function(){function e(b){this.show=a(this.show,this),this.cancelAppointment=a(this.cancelAppointment,this),this.unreserveEvent=a(this.unreserveEvent,this),this.reserveEvent=a(this.reserveEvent,this),this.reserveSuccessCB=a(this.reserveSuccessCB,this),this.reserveErrorCB=a(this.reserveErrorCB,this),this.deleteEvent=a(this.deleteEvent,this),this.showEditDialog=a(this.showEditDialog,this),this.event=b,this.contexts=b.contexts}return e.prototype.showEditDialog=function(){return this.popover.hide(),(new f(this.event)).show()},e.prototype.deleteEvent=function(d){var e;d==null&&(d=this.event);if(this.event.isNewEvent())return;return e=d.object.url,d.object.assignment&&(e=b.replaceTags(this.event.deleteURL,"id",this.event.object.id)),b("<div />").confirmDelete({url:e,message:b(h({message:d.deleteConfirmation,hide_reason:d.object.workflow_state!=="locked"})),dialog:{title:c.t("confirm_deletion","Confirm Deletion")},prepareData:a(function(a){return{cancel_reason:a.find("#cancel_reason").val()}},this),confirmed:a(function(){return this.popover.hide(),b.publish("CommonEvent/eventDeleting",d)},this),success:a(function(){return b.publish("CommonEvent/eventDeleted",d)},this)})},e.prototype.reserveErrorCB=function(d){var e,f,g,h,j;for(h=0,j=d.length;h<j;h++)f=d[h],f.message==="participant has met per-participant limit"&&(g=!0,f.reschedulable=f.reservations.length===1,e=b(i(f)).dialog({resizable:!1,width:450,buttons:f.reschedulable?[{text:c.t("reschedule","Reschedule"),"class":"ui-button-primary",click:a(function(){return e.disableWhileLoading(this.reserveEvent({cancel_existing:!0}).always(function(){return e.dialog("close")}))},this)},{text:c.t("do_nothing","Do Nothing"),click:function(){return e.dialog("close")}}]:[{text:c.t("ok","OK"),click:function(){return e.dialog("close")}}]}));if(!g)return alert("Could not reserve event: "+d),b.publish("CommonEvent/eventSaveFailed",this.event)},e.prototype.reserveSuccessCB=function(a){return this.popover.hide(),b.publish("CommonEvent/eventSaved",this.event)},e.prototype.reserveEvent=function(a){return a==null&&(a={}),b.publish("CommonEvent/eventSaving",this.event),b.ajaxJSON(this.event.object.reserve_url,"POST",a,this.reserveSuccessCB,this.reserveErrorCB)},e.prototype.unreserveEvent=function(){var a,b,c,d,e;d=this.event.childEvents;for(b=0,c=d.length;b<c;b++){a=d[b];if((e=a.object)!=null?e.own_reservation:void 0){this.deleteEvent(a);return}}},e.prototype.cancelAppointment=function(d){var e,f,g;return f=d.data("url"),e=j.detect(this.event.calendarEvent.child_events,function(a){return a.url===f}),b("<div/>").confirmDelete({url:f,message:b(h({message:c.t("cancel_appointment","Are you sure you want to cancel your appointment with %{name}?",{name:((g=e.user)!=null?g.short_name:void 0)||e.group.name})})),dialog:{title:c.t("confirm_removal","Confirm Removal"),width:"400px",resizable:!1},prepareData:a(function(a){return{cancel_reason:a.find("#cancel_reason").val()}},this),success:a(function(){var a,c;this.event.object.child_events=j(this.event.object.child_events).reject(function(a){return a.url===d.data("url")}),d.remove(),c=b("#scheduler").prop("checked"),a=this.event.calendarEvent.child_events;if(!c&&a.length===0)return b.publish("CommonEvent/eventDeleted",this.event),this.popover.hide()},this)})},e.prototype.show=function(c){var e,f,h,i,j,k,l,m,n,o,p,q,r,s,t;f=b.extend(!0,{},this.event,{can_reserve:(k=this.event.object)!=null?k.reserve_url:void 0}),this.event.contextInfo.can_create_appointment_groups&&(f.can_reserve=!1);if((m=this.event.object)!=null?m.child_events:void 0){this.event.object.reserved&&(f.can_unreserve=!0,f.can_reserve=!1),n=this.event.object.child_events;for(i=0,j=n.length;i<j;i++)e=n[i],h={id:((o=e.user)!=null?o.id:void 0)||e.group.id,name:((p=e.user)!=null?p.short_name:void 0)||e.group.name,event_url:e.url},((q=f.reservations)!=null?q:f.reservations=[]).push(h),e.user&&((r=f.reserved_users)!=null?r:f.reserved_users=[]).push(h),e.group&&((s=f.reserved_groups)!=null?s:f.reserved_groups=[]).push(h)}return((t=this.event.object)!=null?t.available_slots:void 0)===0?(f.can_reserve=!1,f.availableSlotsText="None"):((l=this.event.object)!=null?l.available_slots:void 0)>0&&(f.availableSlotsText=this.event.object.available_slots),this.popover=new d(c,g(f)),this.popover.el.find(".edit_event_link").click(a(function(a){return a.preventDefault(),this.showEditDialog()},this)),this.popover.el.find(".delete_event_link").click(a(function(a){return a.preventDefault(),this.deleteEvent()},this)),this.popover.el.find(".reserve_event_link").click(a(function(a){return a.preventDefault(),this.reserveEvent()},this)),this.popover.el.find(".unreserve_event_link").click(a(function(a){return a.preventDefault(),this.unreserveEvent()},this)),this.popover.el.find(".cancel_appointment_link").click(a(function(a){var c;return a.preventDefault(),c=b(a.target).closest("li"),this.cancelAppointment(c)},this))},e}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/Calendar",["i18n!calendar","jquery","compiled/util/hsvToRgb","jst/calendar/calendarApp","compiled/calendar/EventDataSource","compiled/calendar/commonEventFactory","compiled/calendar/ShowEventDetailsDialog","compiled/calendar/EditEventDetailsDialog","compiled/calendar/Scheduler","vendor/fullcalendar","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","jqueryui/button"],function(b,c,d,e,f,g,h,i,j){var k;return k=function(){function m(d,f,g,h,i){var k,l,m,n,o,p,q,r;this.contexts=f,this.manageContexts=g,this.dataSource=h,this.options=i,this.dataFromDocumentHash=a(this.dataFromDocumentHash,this),this.loadView=a(this.loadView,this),this.refetchEvents=a(this.refetchEvents,this),this.ajaxEnded=a(this.ajaxEnded,this),this.ajaxStarted=a(this.ajaxStarted,this),this.visibleContextListChanged=a(this.visibleContextListChanged,this),this.eventSaveFailed=a(this.eventSaveFailed,this),this.eventSaved=a(this.eventSaved,this),this.eventSaving=a(this.eventSaving,this),this.eventDeleted=a(this.eventDeleted,this),this.eventDeleting=a(this.eventDeleting,this),this.reloadClick=a(this.reloadClick,this),this.fragmentChange=a(this.fragmentChange,this),this.drop=a(this.drop,this),this.viewDisplay=a(this.viewDisplay,this),this.eventResize=a(this.eventResize,this),this.dayClick=a(this.dayClick,this),this.eventClick=a(this.eventClick,this),this.eventDrop=a(this.eventDrop,this),this.eventAfterRender=a(this.eventAfterRender,this),this.eventRender=a(this.eventRender,this),this.getEvents=a(this.getEvents,this),this.contextCodes=function(){var a,b,c;c=[];for(a=0,b=f.length;a<b;a++)k=f[a],c.push(k.asset_string);return c}(),this.visibleContextList=[],this.displayAppointmentEvents=null,this.activateEvent=(q=this.options)!=null?q.activateEvent:void 0,this.activeAjax=0,c.subscribe({"CommonEvent/eventDeleting":this.eventDeleting,"CommonEvent/eventDeleted":this.eventDeleted,"CommonEvent/eventSaving":this.eventSaving,"CommonEvent/eventSaved":this.eventSaved,"CommonEvent/eventSaveError":this.eventSaveFailed,"Calendar/visibleContextListChanged":this.visibleContextListChanged,"EventDataSource/ajaxStarted":this.ajaxStarted,"EventDataSource/ajaxEnded":this.ajaxEnded,"Calendar/refetchEvents":this.refetchEvents}),p='\'<span class="agenda-col-wrapper">\n  <span class="day-num">\'d\'</span>\n  <span class="day-and-month">\n    <span class="day-name">\'dddd\'</span><br />\n    <span class="month-name">\'MMM\'</span>\n  </span>\n</span>\'',n={header:{left:"prev,today,next",center:"title",right:""},editable:!0,columnFormat:{month:"dddd",week:p},allDayDefault:!1,buttonText:{today:b.t("today","Today")},defaultEventMinutes:60,weekMode:"variable",slotMinutes:30,firstHour:7,droppable:!0,dropAccept:".undated_event",ignoreTimezone:!0,lazyFetching:!1,events:this.getEvents,eventRender:this.eventRender,eventAfterRender:this.eventAfterRender,eventDrop:this.eventDrop,eventClick:this.eventClick,eventResize:this.eventResize,dayClick:this.dayClick,titleFormat:{week:"MMM d[ yyyy]{ '&ndash;'[ MMM] d, yyyy}"},viewDisplay:this.viewDisplay,drop:this.drop},l=this.dataFromDocumentHash(),!l.view_start&&((r=this.options)!=null?r.viewStart:void 0)&&(l.view_start=this.options.viewStart,location.hash=c.encodeToHex(JSON.stringify(l))),l.view_start&&(m=c.fullCalendar.parseISO8601(l.view_start),m&&(n.year=m.getFullYear(),n.month=m.getMonth(),n.date=m.getDate())),this.el=c(d).html(e());if(l.view_name==="month"||l.view_name==="agendaWeek")o=l.view_name==="agendaWeek"?"week":"month",c("#"+o).click(),n.defaultView=l.view_name;l.show&&l.show!==""&&(this.visibleContextList=l.show.split(",")),this.calendar=this.el.find("div.calendar").fullCalendar(n),c(document).fragmentChange(this.fragmentChange),this.el.find("#calendar_views").buttonset().find("input").change(a(function(a){return this.loadView(c(a.target).attr("id"))},this)),this.$refresh_calendar_link=this.el.find("#refresh_calendar_link").click(this.reloadClick),this.colorizeContexts(),this.scheduler=new j(".scheduler-wrapper",this),c("html").addClass("calendar-loaded"),this.dataSource.getAppointmentGroups(!1,a(function(a){var b,c,d,e;c=0;for(d=0,e=a.length;d<e;d++)b=a[d],b.requiring_action&&(c+=1);return this.el.find("#calendar-header .counter-badge").toggle(c>0).text(c)},this)),window.setTimeout(a(function(){if(l.view_name==="scheduler"){c("#scheduler").click();if(l.appointment_group_id)return this.scheduler.viewCalendarForGroupId(l.appointment_group_id)}},this))}var f,k,l;return m.prototype.getEvents=function(b,d,e){var f;return f=a(function(a){var b,c,d,e,f,g;c={};if(a.length>0){for(d=f=a.length-1;f>0?d>=0:d<=0;f>0?d--:d++)b=a[d],e=!0,c[b.id]?e=!1:b.isAppointmentGroupEvent()&&(this.displayAppointmentEvents?this.displayAppointmentEvents.id===((g=b.calendarEvent)!=null?g.appointment_group_id:void 0)?e=!!b.calendarEvent.reserve_url:e=!b.calendarEvent.reserve_url:b.calendarEvent.reserve_url?b.calendarEvent.child_events_count>0&&!b.calendarEvent.reserved?e=!0:e=!1:e=!0),e||a.splice(d,1),c[b.id]=!0;return a}return a},this),this.dataSource.getEvents(c.unfudgeDateForProfileTimezone(b),c.unfudgeDateForProfileTimezone(d),this.visibleContextList,a(function(b){return this.displayAppointmentEvents?this.dataSource.getEventsForAppointmentGroup(this.displayAppointmentEvents,a(function(a){var c,d,g,h,i;for(d=0,h=b.length;d<h;d++)c=b[d],c.removeClass("current-appointment-group");for(g=0,i=a.length;g<i;g++)c=a[g],c.addClass("current-appointment-group");return e(f(b.concat(a)))},this)):e(f(b))},this))},m.prototype.eventRender=function(a,b,d){var e;return a.isAppointmentGroupEvent()&&this.displayAppointmentEvents&&this.displayAppointmentEvents.id===a.calendarEvent.appointment_group_id&&(e="Available",a.calendarEvent.available_slots>0&&(e=""+a.calendarEvent.available_slots+" Available"),a.calendarEvent.available_slots===0&&(e="Filled"),a.calendarEvent.reserved===!0&&(e="Reserved"),c(b).find(".fc-event-title").text(e)),!0},m.prototype.eventAfterRender=function(a,b,c){var d,e;a.eventType==="assignment"&&a.isDueAtMidnight()&&b.find(".fc-event-time").text("12a"),a.eventType==="assignment"&&c.name==="agendaWeek"&&b.height("").find(".ui-resizable-handle").remove();if(a.eventType==="calendar_event"&&((d=this.options)!=null?d.activateEvent:void 0)&&a.id==="calendar_event_"+((e=this.options)!=null?e.activateEvent:void 0))return this.options.activateEvent=null,this.eventClick(a,{currentTarget:b,pageX:b.offset().left+parseInt(b.width()/2)},c)},m.prototype.eventDrop=function(a,b,c,d,e,f,g,h){return a.eventType==="assignment"&&a.isDueAtMidnight()&&c===0&&a.start.setMinutes(59),a.saveDates(null,e)},m.prototype.eventClick=function(a,b,c){return(new h(a)).show(b)},m.prototype.dayClick=function(a,b,c,d){var e;if(this.displayAppointmentEvents)return;return e=g(null,this.contexts),e.allDay=b,e.date=a,(new i(e)).show()},m.prototype.eventResize=function(a,b,c,d,e,f,g){return a.saveDates(null,d)},m.prototype.updateFragment=function(a){var b,d,e;b=this.dataFromDocumentHash();for(d in a)e=a[d],b[d]=e;return location.replace("#"+c.encodeToHex(JSON.stringify(b)))},m.prototype.viewDisplay=function(a){return this.updateFragment({view_start:c.dateToISO8601UTC(a.start)})},m.prototype.drop=function(a,b,d,e){var f,g;f=c(d.target),g=f.data("calendarEvent");if(g)return g.start=a,g.addClass("event_pending"),this.calendar.fullCalendar("renderEvent",g),g.saveDates(null,function(){return console.log("could not save date on undated event")})},m.prototype.fragmentChange=function(a,b){var d,e,f,g;d=this.dataFromDocumentHash(),f=(g=this.calendar)!=null?g.fullCalendar("getView"):void 0;if(!f||!!c.isEmptyObject(d))return;(d.view_name==="month"||d.view_name==="agendaWeek")&&d.view_name!==f.name&&this.calendar.fullCalendar("changeView",d.view_name);if(d.view_start&&d.view_start!==c.dateToISO8601UTC(f.start)){e=c.fullCalendar.parseISO8601(d.view_start);if(e)return this.calendar.fullCalendar("gotoDate",e)}},m.prototype.reloadClick=function(a){a.preventDefault();if(this.activeAjax===0)return this.dataSource.clearCache(),this.currentView==="scheduler"&&this.scheduler.loadData(),this.calendar.fullCalendar("refetchEvents")},m.prototype.eventDeleting=function(a){return a.addClass("event_pending"),this.calendar.fullCalendar("updateEvent",a)},m.prototype.eventDeleted=function(a){return this.calendar.fullCalendar("removeEvents",a.id)},m.prototype.eventSaving=function(a){if(!a.start)return;return a.addClass("event_pending"),a.isNewEvent()?this.calendar.fullCalendar("renderEvent",a):this.calendar.fullCalendar("updateEvent",a)},m.prototype.eventSaved=function(a){return a.removeClass("event_pending"),this.calendar.fullCalendar("refetchEvents")},m.prototype.eventSaveFailed=function(a){return a.removeClass("event_pending"),a.isNewEvent()?this.calendar.fullCalendar("removeEvents",a.id):this.calendar.fullCalendar("updateEvent",a)},m.prototype.visibleContextListChanged=function(a){return this.visibleContextList=a,this.calendar.fullCalendar("refetchEvents")},m.prototype.ajaxStarted=function(){return this.activeAjax+=1,this.$refresh_calendar_link.addClass("loading")},m.prototype.ajaxEnded=function(){this.activeAjax-=1;if(!this.activeAjax)return this.$refresh_calendar_link.removeClass("loading")},m.prototype.refetchEvents=function(){return this.calendar.fullCalendar("refetchEvents")},m.prototype.gotoDate=function(a){return this.calendar.fullCalendar("gotoDate",a)},m.prototype.loadView=function(a){return this.updateFragment({view_name:a}),a!=="scheduler"?(this.currentView=a,this.calendar.removeClass("scheduler-mode"),this.displayAppointmentEvents=null,this.scheduler.hide(),this.calendar.show(),this.calendar.fullCalendar("refetchEvents"),this.calendar.fullCalendar("changeView",a==="week"?"agendaWeek":"month")):(this.currentView="scheduler",this.calendar.addClass("scheduler-mode"),this.calendar.hide(),this.scheduler.show())},f=c("<div />").appendTo("body"),l=[43,5,205,85,289,63,230,186,115,330],k=function(a,b,c){var e;return e=d(a,b,c),"rgb("+e.join(" ,")+")"},m.prototype.colorizeContexts=function(){var a,b,c,d,e,g,h,i,j,m,n,o,p;return n=[30,96],b=n[0],a=n[1],o=[60,40],m=o[0],j=o[1],p=[70,70],i=p[0],h=p[1],d=function(){var d,f,n;f=this.contextCodes,n=[];for(g=0,d=f.length;g<d;g++)c=f[g],e=l[g%l.length],n.push(".group_"+c+"{           color: "+k(e,m,j)+";           border-color: "+k(e,i,h)+";           background-color: "+k(e,b,a)+";        }");return n}.call(this),f.html("<style>"+d.join("")+"</style>")},m.prototype.dataFromDocumentHash=function(){var a;a={};try{a=c.parseJSON(c.decodeFromHex(location.hash.substring(1)))||{}}catch(b){a={}}return a},m}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/calendar/UndatedEventsList",["jquery","jst/calendar/undatedEvents","compiled/calendar/EventDataSource","compiled/calendar/ShowEventDetailsDialog","instructure-jquery.ui.draggable-patch","jquery.disableWhileLoading","vendor/jquery.ba-tinypubsub"],function(b,c,d,e){var f;return f=function(){function d(d,e){this.dataSource=e,this.eventSaved=a(this.eventSaved,this),this.eventSaving=a(this.eventSaving,this),this.visibleContextListChanged=a(this.visibleContextListChanged,this),this.clickEvent=a(this.clickEvent,this),this.show=a(this.show,this),this.load=a(this.load,this),this.div=b(d).html(c({})),this.hidden=!0,this.visibleContextList=[],b.subscribe({"CommonEvent/eventDeleting":this.eventSaving,"CommonEvent/eventDeleted":this.eventSaved,"CommonEvent/eventSaving":this.eventSaving,"CommonEvent/eventSaved":this.eventSaved,"Calendar/visibleContextListChanged":this.visibleContextListChanged}),this.div.delegate(".event","click",this.clickEvent).delegate(".undated-events-link","click",this.show)}return d.prototype.load=function(){var d;if(this.hidden)return;return d=new b.Deferred,this.div.disableWhileLoading(d,{buttons:[".undated-events-link"],opacity:1,lines:8,length:2,width:2,radius:3}),this.dataSource.getEvents(null,null,this.visibleContextList,a(function(a){var e,f,g;d.resolve(),this.div.html(c({events:a}));for(f=0,g=a.length;f<g;f++)e=a[f],this.div.find("."+e.id).data("calendarEvent",e);return this.div.find(".event").draggable({revert:"invalid",revertDuration:0,helper:"clone",start:function(){return b(this).hide()},stop:function(){if(!b(this).data("calendarEvent").start)return b(this).show()}})},this))},d.prototype.show=function(a){return a.preventDefault(),this.hidden=!1,this.load()},d.prototype.clickEvent=function(a){var c,d;d=b(a.target).data("event-id"),c=this.dataSource.eventWithId(d);if(c)return(new e(c)).show()},d.prototype.visibleContextListChanged=function(a){this.visibleContextList=a;if(!this.hidden)return this.load()},d.prototype.eventSaving=function(a){return this.div.find("."+a.id).addClass("event_pending")},d.prototype.eventSaved=function(){return this.load()},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};define("compiled/calendar/sidebar",["jquery","jst/calendar/contextList","jst/calendar/undatedEvents","compiled/calendar/commonEventFactory","compiled/calendar/EditEventDetailsDialog","compiled/calendar/EventDataSource","compiled/jquery.kylemenu","jquery.instructure_misc_helpers","vendor/jquery.ba-tinypubsub","vendor/jquery.store"],function(c,d,e,f,g,h){var i,j;return i=function(){function d(b,d,e){var f,g,h;this.$holder=e,this.restoreList=a(this.restoreList,this),this.saveAndClear=a(this.saveAndClear,this),g=function(){try{return c.parseJSON(c.decodeFromHex(location.hash.substring(1)))||{}}catch(a){return{}}}(),h=c.store.userGet("checked_calendar_codes"),g.show&&(this.contexts=g.show.split(",")),d&&(this.contexts||(this.contexts=d)),h&&(this.contexts||(this.contexts=h.split(","))),this.contexts||(this.contexts=function(){var a,c,d,e;d=b.slice(0,10),e=[];for(a=0,c=d.length;a<c;a++)f=d[a],e.push(f.asset_string);return e}()),this.notify(),c.subscribe("Calendar/saveVisibleContextListAndClear",this.saveAndClear),c.subscribe("Calendar/restoreVisibleContextList",this.restoreList)}return d.prototype.saveAndClear=function(){if(!this.savedContexts)return this.savedContexts=this.contexts,this.contexts=[],this.notify()},d.prototype.restoreList=function(){if(this.savedContexts)return this.contexts=this.savedContexts,this.savedContexts=null,this.notify()},d.prototype.toggle=function(a){var b;return b=c.inArray(a,this.contexts),b<0?(this.contexts.push(a),this.contexts.length>10&&this.contexts.shift):this.contexts.splice(b,1),this.notify()},d.prototype.notify=function(){return c.publish("Calendar/visibleContextListChanged",[this.contexts]),this.$holder.find(".context_list_context").each(a(function(a,d){var e,f,g;return e=c(d),f=(g=e.data("context"),b.call(this.contexts,g)>=0),e.toggleClass("checked",f).toggleClass("not-checked",!f)},this))},d}(),j=function(a,b,e){var h,j,k,l,m;for(l=0,m=a.length;l<m;l++)j=a[l],j.can_create_stuff=j.can_create_calendar_events||j.can_create_assignments;return h=c("#context-list-holder"),h.html(d({contexts:a})),k=new i(a,b,h),h.find(".settings").kyleMenu({buttonOpts:{icons:{primary:"ui-icon-cog-with-droparrow",secondary:null}}}),h.delegate(".context_list_context","click",function(a){if(!c(a.target).closest(".settings, .actions").length)return k.toggle(c(this).data("context"))}),h.delegate(".context_list_context",{"mouseenter mouseleave":function(a){var b;return b=a.type!=="mouseleave"||!!c(this).find(".ui-menu:visible").length,c(this).toggleClass("hovering",b)},"popupopen popupclose":function(a){var b;return b=a.type==="popupopen",c(this).toggleClass("hovering",b).find(".settings").toggleClass("ui-state-active",b)}}),h.delegate(".actions a","click",function(){var b,d,e;d=c(this).parents("li[data-context]").data("context"),b=c(this).data("action");if(b==="add_event"||b==="add_assignment"){e=f(null,a),(new g(e)).show(),c('select[class="context_id"]').val(d);if(b==="add_assignment")return c('a[href="#edit_assignment_form"]').click()}})}})}.call(this),function(){require(["jquery","compiled/calendar/Calendar","compiled/calendar/MiniCalendar","compiled/calendar/sidebar","compiled/calendar/EventDataSource","compiled/calendar/UndatedEventsList","compiled/bundles/jquery_ui_menu"],function(a,b,c,d,e,f){return this.eventDataSource=new e(ENV.CALENDAR.CONTEXTS),this.calendar=new b("#calendar-app",ENV.CALENDAR.CONTEXTS,ENV.CALENDAR.MANAGE_CONTEXTS,this.eventDataSource,{activateEvent:ENV.CALENDAR.ACTIVE_EVENT,viewStart:ENV.CALENDAR.VIEW_START}),new c("#minical",this.calendar),new f("#undated-events",this.eventDataSource),d(ENV.CALENDAR.CONTEXTS,ENV.CALENDAR.SELECTED_CONTEXTS,this.eventDataSource)})}.call(this),define("compiled/bundles/calendar2",function(){})