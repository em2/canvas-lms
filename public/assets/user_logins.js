I18n.scoped("user_logins",function(c){$(document).ready(function(){var d=$("#edit_pseudonym_form"),f=$("#passwordable_account_ids").text().split(",");d.formSubmit({processData:function(a){if(!$(this).hasClass("passwordable")||!a["pseudonym[password]"]&&!a["pseudonym[password_confirmation]"]){delete a["pseudonym[password]"];delete a["pseudonym[password_confirmation]"]}if((a["pseudonym[password]"]||a["pseudonym[password_confirmation]"])&&a["pseudonym[password]"]!=a["pseudonym[password_confirmation]"]){$(this).formErrors({"pseudonym[password]":c.t("errors.passwords_do_not_match",
"passwords do not match")});return false}},beforeSubmit:function(){$(this).find("button").attr("disabled",true).filter(".submit_button").text(c.t("messages.saving","Saving..."));var a=$(this).find(".account_id select")[0],b=a&&a.selectedIndex;$(this).data("account_name",null);$(this).data("account_name",a&&a.options[b]&&a.options[b].innerHTML)},success:function(a){$(this).find("button").attr("disabled",false).filter(".submit_button").text(c.t("buttons.save","Save"));$(this).dialog("close");if($(this).data("unique_id_text"))var b=
$(this).data("unique_id_text").parents(".login");else{b=$("#login_information .login.blank").clone(true);$("#login_information .add_holder").before(b.show());a.pseudonym.account_name=$(this).data("account_name")||$(this).find(".default_account_name").text()}b.fillTemplateData({data:a.pseudonym,hrefValues:["id","account_id"]});$.inArray(a.pseudonym.account_id.toString(),f)!=-1&&b.find(".links").addClass("passwordable");$("#login_information .login .delete_pseudonym_link").show()},error:function(){$(this).find("button").attr("disabled",
false).filter(".submit_button").text(c.t("errors.save_failed","Save Failed"))}});$("#edit_pseudonym_form .account_id_select").change(function(){$("#edit_pseudonym_form").find("tr.password").showIf($.inArray($(this).val(),f)!=-1)});$("#edit_pseudonym_form .cancel_button").click(function(){d.dialog("close")});$("#login_information").delegate(".login_details_link","click",function(a){a.preventDefault();$(this).parents("tr").find(".login_details").show();$(this).hide()}).delegate(".edit_pseudonym_link",
"click",function(a){a.preventDefault();var b=$("#edit_pseudonym_form");a=b.find(".sis_user_id");a.hide();b.attr("action",$(this).attr("rel")).attr("method","PUT");var e=$(this).parents(".login").getTemplateData({textValues:["unique_id","sis_user_id","can_edit_sis_user_id"]});e.password="";e.password_confirmation="";b.fillFormData(e,{object_name:"pseudonym"});e.can_edit_sis_user_id=="true"&&a.show();a=$(this).parents(".links").hasClass("passwordable");b.toggleClass("passwordable",a);b.find("tr.password").showIf(a);
b.find(".account_id").hide();b.dialog("close").dialog({autoOpen:false,width:"auto",close:function(){b.data("unique_id_text")&&b.data("unique_id_text").parents(".login").hasClass("blank")&&b.data("unique_id_text").parents(".login").remove()}}).dialog("open");b.dialog("option","title",c.t("titles.update_login","Update Login")).find(".submit_button").text(c.t("buttons.update_login","Update Login"));a=$(this).parents(".login").find(".unique_id");b.data("unique_id_text",a);b.find(":input:visible:first").focus().select()}).delegate(".delete_pseudonym_link",
"click",function(a){a.preventDefault();if($("#login_information .login:visible").length<2)alert(c.t("notices.cant_delete_last_login","You can't delete the last login for a user"));else{a=$(this).parents(".login").find(".unique_id").text();$(this).parents(".login").confirmDelete({message:c.t("confirms.delete_login",'Are you sure you want to delete the login, "%{login}"?',{login:a}),url:$(this).attr("rel"),success:function(){$(this).fadeOut();$("#login_information .login:visible").length<2&&$("#login_information .login .delete_pseudonym_link").hide()}})}}).delegate(".add_pseudonym_link",
"click",function(a){a.preventDefault();$("#login_information .login.blank .edit_pseudonym_link").click();d.attr("action",$(this).attr("rel")).attr("method","POST");d.fillFormData({"pseudonym[unique_id]":""});d.dialog("option","title",c.t("titles.add_login","Add Login")).find(".submit_button").text(c.t("buttons.add_login","Add Login"));d.find(".account_id").show();d.find(".account_id_select").change();d.data("unique_id_text",null)})})});
$.extend(true,I18n=I18n||{},{translations:{es:{user_logins:{messages:{saving:"Guardando..."},buttons:{update_login:"Actualizar el Inicio de la Sesi\u00f3n",add_login:"Agregar el Inicio de la Sesi\u00f3n",save:"Guardar"},confirms:{delete_login:'\u00bfSeguro que quiere borrar el inicio de la sesi\u00f3n, "%{login}"?'},errors:{save_failed:"No se pudo Guardar",passwords_do_not_match:"las contrase\u00f1as no coinciden"},titles:{update_login:"Actualizar el inicio de la sesi\u00f3n",add_login:"Agregar Inicio de Sesi\u00f3n"},
notices:{cant_delete_last_login:"No puede borrar el \u00faltimo inicio de sesi\u00f3n para un usuario"}}}}});
