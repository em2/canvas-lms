I18n.scoped("user_name",function(b){$(document).ready(function(){$("#name_and_email").delegate(".edit_user_link","click",function(d){d.preventDefault();$("#edit_student_dialog").dialog("close").dialog({autoOpen:false,width:450}).dialog("open");$("#edit_student_form :text:visible:first").focus().select()});$("#edit_student_form").formSubmit({beforeSubmit:function(){$(this).find("button").attr("disabled",true).filter(".submit_button").text(b.t("messages.updating_user_details","Updating User Details..."))},
success:function(d){$(this).find("button").attr("disabled",false).filter(".submit_button").text(b.t("buttons.update_user","Update User"));$("#name_and_email .user_details").fillTemplateData({data:d&&d.user});$("#edit_student_dialog").dialog("close")},error:function(){$(this).find("button").attr("disabled",false).filter(".submit_button").text(b.t("errors.updating_user_details_failed","Updating user details failed, please try again"))}});$("#edit_student_dialog .cancel_button").click(function(){$("#edit_student_dialog").dialog("close")});
$(".remove_avatar_picture_link").click(function(d){d.preventDefault();var e=$(this);if(confirm(b.t("confirms.remove_profile_picture","Are you sure you want to remove this user's profile picture?"))){e.text(b.t("messages.removing_image","Removing image..."));$.ajaxJSON(e.attr("href"),"PUT",{"avatar[state]":"none"},function(){e.parents("tr").find(".avatar_image").remove();e.remove()},function(){e.text(b.t("errors.failed_to_remove_image","Failed to remove the image, please try again"))})}});$(".report_avatar_picture_link").click(function(d){d.preventDefault();
d.preventDefault();var e=$(this);e.text(b.t("messages.reporting_image","Reporting image..."));$.ajaxJSON(e.attr("href"),"POST",{},function(){e.after(b.t("notices.image_reported","This image has been reported"));e.remove()},function(){e.text(b.t("errors.failed_to_report_image","Failed to report the image, please try again"))})})})});
$(function(){var b=$('input[name="user[short_name]"]'),d=b.parents("form").find('input[name="user[name]"]'),e=$('input[name="user[sortable_name]"]'),f=d.attr("value");d.keyup(function(){var a=d.attr("value"),c=e.attr("value"),g=userUtils.nameParts(c);if(jQuery.trim(c)===""||userUtils.firstNameFirst(g)===jQuery.trim(f)){c=userUtils.nameParts(a,g[1]);e.attr("value",userUtils.lastNameFirst(c))}c=b.attr("value");if(jQuery.trim(c)===""||c===f)b.attr("value",a);f=$(this).attr("value")})});
var userUtils={nameParts:function(b,d){var e=/^(Sn?r\.?|Senior|Jn?r\.?|Junior|II|III|IV|V|VI|Esq\.?|Esquire)$/i,f,a,c,g;if(!b||jQuery.trim(b)==="")return[null,null,null];c=jQuery.map(b.split(","),function(h){return jQuery.trim(h)});f=c[0];a=c[1];c=c.slice(2).join(", ");if(c==="")c=null;if(c&&!e.test(c)){a=a+" "+c;c=null}if(typeof a==="string"){if(!c&&e.test(a)){c=a;a=f;f=null}}else{a=jQuery.trim(b);f=null}a=a.split(/\s+/);if(a.length===1&&a[0]==="")a=[];if(!c&&a.length>1&&e.test(a[a.length-1]))c=
a.pop();if(!f&&d&&!/^\s*$/.test(d)&&(g=d.split(/\s+/))&&a.length>=g.length&&a.slice(a.length-g.length).join(" ")===g.join(" "))f=a.splice(a.length-g.length,g.length).join(" ");if(!f&&a.length>1)f=a.pop();return[a.length===0?null:a.join(" "),f,c]},lastNameFirst:function(b){var d=jQuery.trim([b[0],b[2]].join(" "));return jQuery.trim(b[1]?b[1]+", "+d:d)},firstNameFirst:function(b){return jQuery.trim(b.join(" ").replace(/\s+/," "))}};
$.extend(true,I18n=I18n||{},{translations:{es:{user_name:{buttons:{update_user:"Actualizar Usuario"},confirms:{remove_profile_picture:"\u00bfSeguro que quiere remover la fotograf\u00eda del perfil del usuario?"},messages:{reporting_image:"Reportando imagen...",removing_image:"Remoci\u00f3n de imagen...",updating_user_details:"Actualizando Detalles del Usuario..."},errors:{failed_to_report_image:"No se pudo reportar la imagen, intente de nuevo",failed_to_remove_image:"No se pudo remover la imagen, intente de nuevo",
updating_user_details_failed:"No se pudo actualizar los detalles del usuario, intente de nuevo"},notices:{image_reported:"Esta imagen ha sido reportada"}}}}});
