I18n.scoped("account_settings",function(d){$(document).ready(function(){$("#account_settings").submit(function(){$(".ip_filter .value").each(function(){$(this).removeAttr("name")}).filter(":not(.blank)").each(function(){var a=$.trim($(this).parents(".ip_filter").find(".name").val().replace(/\[|\]/g,"_"));a&&$(this).attr("name","account[ip_filters]["+a+"]")})});$(".datetime_field").datetime_field();$(".add_notification_link").click(function(a){a.preventDefault();$("#add_notification_form").slideToggle(function(){$("#add_notification_form textarea:not(.enabled)").addClass("enabled").editorBox()})});
$("#add_notification_form .datetime_field").bind("blur change",function(){var a=Date.parse($(this).val());if(a)a=a.toString($.datetime.defaultFormat);$(this).val(a)});$("#add_notification_form").submit(function(){if(!$(this).validateForm({object_name:"account_notification",required:["start_at","end_at","subject","message"],date_fields:["start_at","end_at"]}))return false});$(".delete_notification_link").click(function(a){a.preventDefault();a=$(this);a.parents("li").confirmDelete({url:a.attr("rel"),
message:d.t("confirms.delete_alert","Are you sure you want to delete this alert?"),success:function(){$(this).slideUp(function(){$(this).remove()})}})});$("#account_settings_tabs").tabs().show();$(".add_ip_filter_link").click(function(a){a.preventDefault();a=$(".ip_filter.blank:first").clone(true).removeClass("blank");$("#ip_filters").append(a.show())});$(".delete_filter_link").click(function(a){a.preventDefault();$(this).parents(".ip_filter").remove()});$(".ip_filter:not(.blank)").length==0&&$(".add_ip_filter_link").click();
$(".ip_help_link").click(function(a){a.preventDefault();$("#ip_filters_dialog").dialog("close").dialog({autoOpen:false,title:d.t("titles.what_are_quiz_ip_filters","What are Quiz IP Filters?"),width:400}).dialog("open")});$(".remove_account_user_link").click(function(a){a.preventDefault();var b=$(this).parent("li");b.confirmDelete({message:d.t("confirms.remove_account_admin","Are you sure you want to remove this account admin?"),url:$(this).attr("href"),success:function(){b.slideUp(function(){$(this).remove()})}})});
$("#turnitin, #account_settings_global_includes, #enable_equella").change(function(){var a=$("#"+$(this).attr("id")+"_settings"),b=$(this).attr("checked");a.showIf(b);b||a.find("input,textarea").val("")}).change();$(".turnitin_account_settings").change(function(){$(".confirm_turnitin_settings_link").text(d.t("links.turnitin.confirm_settings","confirm Turnitin settings"))});$(".confirm_turnitin_settings_link").click(function(a){a.preventDefault();var b=$(this);a=b.attr("href");var c=$("#account_settings").getFormData({object_name:"account"});
a=$.replaceTags($.replaceTags(a,"account_id",c.turnitin_account_id),"shared_secret",c.turnitin_shared_secret);b.text(d.t("notices.turnitin.checking_settings","checking Turnitin settings..."));$.ajaxJSON(a,"GET",{},function(e){e&&e.success?b.text(d.t("notices.turnitin.setings_confirmed","Turnitin settings confirmed!")):b.text(d.t("notices.turnitin.invalid_settings","invalid Turnitin settings, please check your account id and shared secret from Turnitin"))},function(){b.text(d.t("notices.turnitin.invalid_settings",
"invalid Turnitin settings, please check your account id and shared secret from Turnitin"))})});$(".add_users_link").click(function(a){var b=$("#enroll_users_form");$(this).hide();a.preventDefault();b.show();$("html,body").scrollTo(b);b.find("textarea").focus().select()});$(".open_report_description_link").click(function(a){a.preventDefault();a=$(this).parents(".title").find("span.title").text();$(this).parent(".reports").find(".report_description").dialog("close").dialog({title:a,width:800})});$(".run_report_link").click(function(a){a.preventDefault();
$(this).parent("form").submit()});$(".run_report_form").formSubmit({resetForm:true,beforeSubmit:function(){$(this).loadingImage();return true},success:function(){$(this).loadingImage("remove");var a=$(this).find('input[name="report_type"]').val();$("#"+a).find(".run_report_link").hide().end().find(".configure_report_link").hide().end().find(".running_report_message").show();$(this).parent(".report_dialog").dialog("close")},error:function(){$(this).loadingImage("remove");$(this).parent(".report_dialog").dialog("close")}});
$(".configure_report_link").click(function(a){a.preventDefault();$(this).parent("td").find(".report_dialog").clone(true).dialog({width:400,title:d.t("titles.configure_report","Configure Report")})});$(".service_help_dialog").each(function(){var a=$(this),b=a.attr("id").replace("_help_dialog","");a.dialog({autoOpen:false,width:560});$('<a class="help" href="#">&nbsp;</a>').click(function(c){c.preventDefault();a.dialog("open")}).appendTo('label[for="account_services_'+b+'"]')})})});
I18n.scoped("external_tools",function(d){$(document).ready(function(){var a=$("#external_tools_dialog");$(".add_tool_link").click(function(b){b.preventDefault();a.dialog("close").dialog({autoOpen:false,title:d.t("titles.edit_external_tool","Edit External Tool"),width:600,height:420}).dialog("open");a.find(".shared_secret_note").hide();a.find("form").attr("method","POST").attr("action",a.find(".external_tools_url").attr("href"));a.fillFormData({domain:"",url:"",config_url:"",config_xml:"",description:"",
name:"",custom_fields_string:"",privacy:"anonymous",consumer_key:"",shared_secret:""},{object_name:"external_tool"});a.find(".config_type_option").show();$("#external_tool_match_by").val("domain").change();$("#external_tool_config_type").val("manual").change()});a.find("form").formSubmit({beforeSubmit:function(){$(this).find("button").attr("disabled",true).filter(".save_button").text(d.t("messages.saving_tool_settings","Saving Tool Settings..."))},success:function(b){$(this).find("button").attr("disabled",
false).filter(".save_button").text(d.t("buttons.save_tool_settings","Save Tool Settings"));a.dialog("close");var c=$("#external_tool_"+b.id);if(c.length==0){c=$("#external_tool_blank").clone(true).removeAttr("id");$("#external_tools").append(c)}c.fillTemplateData({data:b,dataValues:["id","workflow_state"],hrefValues:["id"],id:"external_tool_"+b.id});c.toggleClass("has_editor_button",b.has_editor_button).toggleClass("has_resource_selection",b.has_resource_selection).toggleClass("has_course_navigation",
b.has_course_navigation).toggleClass("has_user_navigation",b.has_user_navigation).toggleClass("has_account_navigation",b.has_account_navigation);c.find(".tool_url").showIf(b.url).end().find(".tool_domain").showIf(b.domain);c.show()},error:function(){$(this).find("button").attr("disabled",false).filter(".save_button").text(d.t("errors.save_tool_settings_failed","Save Tool Settings Failed"))}});a.find(".cancel_button").click(function(){a.dialog("close")});$("#external_tools").delegate(".edit_tool_link",
"click",function(b){b.preventDefault();b=$(this).parents(".external_tool");var c=b.getTemplateData({textValues:["name","description","domain","url","consumer_key","custom_fields_string"],dataValues:["id","workflow_state"]});c.privacy_level=c.workflow_state;$("#external_tool_match_by").val(c.url?"url":"domain").change();a.find(".shared_secret_note").show();a.find("form").attr("method","PUT").attr("action",b.find(".update_tool_url").attr("rel"));a.fillFormData(c,{object_name:"external_tool"});a.dialog("close").dialog({autoOpen:false,
title:d.t("titles.edit_external_tool","Edit External Tool"),width:600,height:420}).dialog("open");a.find(".config_type_option").hide();$("#external_tool_config_type").val("manual").change()}).delegate(".delete_tool_link","click",function(b){b.preventDefault();b=$(this).parents(".external_tool");var c=b.find(".update_tool_url").attr("rel");b.confirmDelete({url:c,message:d.t("prompts.remove_tool","Are you sure you want to remove this tool?  Any courses using this tool will no longer work."),success:function(){$(this).slideUp(function(){$(this).remove()})}})});
$("#external_tool_match_by").change(function(){$(this).val()=="url"?$(this).parents("form").find(".tool_domain").hide().find(":text").val("").end().end().find(".tool_url").show():$(this).parents("form").find(".tool_url").hide().find(":text").val("").end().end().find(".tool_domain").show()});$("#external_tool_config_type").change(function(){$("#external_tool_form .config_type").hide();$("#external_tool_form .config_type."+$(this).val()).show()})})});
$.extend(true,I18n=I18n||{},{translations:{es:{account_settings:{confirms:{delete_alert:"\u00bfSeguro que quiere borrar esta alerta?",remove_account_admin:"\u00bfSeguro que quiere remover al administrador de esta cuenta?"},titles:{configure_report:"Configurar el Reporte",what_are_quiz_ip_filters:"\u00bfCu\u00e1les son los Filtros para las Evaluaciones IP?"},links:{turnitin:{confirm_settings:"confirmar las configuraciones de Turnitin"}},notices:{turnitin:{invalid_settings:"configuraciones de Turnitin inv\u00e1lidas, por favor revise su identificaci\u00f3n de cuenta y su secreto compartido de Turnitin",
checking_settings:"revisando las configuraciones de Turnitin...",setings_confirmed:"\u00a1Configuraciones de Turnitin confirmadas!"}}},external_tools:{buttons:{save_tool_settings:"Guardar las Configuraciones de Herramientas"},messages:{saving_tool_settings:"Guardando las Configuraciones de Herramientas..."},prompts:{remove_tool:"\u00bfSeguro que quiere remover esta herramienta? Cualquier curso usando esta herramienta ya no funcionar\u00e1."},errors:{save_tool_settings_failed:"No se pudieron guardar las configuraciones de Herramientas"},
titles:{edit_external_tool:"Editar la Herramienta Externa"}}},em2:{account_settings:{titles:{what_are_quiz_ip_filters:"What are Assessment IP Filters?"}}}}});
