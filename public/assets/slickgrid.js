/*

 (c) 2009-2010 Michael Leibman (michael.leibman@gmail.com)
 http://github.com/mleibman/slickgrid
 Distributed under MIT license.
 All rights reserved.

 SlickGrid v1.4.3

 TODO:
 - frozen columns
 - consistent events (EventHelper?  jQuery events?)


 OPTIONS:
 rowHeight                - (default 25px) Row height in pixels.
 enableAddRow             - (default false) If true, a blank row will be displayed at the bottom - typing values in that row will add a new one.
 leaveSpaceForNewRows     - (default false)
 editable                 - (default false) If false, no cells will be switched into edit mode.
 autoEdit                 - (default true) Cell will not automatically go into edit mode when selected.
 enableCellNavigation     - (default true) If false, no cells will be selectable.
 enableCellRangeSelection - (default false) If true, user will be able to select a cell range.  onCellRangeSelected event will be fired.
 defaultColumnWidth       - (default 80px) Default column width in pixels (if columns[cell].width is not specified).
 enableColumnReorder      - (default true) Allows the user to reorder columns.
 asyncEditorLoading       - (default false) Makes cell editors load asynchronously after a small delay.
 This greatly increases keyboard navigation speed.
 asyncEditorLoadDelay     - (default 100msec) Delay after which cell editor is loaded. Ignored unless asyncEditorLoading is true.
 forceFitColumns          - (default false) Force column sizes to fit into the viewport (avoid horizontal scrolling).
 enableAsyncPostRender    - (default false) If true, async post rendering will occur and asyncPostRender delegates on columns will be called.
 asyncPostRenderDelay     - (default 60msec) Delay after which async post renderer delegate is called.
 autoHeight               - (default false) If true, vertically resizes to fit all rows.
 editorLock               - (default Slick.GlobalEditorLock) A Slick.EditorLock instance to use for controlling concurrent data edits.
 showSecondaryHeaderRow   - (default false) If true, an extra blank (to be populated externally) row will be displayed just below the header columns.
 secondaryHeaderRowHeight - (default 25px) The height of the secondary header row.
 syncColumnCellResize     - (default false) Synchronously resize column cells when column headers are resized
 rowCssClasses            - (default null) A function which (given a row's data item as an argument) returns a space-delimited string of CSS classes that will be applied to the slick-row element. Note that this should be fast, as it is called every time a row is displayed.
 cellHighlightCssClass    - (default "highlighted") A CSS class to apply to cells highlighted via setHighlightedCells().
 cellFlashingCssClass     - (default "flashing") A CSS class to apply to flashing cells (flashCell()).
 formatterFactory         - (default null) A factory object responsible to creating a formatter for a given cell.
 Must implement getFormatter(column).
 editorFactory            - (default null) A factory object responsible to creating an editor for a given cell.
 Must implement getEditor(column).
 multiSelect              - (default true) Enable multiple row selection.

 COLUMN DEFINITION (columns) OPTIONS:
 id                  - Column ID.
 name                - Column name to put in the header.
 toolTip             - Tooltip (if different from name).
 field               - Property of the data context to bind to.
 formatter           - (default 'return value || ""') Function responsible for rendering the contents of a cell. Signature: function formatter(row, cell, value, columnDef, dataContext) { ... return "..."; }
 editor              - An Editor class.
 validator           - An extra validation function to be passed to the editor.
 unselectable        - If true, the cell cannot be selected (and therefore edited).
 cannotTriggerInsert - If true, a new row cannot be created from just the value of this cell.
 width               - Width of the column in pixels.
 resizable           - (default true) If false, the column cannot be resized.
 sortable            - (default false) If true, the column can be sorted (onSort will be called).
 minWidth            - Minimum allowed column width for resizing.
 maxWidth            - Maximum allowed column width for resizing.
 cssClass            - A CSS class to add to the cell.
 rerenderOnResize    - Rerender the column when it is resized (useful for columns relying on cell width or adaptive formatters).
 asyncPostRender     - Function responsible for manipulating the cell DOM node after it has been rendered (called in the background).
 behavior            - Configures the column with one of several available predefined behaviors:  "select", "move", "selectAndMove".


 EVENTS:
 onSort                -
 onHeaderContextMenu   -
 onHeaderClick         -
 onClick               -
 onDblClick            -
 onContextMenu         -
 onKeyDown             -
 onAddNewRow           -
 onValidationError     -
 onViewportChanged     -
 onSelectedRowsChanged -
 onColumnsReordered    -
 onColumnsResized      -
 onBeforeMoveRows      -
 onMoveRows            -
 onCellChange          -  Raised when cell has been edited.   Args: row,cell,dataContext.
 onBeforeEditCell      -  Raised before a cell goes into edit mode.  Return false to cancel.  Args: row,cell,dataContext.
 onBeforeCellEditorDestroy    - Raised before a cell editor is destroyed.  Args: current cell editor.
 onBeforeDestroy       -  Raised just before the grid control is destroyed (part of the destroy() method).
 onCurrentCellChanged  -  Raised when the selected (active) cell changed.  Args: {row:currentRow, cell:currentCell}.
 onCellRangeSelected   -  Raised when a user selects a range of cells.  Args: {from:{row,cell}, to:{row,cell}}.

 NOTES:
 Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 This increases the speed dramatically, but can only be done safely because there are no event handlers
 or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 and do proper cleanup.


 @param {Node}              container   Container node to create the grid in.
 @param {Array} or {Object} data        An array of objects for databinding.
 @param {Array}             columns     An array of column definitions.
 @param {Object}            options     Grid options.
*/
(function(f){f.fn.drag=function(g,d,c){var o=typeof g=="string"?g:"",L=f.isFunction(g)?g:f.isFunction(d)?d:null;if(o.indexOf("drag")!==0)o="drag"+o;c=(g==L?d:c)||{};return L?this.bind(o,c,L):this.trigger(o)};var l=f.event,j=l.special,i=j.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(g){var d=f.data(this,i.datakey),c=g.data||{};d.related+=1;if(!d.live&&g.selector){d.live=true;l.add(this,"draginit."+
i.livekey,i.delegate)}f.each(i.defaults,function(o){if(c[o]!==undefined)d[o]=c[o]})},remove:function(){f.data(this,i.datakey).related-=1},setup:function(){if(!f.data(this,i.datakey)){var g=f.extend({related:0},i.defaults);f.data(this,i.datakey,g);l.add(this,"mousedown",i.init,g);this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){if(!f.data(this,i.datakey).related){f.removeData(this,i.datakey);l.remove(this,"mousedown",i.init);l.remove(this,"draginit",i.delegate);i.textselect(true);
this.detachEvent&&this.detachEvent("ondragstart",i.dontstart)}},init:function(g){var d=g.data,c;if(!(d.which>0&&g.which!=d.which))if(!f(g.target).is(d.not))if(!(d.handle&&!f(g.target).closest(d.handle,g.currentTarget).length)){d.propagates=1;d.interactions=[i.interaction(this,d)];d.target=g.target;d.pageX=g.pageX;d.pageY=g.pageY;d.dragging=null;c=i.hijack(g,"draginit",d);if(d.propagates){if((c=i.flatten(c))&&c.length){d.interactions=[];f.each(c,function(){d.interactions.push(i.interaction(this,d))})}d.propagates=
d.interactions.length;d.drop!==false&&j.drop&&j.drop.handler(g,d);i.textselect(false);l.add(document,"mousemove mouseup",i.handler,d);g=f.data(document,"events").mousemove;c=g.pop();g.splice(0,0,c);return false}}},interaction:function(g,d){return{drag:g,callback:new i.callback,droppable:[],offset:f(g)[d.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(g){var d=g.data;switch(g.type){case !d.dragging&&"mousemove":if(Math.pow(g.pageX-d.pageX,2)+Math.pow(g.pageY-d.pageY,2)<Math.pow(d.distance,
2))break;g.target=d.target;i.hijack(g,"dragstart",d);if(d.propagates)d.dragging=true;case "mousemove":if(d.dragging){i.hijack(g,"drag",d);if(d.propagates){d.drop!==false&&j.drop&&j.drop.handler(g,d);break}g.type="mouseup"}case "mouseup":l.remove(document,"mousemove mouseup",i.handler);if(d.dragging){d.drop!==false&&j.drop&&j.drop.handler(g,d);i.hijack(g,"dragend",d)}i.textselect(true);if(d.click===false&&d.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);
d.dragging=false}}},delegate:function(g){var d=[],c,o=f.data(this,"events")||{};f.each(o.live||[],function(L,M){if(M.preType.indexOf("drag")===0)if(c=f(g.target).closest(M.selector,g.currentTarget)[0]){l.add(c,M.origType+"."+i.livekey,M.origHandler,M.data);f.inArray(c,d)<0&&d.push(c)}});if(!d.length)return false;return f(d).bind("dragend."+i.livekey,function(){l.remove(this,"."+i.livekey)})},hijack:function(g,d,c,o,L){if(c){var M={event:g.originalEvent,type:g.type},O=d.indexOf("drop")?"drag":"drop",
P,ta=o||0,D,X;o=!isNaN(o)?o:c.interactions.length;g.type=d;g.originalEvent=null;c.results=[];do if(D=c.interactions[ta])if(!(d!=="dragend"&&D.cancelled)){X=i.properties(g,c,D);D.results=[];f(L||D[O]||c.droppable).each(function(Oa,ca){P=(X.target=ca)?l.handle.call(ca,g,X):null;ca&&ca!==document&&d==="draginit"&&l.handle.call(document,g,X);if(P===false){if(O=="drag"){D.cancelled=true;c.propagates-=1}if(d=="drop")D[O][Oa]=null}else if(d=="dropinit")D.droppable.push(i.element(P)||ca);if(d=="dragstart")D.proxy=
f(i.element(P)||D.drag)[0];D.results.push(P);delete g.result;if(d!=="dropinit")return P});c.results[ta]=i.flatten(D.results);if(d=="dropinit")D.droppable=i.flatten(D.droppable);d=="dragstart"&&!D.cancelled&&X.update()}while(++ta<o);g.type=M.type;g.originalEvent=M.event;return i.flatten(c.results)}},properties:function(g,d,c){var o=c.callback;o.drag=c.drag;o.proxy=c.proxy||c.drag;o.startX=d.pageX;o.startY=d.pageY;o.deltaX=g.pageX-d.pageX;o.deltaY=g.pageY-d.pageY;o.originalX=c.offset.left;o.originalY=
c.offset.top;o.offsetX=g.pageX-(d.pageX-o.originalX);o.offsetY=g.pageY-(d.pageY-o.originalY);o.drop=i.flatten((c.drop||[]).slice());o.available=i.flatten((c.droppable||[]).slice());return o},element:function(g){if(g&&(g.jquery||g.nodeType==1))return g},flatten:function(g){return f.map(g,function(d){return d&&d.jquery?f.makeArray(d):d&&d.length?i.flatten(d):d})},textselect:function(g){f(document)[g?"unbind":"bind"]("selectstart",i.dontstart).attr("unselectable",g?"off":"on").css("MozUserSelect",g?
"":"none")},dontstart:function(){return false},callback:function(){}};i.callback.prototype={update:function(){j.drop&&this.available.length&&f.each(this.available,function(g){j.drop.locate(this,g)})}};j.draginit=j.dragstart=j.dragend=i})(jQuery);if(typeof jQuery==="undefined")throw Error("SlickGrid requires jquery module to be loaded");if(!jQuery.fn.drag)throw Error("SlickGrid requires jquery.event.drag module to be loaded");
(function(f){function l(){var i=null;this.isActive=function(g){return g?i===g:i!==null};this.activate=function(g){if(g!==i){if(i!==null)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!g.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!g.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";i=g}};this.deactivate=function(g){if(i!==
g)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";i=null};this.commitCurrentEdit=function(){return i?i.commitCurrentEdit():true};this.cancelCurrentEdit=function(){return i?i.cancelCurrentEdit():true}}var j;f.extend(true,window,{Slick:{Grid:function(i,g,d,c){function o(){var a=f("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),b={width:a.width()-a[0].clientWidth,height:a.height()-
a[0].clientHeight};a.remove();return b}function L(a){u.width(a);eb=a>fb-j.width}function M(a){a&&a.jquery&&a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function O(){return Q.length}function P(a){return Q[a]}function ta(){for(var a=0,b=f.browser.mozilla?5E6:1E9,e=f("<div style='display:none' />").appendTo(document.body);a<=b;){e.css("height",a+1E6);if(e.height()!==a+1E6)break;else a+=1E6}e.remove();return a}function D(){for(var a=u[0];(a=a.parentNode)!=
document.body;)if(a==x[0]||a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight)f(a).bind("scroll.slickgrid",gb)}function X(){function a(){f(this).addClass("ui-state-hover")}function b(){f(this).removeClass("ui-state-hover")}var e;G.empty();ya={};for(e=0;e<d.length;e++){var h=d[e]=f.extend({},hb,d[e]);ya[h.id]=e;var k=f("<div class='ui-state-default slick-header-column' id='"+R+h.id+"' />").html("<span class='slick-column-name'>"+h.name+"</span>").width((h.currentWidth||h.width)-za).attr("title",
h.toolTip||h.name||"").data("fieldId",h.id).appendTo(G);if(c.enableColumnReorder||h.sortable)k.hover(a,b);h.sortable&&k.append("<span class='slick-sort-indicator' />")}Pa(ka,Y);ib();c.enableColumnReorder&&ca()}function Oa(){G.click(function(a){if(!f(a.target).hasClass("slick-resizable-handle"))if(m.onSort){a=f(a.target).closest(".slick-header-column");if(a.length){a=d[S(a[0])];if(a.sortable)if(c.editorLock.commitCurrentEdit()){if(a.id===ka)Y=!Y;else{ka=a.id;Y=true}Pa(ka,Y);m.onSort(a,Y)}}}})}function ca(){G.sortable({containment:"parent",
axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(a,b){f(b.helper).addClass("slick-header-column-active")},beforeStop:function(a,b){f(b.helper).removeClass("slick-header-column-active")},stop:function(a){if(c.editorLock.commitCurrentEdit()){for(var b=G.sortable("toArray"),e=[],h=0;h<b.length;h++)e.push(d[jb(b[h].replace(R,""))]);kb(e);if(m.onColumnsReordered)m.onColumnsReordered();
a.stopPropagation();ib()}else f(this).sortable("cancel")}})}function ib(){var a,b,e,h,k,n,v,I,J;h=G.children();h.find(".slick-resizable-handle").remove();h.each(function(C){if(d[C].resizable){if(v===undefined)v=C;I=C}});h.each(function(C,T){if(!(v!==undefined&&C<v||c.forceFitColumns&&C>=I)){f(T);f("<div class='slick-resizable-handle' />").appendTo(T).bind("dragstart",function(s){if(!c.editorLock.commitCurrentEdit())return false;e=s.pageX;f(this).parent().addClass("slick-header-column-active");var E=
s=null;h.each(function(Kb,Lb){d[Kb].previousWidth=f(Lb).outerWidth()});if(c.forceFitColumns){E=s=0;for(a=C+1;a<h.length;a++){b=d[a];if(b.resizable){if(E!==null)if(b.maxWidth)E+=b.maxWidth-b.previousWidth;else E=null;s+=b.previousWidth-Math.max(b.minWidth||0,Z)}}}var p=0,la=0;for(a=0;a<=C;a++){b=d[a];if(b.resizable){if(la!==null)if(b.maxWidth)la+=b.maxWidth-b.previousWidth;else la=null;p+=b.previousWidth-Math.max(b.minWidth||0,Z)}}if(s===null)s=1E5;if(p===null)p=1E5;if(E===null)E=1E5;if(la===null)la=
1E5;n=e+Math.min(s,la);k=e-Math.min(p,E);J=u.width()}).bind("drag",function(s){var E=Math.min(n,Math.max(k,s.pageX))-e,p;if(E<0){p=E;for(a=C;a>=0;a--){b=d[a];if(b.resizable){s=Math.max(b.minWidth||0,Z);if(p&&b.previousWidth+p<s){p+=b.previousWidth-s;N(a,s,c.syncColumnCellResize)}else{N(a,b.previousWidth+p,c.syncColumnCellResize);p=0}}}if(c.forceFitColumns){p=-E;for(a=C+1;a<h.length;a++){b=d[a];if(b.resizable)if(p&&b.maxWidth&&b.maxWidth-b.previousWidth<p){p-=b.maxWidth-b.previousWidth;N(a,b.maxWidth,
c.syncColumnCellResize)}else{N(a,b.previousWidth+p,c.syncColumnCellResize);p=0}}}else c.syncColumnCellResize&&L(J+E)}else{p=E;for(a=C;a>=0;a--){b=d[a];if(b.resizable)if(p&&b.maxWidth&&b.maxWidth-b.previousWidth<p){p-=b.maxWidth-b.previousWidth;N(a,b.maxWidth,c.syncColumnCellResize)}else{N(a,b.previousWidth+p,c.syncColumnCellResize);p=0}}if(c.forceFitColumns){p=-E;for(a=C+1;a<h.length;a++){b=d[a];if(b.resizable){s=Math.max(b.minWidth||0,Z);if(p&&b.previousWidth+p<s){p+=b.previousWidth-s;N(a,s,c.syncColumnCellResize)}else{N(a,
b.previousWidth+p,c.syncColumnCellResize);p=0}}}}else c.syncColumnCellResize&&L(J+E)}}).bind("dragend",function(){var s;f(this).parent().removeClass("slick-header-column-active");for(a=0;a<h.length;a++){b=d[a];s=f(h[a]).outerWidth();b.previousWidth!==s&&b.rerenderOnResize&&$();b.width=c.forceFitColumns?Math.floor(b.width*(s-b.previousWidth)/b.previousWidth)+b.width:s;!c.syncColumnCellResize&&b.previousWidth!==s&&N(a,s,true)}da();if(m.onColumnsResized)m.onColumnsResized()})}})}function Mb(){function a(b){return{start:{row:Math.min(b.start.row,
b.end.row),cell:Math.min(b.start.cell,b.end.cell)},end:{row:Math.max(b.start.row,b.end.row),cell:Math.max(b.start.cell,b.end.cell)}}}u.bind("draginit",function(b,e){var h=f(b.target).closest(".slick-cell");if(h.length===0)return false;if(parseInt(h.parent().attr("row"),10)>=y())return false;h=d[S(h[0])];if(h.behavior=="move"||h.behavior=="selectAndMove")e.mode=1;else if(c.enableCellRangeSelection)e.mode=2;else return false}).bind("dragstart",function(b,e){if(!c.editorLock.commitCurrentEdit())return false;
var h=parseInt(f(b.target).closest(".slick-row").attr("row"),10);if(e.mode==1){Aa[h]||ua([h]);e.selectionProxy=f("<div class='slick-reorder-proxy'/>").css("position","absolute").css("zIndex","99999").css("width",f(this).innerWidth()).css("height",c.rowHeight*va.length).appendTo(x);e.guide=f("<div class='slick-reorder-guide'/>").css("position","absolute").css("zIndex","99998").css("width",f(this).innerWidth()).css("top",-1E3).appendTo(x);e.insertBefore=-1}if(e.mode==2){h=Qa(e.startX-u.offset().left,
e.startY-u.offset().top);if(!Ra(h.row,h.cell))return false;e.range={start:h,end:{}};return f("<div class='slick-selection'></div>").appendTo(u)}}).bind("drag",function(b,e){if(e.mode==1){var h=b.pageY-f(this).offset().top;e.selectionProxy.css("top",h-5);h=Math.max(0,Math.min(Math.round(h/c.rowHeight),y()));if(h!==e.insertBefore){if(m.onBeforeMoveRows&&m.onBeforeMoveRows(Ba(),h)===false){e.guide.css("top",-1E3);e.canMove=false}else{e.guide.css("top",h*c.rowHeight);e.canMove=true}e.insertBefore=h}}if(e.mode==
2){h=Qa(b.clientX-u.offset().left,b.clientY-u.offset().top);if(Ra(h.row,h.cell)){e.range.end=h;var k=a(e.range);h=lb(k.start.row,k.start.cell);k=lb(k.end.row,k.end.cell);f(e.proxy).css({top:h.top,left:h.left,height:k.bottom-h.top-2,width:k.right-h.left-2})}}}).bind("dragend",function(b,e){if(e.mode==1){e.guide.remove();e.selectionProxy.remove();if(m.onMoveRows&&e.canMove)m.onMoveRows(Ba(),e.insertBefore)}if(e.mode==2){f(e.proxy).remove();if(m.onCellRangeSelected)m.onCellRangeSelected(a(e.range))}})}
function Nb(){var a=f("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo(G);za=a.outerWidth()-a.width();a.outerHeight();a.height();a.remove();var b=f("<div class='slick-row' />").appendTo(u);a=f("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(b);Ca=a.outerWidth()-a.width();mb=a.outerHeight()-a.height();b.remove();Z=Math.max(za,Ca)}function nb(){ea=f("<style type='text/css' rel='stylesheet' />").appendTo(f("head"));for(var a=
["."+R+" .slick-header-column { left: 10000px; }","."+R+" .slick-header-columns-secondary {  height:"+c.secondaryHeaderRowHeight+"px; }","."+R+" .slick-cell { height:"+(c.rowHeight-mb)+"px; }"],b=0;b<d.length;b++)a.push("."+R+" .c"+b+" { width:"+((d[b].currentWidth||d[b].width)-Ca)+"px;  } ");if(ea[0].styleSheet)ea[0].styleSheet.cssText=a.join("");else ea[0].appendChild(document.createTextNode(a.join(" ")));a=document.styleSheets;for(b=0;b<a.length;b++)if((a[b].ownerNode||a[b].owningElement)==ea[0]){Sa=
a[b];break}}function jb(a){return ya[a]}function ob(){var a,b,e=[],h=0;a=x.innerWidth();var k=c.autoHeight?a:a-j.width,n=0;for(a=n=0;a<d.length;a++){b=d[a];e.push(b.width);n+=b.width;h+=b.width-Math.max(b.minWidth||0,Z)}for($();n>k;){if(!h)return;var v=(n-k)/h;for(a=0;a<d.length&&n>k;a++){b=d[a];if(!(!b.resizable||b.minWidth===b.width||b.width===Z)){b=Math.floor(v*(b.width-Math.max(b.minWidth||0,Z)))||1;n-=b;e[a]-=b}}}for(h=n;n<k;){v=k/n;for(a=0;a<d.length&&n<k;a++){b=d[a];if(!(!b.resizable||b.maxWidth<=
b.width)){b=Math.min(Math.floor(v*b.width)-b.width,b.maxWidth-b.width||1E6)||1;n+=b;e[a]+=b}}if(h==n)break;h=n}for(a=0;a<d.length;a++)N(a,d[a].currentWidth=e[a],true);da()}function N(a,b,e){d[a].currentWidth=b;G.children().eq(a).css("width",b-za);if(e){a:{e=Sa.cssRules||Sa.rules;for(var h=0;h<e.length;h++)if(e[h].selectorText=="."+R+" .c"+a){a=e[h];break a}a=null}a.style.width=b-Ca+"px"}}function Pa(a,b){ka=a;Y=b;var e=ya[ka];G.children().removeClass("slick-header-column-sorted");G.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");
if(e!=null)G.children().eq(e).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(Y?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}function Ba(){return va.concat()}function ua(a){var b,e,h={};for(b=0;b<a.length;b++)h[a[b]]=true;for(b=0;b<va.length;b++){e=va[b];w[e]&&!h[e]&&f(w[e]).removeClass("ui-state-active selected")}for(b=0;b<a.length;b++){e=a[b];w[e]&&!Aa[e]&&f(w[e]).addClass("ui-state-active selected")}va=a.concat();Aa=h}function kb(a){d=a;$();X();ea.remove();
nb();Ta();pb()}function ma(a){var b=A;na=Math.min(oa-1,Math.floor(a/pa));A=Math.round(na*Da);a-=A;if(A!=b){var e=Ea(a);qb(e.top,e.bottom);for(var h in w)w[h].style.top=h*c.rowHeight-A+"px"}if(qa!=a){fa=qa+b<a+A?1:-1;x[0].scrollTop=Ua=F=qa=a;if(m.onViewportChanged)m.onViewportChanged()}}function Ob(a,b,e){return e===null||e===undefined?"":e}function Fa(a){return a.formatter||c.formatterFactory&&c.formatterFactory.getFormatter(a)||Ob}function qb(a){for(var b in w)if((b=parseInt(b,10))!==t&&(b<a.top||
b>a.bottom))Va(b)}function $(){q&&U();u[0].innerHTML="";w={};wa={};Wa+=ga;ga=0}function Va(a){var b=w[a];if(b){u[0].removeChild(b);delete w[a];delete wa[a];ga--;Wa++}}function rb(a){var b,e;if(a&&a.length){fa=0;var h=[];b=0;for(e=a.length;b<e;b++){q&&t===b&&U();w[a[b]]&&h.push(a[b])}if(ga>10&&h.length===ga)$();else{b=0;for(a=h.length;b<a;b++)Va(h[b])}}}function sb(a){rb([a])}function Xa(a){if(w[a]){f(w[a]).children().each(function(b){var e=d[b];if(a===t&&b===z&&q)q.loadValue(B(t));else this.innerHTML=
B(a)?Fa(e)(a,b,B(a)[e.field],e,B(a)):""});Ya(a)}}function da(){var a=c.rowHeight*(y()+(c.enableAddRow?1:0)+(c.leaveSpaceForNewRows?Ga-1:0));c.autoHeight?x.height(a):x.height(H.innerHeight()-ha.outerHeight()-(c.showSecondaryHeaderRow?aa.outerHeight():0));fb=x.innerWidth();K=x.innerHeight();Ga=Math.ceil(K/c.rowHeight);var b=0;G.find(".slick-header-column").each(function(){b+=f(this).outerWidth()});L(b);Za();ba()}function Ta(){c.forceFitColumns?ob():da()}function Za(){var a=y()+(c.enableAddRow?1:0)+
(c.leaveSpaceForNewRows?Ga-1:0),b=V,e=c.enableAddRow?y():y()-1,h;for(h in w)h>=e&&Va(h);W=Math.max(c.rowHeight*a,K-j.height);if(W<Ha){V=pa=W;oa=1;Da=0}else{V=Ha;pa=V/100;oa=Math.floor(W/pa);Da=(W-V)/(oa-1)}if(V!==b){u.css("height",V);F=x[0].scrollTop}a=F+A<=W-K;if(W==0||F==0)na=A=0;else a?ma(F+A):ma(W-K);V!=b&&c.autoHeight&&da()}function Ea(){return{top:Math.floor((F+A)/c.rowHeight),bottom:Math.ceil((F+A+K)/c.rowHeight)}}function tb(){if(c.enableAsyncPostRender){clearTimeout($a);$a=setTimeout(ub,
c.asyncPostRenderDelay)}}function Ya(a){delete wa[a];ra=Math.min(ra,a);xa=Math.max(xa,a);tb()}function ba(){var a=Ea(),b=Ea(void 0),e=Math.round(K/c.rowHeight);if(fa==-1){b.top-=e;b.bottom+=3}else if(fa==1){b.top-=3;b.bottom+=e}else{b.top-=3;b.bottom+=3}b.top=Math.max(0,b.top);b.bottom=Math.min(c.enableAddRow?y():y()-1,b.bottom);qb(b);var h,k=u[0];h=[];var n=[],v=false;for(e=b.top;e<=b.bottom;e++)if(!w[e]){ga++;n.push(e);var I=h,J=e,C=B(J),T=void 0;T="slick-row "+(J<y()&&!C?" loading":"")+(Aa[J]?
" selected ui-state-active":"")+(J%2==1?" odd":" even");if(c.rowCssClasses)T+=" "+c.rowCssClasses(C);I.push("<div class='ui-widget-content "+T+"' row='"+J+"' style='top:"+(c.rowHeight*J-A)+"px'>");for(var s=0,E=d.length;s<E;s++){var p=d[s];T="slick-cell c"+s+(p.cssClass?" "+p.cssClass:"");if(ia&&ia[J]&&ia[J][p.id])T+=" "+c.cellHighlightCssClass;I.push("<div class='"+T+"'>");C&&I.push(Fa(p)(J,s,C[p.field],p,C));I.push("</div>")}I.push("</div>");if(r&&t===e)v=true;vb++}b=document.createElement("div");
b.innerHTML=h.join("");e=0;for(h=b.childNodes.length;e<h;e++)w[n[e]]=k.appendChild(b.firstChild);if(v){r=f(w[t]).children().eq(z)[0];ab(r,false)}ra=a.top;xa=Math.min(c.enableAddRow?y():y()-1,a.bottom);tb();Ua=F;Ia=null}function pb(){F=x[0].scrollTop;var a=x[0].scrollLeft,b=Math.abs(F-qa);if(a!==wb){wb=a;ha[0].scrollLeft=a;aa[0].scrollLeft=a}if(b){fa=qa<F?1:-1;qa=F;if(b<K)ma(F+A);else{a=A;na=Math.min(oa-1,Math.floor(F*((W-K)/(V-K))*(1/pa)));A=Math.round(na*Da);a!=A&&$()}Ia&&clearTimeout(Ia);if(Math.abs(Ua-
F)<K)ba();else Ia=setTimeout(ba,50);if(m.onViewportChanged)m.onViewportChanged()}}function ub(){for(;ra<=xa;){var a=fa>=0?ra++:xa--,b=w[a];if(!(!b||wa[a]||a>=y())){var e=B(a);b=b.childNodes;for(var h=0,k=0,n=d.length;h<n;++h){var v=d[h];v.asyncPostRender&&v.asyncPostRender(b[k],ra,e,v);++k}wa[a]=true;$a=setTimeout(ub,c.asyncPostRenderDelay);break}}}function S(a){for(var b=0;a&&a.previousSibling;){b++;a=a.previousSibling}return b}function Pb(a){if(!(m.onKeyDown&&!c.editorLock.isActive()&&m.onKeyDown(a,
t,z)))if(!a.shiftKey&&!a.altKey&&!a.ctrlKey)if(a.which==27){if(!c.editorLock.isActive())return;xb()}else if(a.which==37)yb();else if(a.which==39)zb();else if(a.which==38)Ab();else if(a.which==40)Ja();else if(a.which==9)Bb();else if(a.which==13){if(c.editable)if(q)t===O()?Ja():Cb();else c.editorLock.commitCurrentEdit()&&Ka()}else return;else if(a.which==9&&a.shiftKey&&!a.ctrlKey&&!a.altKey)Db();else return;a.stopPropagation();a.preventDefault();try{a.originalEvent.keyCode=0}catch(b){}}function Qb(a){var b=
f(a.target).closest(".slick-cell",u);if(b.length!==0)if(!(r===b[0]&&q!==null)){var e=parseInt(b.parent().attr("row"),10),h=S(b[0]),k=null,n=d[h],v=B(e);if(v&&(n.behavior==="selectAndMove"||n.behavior==="select"||a.ctrlKey||a.shiftKey))if(k=c.editorLock.commitCurrentEdit()){b=Ba();h=f.inArray(e,b);if(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)b=[e];else if(c.multiSelect)if(h===-1&&(a.ctrlKey||a.metaKey))b.push(e);else if(h!==-1&&(a.ctrlKey||a.metaKey))b=f.grep(b,function(I){return I!==e});else if(b.length&&
a.shiftKey){a=b.pop();k=Math.min(e,a);h=Math.max(e,a);for(b=[];k<=h;k++)k!==a&&b.push(k);b.push(a)}Eb();ua(b);if(m.onSelectedRowsChanged)m.onSelectedRowsChanged();f.browser.msie||u[0].focus();return false}if(v&&m.onClick)if(k=c.editorLock.commitCurrentEdit())if(m.onClick(a,e,h)){a.stopPropagation();a.preventDefault();return false}if(c.enableCellNavigation&&!d[h].unselectable)if(k===true||k===null&&c.editorLock.commitCurrentEdit()){La(e,false);bb(b[0],e===O()||c.autoEdit)}}}function Rb(a){var b=f(a.target).closest(".slick-cell",
u);if(b.length!==0)if(!(r===b[0]&&q!==null)){var e=parseInt(b.parent().attr("row"),10);b=S(b[0]);var h=null;if(B(e)&&m.onContextMenu)if(h=c.editorLock.commitCurrentEdit())if(m.onContextMenu(a,e,b)){a.stopPropagation();a.preventDefault();return false}}}function Sb(a){var b=f(a.target).closest(".slick-cell",u);if(b.length!==0)if(!(r===b[0]&&q!==null)){var e=parseInt(b.parent().attr("row"),10);b=S(b[0]);var h=null;if(B(e)&&m.onDblClick)if(h=c.editorLock.commitCurrentEdit())if(m.onDblClick(a,e,b)){a.stopPropagation();
a.preventDefault();return false}c.editable&&Fb(e,b,true)}}function Tb(a){if(m.onHeaderContextMenu&&c.editorLock.commitCurrentEdit()){a.preventDefault();var b=f(a.target).closest(".slick-header-column",".slick-header-columns");m.onHeaderContextMenu(a,d[m.getColumnIndex(b.data("fieldId"))])}}function Ub(a){var b=f(a.target).closest(".slick-header-column");if(b.length!=0){b=d[S(b[0])];if(m.onHeaderClick&&c.editorLock.commitCurrentEdit()){a.preventDefault();m.onHeaderClick(a,b)}}}function Vb(a){if(c.enableAutoTooltips){a=
f(a.target).closest(".slick-cell",u);if(a.length)if(a.innerWidth()<a[0].scrollWidth){var b=f.trim(a.text());a.attr("title",c.toolTipMaxLength&&b.length>c.toolTipMaxLength?b.substr(0,c.toolTipMaxLength-3)+"...":b)}else a.attr("title","")}}function Ra(a,b){return!(a<0||a>=y()||b<0||b>=d.length)}function Qa(a,b){for(var e=Math.floor((b+A)/c.rowHeight),h=0,k=0,n=0;n<d.length&&k<a;n++){k+=d[n].width;h++}return{row:e,cell:h-1}}function lb(a,b){if(!Ra(a,b))return null;for(var e=a*c.rowHeight-A,h=e+c.rowHeight-
1,k=0,n=0;n<b;n++)k+=d[n].width;return{top:e,left:k,bottom:h,right:k+d[b].width}}function Eb(){ab(null,false)}function ja(){f(r).attr("tabIndex",0).attr("hideFocus",true);f.browser.msie&&parseInt(f.browser.version)<8?r.setActive():r.focus();var a=f(r).position().left,b=a+f(r).outerWidth(),e=x.scrollLeft(),h=e+x.width();if(a<e)x.scrollLeft(a);else b>h&&x.scrollLeft(Math.min(a,b-x[0].clientWidth))}function ab(a,b){if(r!==null){U();f(r).removeClass("selected")}r=a;if(r!=null){t=parseInt(f(r).parent().attr("row"),
10);z=S(r);f(r).addClass("selected");if(c.editable&&b&&Gb(t,z)){clearTimeout(cb);if(c.asyncEditorLoading)cb=setTimeout(Ka,c.asyncEditorLoadDelay);else Ka()}else ja();if(m.onCurrentCellChanged)m.onCurrentCellChanged(Hb())}else z=t=null}function bb(a,b){ab(a,b);a?ua([t]):ua([]);if(m.onSelectedRowsChanged)m.onSelectedRowsChanged()}function Gb(a,b){if(a<y()&&!B(a))return false;if(d[b].cannotTriggerInsert&&a>=y())return false;if(!(d[b].editor||c.editorFactory&&c.editorFactory.getEditor(d[b])))return false;
return true}function U(){if(q){if(m.onBeforeCellEditorDestroy)m.onBeforeCellEditorDestroy(q);q.destroy();q=null;if(r){f(r).removeClass("editable invalid");if(B(t)){var a=d[z];r.innerHTML=Fa(a)(t,z,B(t)[a.field],a,B(t));Ya(t)}}if(f.browser.msie)if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection)(a=window.getSelection())&&a.removeAllRanges&&a.removeAllRanges();c.editorLock.deactivate(Ma)}}function Ka(){if(r){if(!c.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";
clearTimeout(cb);if(Gb(t,z))if(m.onBeforeEditCell&&m.onBeforeEditCell(t,z,B(t))===false)ja();else{c.editorLock.activate(Ma);f(r).addClass("editable");r.innerHTML="";var a=d[z],b=B(t);q=new (a.editor||c.editorFactory&&c.editorFactory.getEditor(a))({grid:m,gridPosition:Na(H[0]),position:Na(r),container:r,column:a,item:b||{},commitChanges:Cb,cancelChanges:xb});b&&q.loadValue(b);Ib=q.serializeValue();q.position&&gb()}}}function Cb(){if(c.editorLock.commitCurrentEdit()){ja();c.autoEdit&&Ja()}}function xb(){c.editorLock.cancelCurrentEdit()&&
ja()}function Na(a){var b={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:f(a).outerWidth(),height:f(a).outerHeight(),visible:true};b.bottom=b.top+b.height;b.right=b.left+b.width;for(var e=a.offsetParent;(a=a.parentNode)!=document.body;){if(b.visible&&a.scrollHeight!=a.offsetHeight&&f(a).css("overflowY")!="visible")b.visible=b.bottom>a.scrollTop&&b.top<a.scrollTop+a.clientHeight;if(b.visible&&a.scrollWidth!=a.offsetWidth&&f(a).css("overflowX")!="visible")b.visible=b.right>a.scrollLeft&&
b.left<a.scrollLeft+a.clientWidth;b.left-=a.scrollLeft;b.top-=a.scrollTop;if(a===e){b.left+=a.offsetLeft;b.top+=a.offsetTop;e=a.offsetParent}b.bottom=b.top+b.height;b.right=b.left+b.width}return b}function db(){return Na(r)}function gb(){if(r){var a;if(m.onCurrentCellPositionChanged){a=db();m.onCurrentCellPositionChanged(a)}if(q){a=a||db();if(q.show&&q.hide)a.visible?q.show():q.hide();q.position&&q.position(a)}}}function Hb(){return r?{row:t,cell:z}:null}function La(a,b){var e=a*c.rowHeight,h=(a+
1)*c.rowHeight-K+(eb?j.height:0);if((a+1)*c.rowHeight>F+K+A){ma(b?e:h);ba()}else if(a*c.rowHeight<F+A){ma(b?h:e);ba()}}function sa(a,b,e){function h(){return!d[S(this)].unselectable}if(r&&c.enableCellNavigation)if(c.editorLock.commitCurrentEdit()){var k=w[t+a],n=k&&z+b>=0?f(k).children().eq(z+b).filter(h):null;if(n&&!n.length){var v=f(k).children().filter(function(I){return b>0?I>z+b:I<z+b}).filter(h);if(v&&v.length)n=b>0?v.eq(0):v.eq(v.length-1)}if(e&&a===0&&!(k&&n&&n.length))if(!n||!n.length){k=
w[t+a+(b>0?1:-1)];v=f(k).children().filter(h);n=b>0?k?v.eq(0):null:k?v.eq(v.length-1):null}if(k&&n&&n.length){a=parseInt(f(k).attr("row"),10);e=a==O();La(a,!e);bb(n[0],e||c.autoEdit);q||ja()}else ja()}}function Fb(a,b,e){if(!(a>y()||a<0||b>=d.length||b<0))if(!(!c.enableCellNavigation||d[b].unselectable))if(c.editorLock.commitCurrentEdit()){La(a,false);var h=null;d[b].unselectable||(h=f(w[a]).children().eq(b)[0]);bb(h,e||a===y()||c.autoEdit);q||ja()}}function Ab(){sa(-1,0,false)}function Ja(){sa(1,
0,false)}function yb(){sa(0,-1,false)}function zb(){sa(0,1,false)}function Db(){sa(0,-1,true)}function Bb(){sa(0,1,true)}function Wb(){var a=B(t),b=d[z];if(q){if(q.isValueChanged()){var e=q.validate();if(e.valid){if(t<y()){e={row:t,cell:z,editor:q,serializedValue:q.serializeValue(),prevSerializedValue:Ib,execute:function(){this.editor.applyValue(a,this.serializedValue);Xa(this.row)},undo:function(){this.editor.applyValue(a,this.prevSerializedValue);Xa(this.row)}};if(c.editCommandHandler){U();c.editCommandHandler(a,
b,e)}else{e.execute();U()}if(m.onCellChange)m.onCellChange(t,z,a)}else if(m.onAddNewRow){e={};q.applyValue(e,q.serializeValue());U();m.onAddNewRow(e,b)}return!c.editorLock.isActive()}else{f(r).addClass("invalid");f(r).stop(true,true).effect("highlight",{color:"red"},300);if(m.onValidationError)m.onValidationError(r,e,t,z,b);q.focus();return false}}U()}return true}function Xb(){U();return true}var Yb={rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,
enableCellNavigation:true,enableCellRangeSelection:false,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:60,autoHeight:false,editorLock:Slick.GlobalEditorLock,showSecondaryHeaderRow:false,secondaryHeaderRowHeight:25,syncColumnCellResize:false,enableAutoTooltips:true,toolTipMaxLength:null,formatterFactory:null,editorFactory:null,cellHighlightCssClass:"highlighted",cellFlashingCssClass:"flashing",multiSelect:true},
Q,y,B,hb={name:"",resizable:true,sortable:false,minWidth:30},Ha,W,V,pa,oa,Da,na=0,A=0,fa=1,H,R="slickgrid_"+Math.round(1E6*Math.random()),m=this,ha,G,aa,Jb,x,u,ea,Sa,K,fb,eb,za,Ca,mb,Z,t,z,r=null,q=null,Ib,Ma,w={},ga=0,Ga,qa=0,F=0,Ua=0,wb=0,va=[],Aa={},ya={},ia,ka,Y=true,cb=null,Ia=null,$a=null,wa={},xa=null,ra=null,vb=0,Wa=0;this.debug=function(){var a="";a+="\ncounter_rows_rendered:  "+vb;a+="\ncounter_rows_removed:  "+Wa;a+="\nrenderedRows:  "+ga;a+="\nnumVisibleRows:  "+Ga;a+="\nmaxSupportedCssHeight:  "+
Ha;a+="\nn(umber of pages):  "+oa;a+="\n(current) page:  "+na;a+="\npage height (ph):  "+pa;a+="\nscrollDir:  "+fa;alert(a)};this.eval=function(a){return eval(a)};(function(){H=f(i);Q=g;y=Q.getLength||O;B=Q.getItem||P;Ha=ta();j=j||o();c=f.extend({},Yb,c);hb.width=c.defaultColumnWidth;if(c.enableColumnReorder&&!f.fn.sortable)throw Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded');Ma={commitCurrentEdit:Wb,cancelCurrentEdit:Xb};H.empty().attr("tabIndex",
0).attr("hideFocus",true).css("overflow","hidden").css("outline",0).addClass(R).addClass("ui-widget");/relative|absolute|fixed/.test(H.css("position"))||H.css("position","relative");ha=f("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(H);G=f("<div class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo(ha);aa=f("<div class='slick-header-secondary ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(H);
Jb=f("<div class='slick-header-columns-secondary' style='width:100000px' />").appendTo(aa);c.showSecondaryHeaderRow||aa.hide();x=f("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo(H);u=f("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo(x);Nb();x.height(H.innerHeight()-ha.outerHeight()-(c.showSecondaryHeaderRow?aa.outerHeight():0));M(G);x.bind("selectstart.ui",function(a){return f(a.target).is("input,textarea")});
X();Oa();Mb();nb();Ta();D();x.bind("scroll.slickgrid",pb);H.bind("resize.slickgrid",Ta);u.bind("keydown.slickgrid",Pb);u.bind("click.slickgrid",Qb);u.bind("dblclick.slickgrid",Sb);u.bind("contextmenu.slickgrid",Rb);u.bind("mouseover.slickgrid",Vb);ha.bind("contextmenu.slickgrid",Tb);ha.bind("click.slickgrid",Ub)})();f.extend(this,{slickGridVersion:"1.4.3",onSort:null,onHeaderContextMenu:null,onClick:null,onDblClick:null,onContextMenu:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,
onSelectedRowsChanged:null,onColumnsReordered:null,onColumnsResized:null,onBeforeMoveRows:null,onMoveRows:null,onCellChange:null,onBeforeEditCell:null,onBeforeCellEditorDestroy:null,onBeforeDestroy:null,onCurrentCellChanged:null,onCurrentCellPositionChanged:null,onCellRangeSelected:null,getColumns:function(){return d},setColumns:kb,getOptions:function(){return c},setOptions:function(a){if(c.editorLock.commitCurrentEdit()){U();c.enableAddRow!==a.enableAddRow&&sb(y());c=f.extend(c,a);ba()}},getData:function(){return Q},
setData:function(a,b){$();Q=g=a;y=Q.getLength||O;B=Q.getItem||P;b&&ma(0)},destroy:function(){c.editorLock.cancelCurrentEdit();if(m.onBeforeDestroy)m.onBeforeDestroy();c.enableColumnReorder&&G.sortable&&G.sortable("destroy");u.parents().unbind("scroll.slickgrid");H.unbind(".slickgrid");ea.remove();u.unbind("draginit dragstart dragend drag");H.empty().removeClass(R)},getColumnIndex:jb,autosizeColumns:ob,updateCell:function(a,b){if(w[a]){var e=f(w[a]).children().eq(b);if(e.length!==0){var h=d[b],k=B(a);
if(q&&t===a&&z===b)q.loadValue(k);else{e[0].innerHTML=k?Fa(h)(a,b,k[h.field],h,k):"";Ya(a)}}}},updateRow:Xa,removeRow:sb,removeRows:rb,removeAllRows:$,render:ba,invalidate:function(){Za();$();ba()},setHighlightedCells:function(a){var b,e,h,k;for(k in w)for(b=0;b<d.length;b++){h=ia&&ia[k]&&ia[k][d[b].id];e=a&&a[k]&&a[k][d[b].id];if(h!=e){e=f(w[k]).children().eq(b);e.length&&e.toggleClass(c.cellHighlightCssClass)}}ia=a},flashCell:function(a,b,e){e=e||100;if(w[a]){var h=f(w[a]).children().eq(b),k=function(n){n&&
setTimeout(function(){h.queue(function(){h.toggleClass(c.cellFlashingCssClass).dequeue();k(n-1)})},e)};k(4)}},getViewport:Ea,resizeCanvas:da,updateRowCount:Za,getCellFromPoint:Qa,getCellFromEvent:function(a){a=f(a.target).closest(".slick-cell",u);if(!a.length)return null;return{row:a.parent().attr("row")|0,cell:S(a[0])}},getCurrentCell:Hb,getCurrentCellNode:function(){return r},resetCurrentCell:Eb,navigatePrev:Db,navigateNext:Bb,navigateUp:Ab,navigateDown:Ja,navigateLeft:yb,navigateRight:zb,gotoCell:Fb,
editCurrentCell:Ka,getCellEditor:function(){return q},scrollRowIntoView:La,getSelectedRows:Ba,setSelectedRows:ua,getSecondaryHeaderRow:function(){return Jb[0]},showSecondaryHeaderRow:function(){c.showSecondaryHeaderRow=true;aa.slideDown("fast",da)},hideSecondaryHeaderRow:function(){c.showSecondaryHeaderRow=false;aa.slideUp("fast",da)},setSortColumn:Pa,getCurrentCellPosition:db,getGridPosition:function(){return Na(H[0])},getEditController:function(){return Ma}})},EditorLock:l,GlobalEditorLock:new l}})})(jQuery);
(function(f){f.extend(window,{SelectorCellFormatter:function(l,j,i,g,d){return!d?"":l},PercentCompleteCellFormatter:function(l,j,i){return i==null||i===""?"-":i<50?"<span style='color:red;font-weight:bold;'>"+i+"%</span>":"<span style='color:green'>"+i+"%</span>"},GraphicalPercentCompleteCellFormatter:function(l,j,i){if(i==null||i==="")return"";return"<span class='percent-complete-bar' style='background:"+(i<30?"red":i<70?"silver":"green")+";width:"+i+"%'></span>"},YesNoCellFormatter:function(l,j,
i){return i?"Yes":"No"},BoolCellFormatter:function(l,j,i){return i?"<img src='../images/tick.png'>":""},TaskNameFormatter:function(l,j,i,g,d){return"<span style='display:inline-block;height:1px;width:"+(2+15*d.indent)+"px'></span> <img src='../images/expand.gif'>&nbsp;"+i},ResourcesFormatter:function(l,j,i,g,d){l=d.resources;if(!l||l.length==0)return"";return g.width<50?(l.length>1?"<center><img src='../images/user_identity_plus.gif' ":"<center><img src='../images/user_identity.gif' ")+" title='"+
l.join(", ")+"'></center>":l.join(", ")},StarFormatter:function(l,j,i){return i?"<img src='../images/bullet_star.png' align='absmiddle'>":""},TextCellEditor:function(l){var j,i;this.init=function(){j=f("<INPUT type=text class='editor-text' />").appendTo(l.container).bind("keydown.nav",function(g){if(g.keyCode===f.ui.keyCode.LEFT||g.keyCode===f.ui.keyCode.RIGHT)g.stopImmediatePropagation()}).focus().select()};this.destroy=function(){j.remove()};this.focus=function(){j.focus()};this.loadValue=function(g){i=
g[l.column.field]||"";j.val(i);j[0].defaultValue=i;j.select()};this.serializeValue=function(){return j.val()};this.applyValue=function(g,d){g[l.column.field]=d};this.isValueChanged=function(){return!(j.val()==""&&i==null)&&j.val()!=i};this.validate=function(){if(l.column.validator){var g=l.column.validator(j.val());if(!g.valid)return g}return{valid:true,msg:null}};this.init()},IntegerCellEditor:function(l){var j,i;this.init=function(){j=f("<INPUT type=text class='editor-text' />");j.bind("keydown.nav",
function(g){if(g.keyCode===f.ui.keyCode.LEFT||g.keyCode===f.ui.keyCode.RIGHT)g.stopImmediatePropagation()});j.appendTo(l.container);j.focus().select()};this.destroy=function(){j.remove()};this.focus=function(){j.focus()};this.loadValue=function(g){i=g[l.column.field];j.val(i);j[0].defaultValue=i;j.select()};this.serializeValue=function(){return parseInt(j.val(),10)||0};this.applyValue=function(g,d){g[l.column.field]=d};this.isValueChanged=function(){return!(j.val()==""&&i==null)&&j.val()!=i};this.validate=
function(){if(isNaN(j.val()))return{valid:false,msg:"Please enter a valid integer"};return{valid:true,msg:null}};this.init()},DateCellEditor:function(l){var j,i,g=false;this.init=function(){j=f("<INPUT type=text class='editor-text' />");j.appendTo(l.container);j.focus().select();j.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../images/calendar.gif",beforeShow:function(){g=true},onClose:function(){g=false}});j.width(j.width()-18)};this.destroy=function(){f.datepicker.dpDiv.stop(true,
true);j.datepicker("hide");j.datepicker("destroy");j.remove()};this.show=function(){g&&f.datepicker.dpDiv.stop(true,true).show()};this.hide=function(){g&&f.datepicker.dpDiv.stop(true,true).hide()};this.position=function(d){g&&f.datepicker.dpDiv.css("top",d.top+30).css("left",d.left)};this.focus=function(){j.focus()};this.loadValue=function(d){i=d[l.column.field];j.val(i);j[0].defaultValue=i;j.select()};this.serializeValue=function(){return j.val()};this.applyValue=function(d,c){d[l.column.field]=
c};this.isValueChanged=function(){return!(j.val()==""&&i==null)&&j.val()!=i};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoSelectCellEditor:function(l){var j,i;this.init=function(){j=f("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>");j.appendTo(l.container);j.focus()};this.destroy=function(){j.remove()};this.focus=function(){j.focus()};this.loadValue=function(g){j.val((i=g[l.column.field])?"yes":"no");j.select()};
this.serializeValue=function(){return j.val()=="yes"};this.applyValue=function(g,d){g[l.column.field]=d};this.isValueChanged=function(){return j.val()!=i};this.validate=function(){return{valid:true,msg:null}};this.init()},YesNoCheckboxCellEditor:function(l){var j,i;this.init=function(){j=f("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>");j.appendTo(l.container);j.focus()};this.destroy=function(){j.remove()};this.focus=function(){j.focus()};this.loadValue=function(g){(i=g[l.column.field])?
j.attr("checked","checked"):j.removeAttr("checked")};this.serializeValue=function(){return j.attr("checked")};this.applyValue=function(g,d){g[l.column.field]=d};this.isValueChanged=function(){return j.attr("checked")!=i};this.validate=function(){return{valid:true,msg:null}};this.init()},PercentCompleteCellEditor:function(l){var j,i,g;this.init=function(){j=f("<INPUT type=text class='editor-percentcomplete' />");j.width(f(l.container).innerWidth()-25);j.appendTo(l.container);i=f("<div class='editor-percentcomplete-picker' />").appendTo(l.container);
i.append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>");i.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>");j.focus().select();i.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:g,slide:function(d,c){j.val(c.value)}});
i.find(".editor-percentcomplete-buttons button").bind("click",function(){j.val(f(this).attr("val"));i.find(".editor-percentcomplete-slider").slider("value",f(this).attr("val"))})};this.destroy=function(){j.remove();i.remove()};this.focus=function(){j.focus()};this.loadValue=function(d){j.val(g=d[l.column.field]);j.select()};this.serializeValue=function(){return parseInt(j.val(),10)||0};this.applyValue=function(d,c){d[l.column.field]=c};this.isValueChanged=function(){return!(j.val()==""&&g==null)&&
(parseInt(j.val(),10)||0)!=g};this.validate=function(){if(isNaN(parseInt(j.val(),10)))return{valid:false,msg:"Please enter a valid positive number"};return{valid:true,msg:null}};this.init()},StarCellEditor:function(l){function j(d){if(!(d.type=="keydown"&&d.which!=32)){i.css("opacity")=="1"?i.css("opacity",0.5):i.css("opacity",1);d.preventDefault();d.stopPropagation();return false}}var i,g;this.init=function(){i=f("<IMG src='../images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",
j).appendTo(l.container).focus()};this.destroy=function(){i.unbind("click keydown",j);i.remove()};this.focus=function(){i.focus()};this.loadValue=function(d){g=d[l.column.field];i.css("opacity",g?1:0.2)};this.serializeValue=function(){return i.css("opacity")=="1"};this.applyValue=function(d,c){d[l.column.field]=c};this.isValueChanged=function(){return g!=(i.css("opacity")=="1")};this.validate=function(){return{valid:true,msg:null}};this.init()},LongTextCellEditor:function(l){var j,i,g,d=this;this.init=
function(){var c=f("body");i=f("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(c);j=f("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(i);f("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(i);i.find("button:first").bind("click",this.save);i.find("button:last").bind("click",this.cancel);j.bind("keydown",
this.handleKeyDown);d.position(l.position);j.focus().select()};this.handleKeyDown=function(c){if(c.which==f.ui.keyCode.ENTER&&c.ctrlKey)d.save();else if(c.which==f.ui.keyCode.ESCAPE){c.preventDefault();d.cancel()}else if(c.which==f.ui.keyCode.TAB&&c.shiftKey){c.preventDefault();grid.navigatePrev()}else if(c.which==f.ui.keyCode.TAB){c.preventDefault();grid.navigateNext()}};this.save=function(){l.commitChanges()};this.cancel=function(){j.val(g);l.cancelChanges()};this.hide=function(){i.hide()};this.show=
function(){i.show()};this.position=function(c){i.css("top",c.top-5).css("left",c.left-5)};this.destroy=function(){i.remove()};this.focus=function(){j.focus()};this.loadValue=function(c){j.val(g=c[l.column.field]);j.select()};this.serializeValue=function(){return j.val()};this.applyValue=function(c,o){c[l.column.field]=o};this.isValueChanged=function(){return!(j.val()==""&&g==null)&&j.val()!=g};this.validate=function(){return{valid:true,msg:null}};this.init()}})})(jQuery);
