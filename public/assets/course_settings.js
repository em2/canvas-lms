jQuery.cookie=function(f,b,c){if(typeof b!="undefined"){c=c||{};if(b===null){b="";c.expires=-1}var d="";if(c.expires&&(typeof c.expires=="number"||c.expires.toUTCString)){if(typeof c.expires=="number"){d=new Date;d.setTime(d.getTime()+c.expires*864E5)}else d=c.expires;d="; expires="+d.toUTCString()}var g=c.path?"; path="+c.path:"",j=c.domain?"; domain="+c.domain:"";c=c.secure?"; secure":"";document.cookie=[f,"=",encodeURIComponent(b),d,g,j,c].join("")}else{b=null;if(document.cookie&&document.cookie!=
""){c=document.cookie.split(";");for(d=0;d<c.length;d++){g=jQuery.trim(c[d]);if(g.substring(0,f.length+1)==f+"="){b=decodeURIComponent(g.substring(f.length+1));break}}}return b}};
I18n.scoped("user_lists",function(f){var b=$("#user_lists_processed_person_template").removeAttr("id").detach(),c=$("#user_list_no_valid_users"),d=$("#user_list_with_errors"),g=$("#user_lists_processed_people"),j=$("#user_list_duplicates_found"),h=$("#enroll_users_form"),l=$("#enrollment_blank").removeAttr("id").hide(),k=$("#user_lists_path").attr("href"),a=INST.UserLists={init:function(){a.showTextarea();h.find(".cancel_button").click(function(){$(".add_users_link").show();h.hide()}).end().find(".go_back_button").click(a.showTextarea).end().find(".verify_syntax_button").click(function(e){e.preventDefault();
a.showProcessing();$.ajaxJSON(k,"POST",h.getFormData(),a.showResults)}).end().submit(function(e){e.preventDefault();e.stopPropagation();h.find(".add_users_button").text(f.t("adding_users","Adding Users...")).attr("disabled",true);$.ajaxJSON(h.attr("action"),"POST",h.getFormData(),function(i){h.find(".user_list").val("");a.showTextarea();if(!i||!i.length)return false;$.each(i,function(){a.addUserToList(this.enrollment)});$.flashMessage(f.t("users_added",{one:"1 user added",other:"%{count} users added"},
{count:i.length}))},function(){$.flashError(f.t("users_adding_failed","Failed to enroll users"))})});h.find("#enrollment_type").change(function(){$("#limit_privileges_to_course_section_holder").showIf($(this).val()=="TeacherEnrollment"||$(this).val()=="TaEnrollment")}).change();$(".unenroll_user_link").click(function(e){e.preventDefault();e.stopPropagation();$(this).hasClass("cant_unenroll")?alert(f.t("cant_unenroll","This user was automatically enrolled using the campus enrollment system, so they can't be manually removed.  Please contact your system administrator if you have questions.")):
$(this).parents(".user").confirmDelete({message:f.t("delete_confirm","Are you sure you want to remove this user?"),url:$(this).attr("href"),success:function(){$(this).fadeOut(function(){a.updateCounts()})}})})},showTextarea:function(){h.find(".add_users_button, .go_back_button, #user_list_parsed").hide();h.find(".verify_syntax_button, .cancel_button, #user_list_textarea_container").show().removeAttr("disabled");h.find(".user_list").removeAttr("disabled").loadingImage("remove").focus().select();h.find(".verify_syntax_button").attr("disabled",
false).text(f.t("buttons.continue","Continue..."))},showProcessing:function(){h.find(".verify_syntax_button").attr("disabled",true).text(f.t("messages.processing","Processing..."));h.find(".user_list").attr("disabled",true).loadingImage()},showResults:function(e){h.find(".add_users_button, .go_back_button, #user_list_parsed").show();h.find(".add_users_button").attr("disabled",false).text(f.t("add_n_users",{one:"OK Looks Good, Add This 1 User",other:"OK Looks Good, Add These %{count} Users"},{count:e.users.length}));
h.find(".verify_syntax_button, .cancel_button, #user_list_textarea_container").hide();h.find(".user_list").removeAttr("disabled").loadingImage("remove");g.html("").show();if(!e||!e.users||!e.users.length){c.appendTo(g);h.find(".add_users_button").hide()}else{e.errored_users&&e.errored_users.length&&d.appendTo(g).find(".message_content").html(f.t("user_parsing_errors",{one:"There was 1 error parsing that list of users.",other:"There were %{count} errors parsing that list of users."},{count:e.errored_users.length})+
" "+f.t("invalid_users_notice","There may be some that were invalid, and you might need to go back and fix any errors.")+" "+f.t("users_to_add",{one:"If you proceed as is, 1 user will be added.",other:"If you proceed as is, %{count} users will be added."},{count:e.users.length}));e.duplicates&&e.duplicates.length&&j.appendTo(g).find(".message_content").html(f.t("duplicate_users",{one:"1 duplicate user found, duplicates have been removed.",other:"%{count} duplicate user found, duplicates have been removed."},
{count:e.duplicates.length}));$.each(e.users,function(){b.clone(true).fillTemplateData({data:this}).appendTo(g).show()})}},updateCounts:function(){$.each(["student","teacher","ta","teacher_and_ta","student_and_observer","observer"],function(){$("."+this+"_count").text($("."+this+"_enrollments .user:visible").length)})},addUserToList:function(e){var i=$.underscore(e.type),m=$(".user_list."+i+"s");m.length||(m=i=="student_enrollment"||i=="observer_enrollment"?$(".user_list.student_and_observer_enrollments"):
$(".user_list.teacher_and_ta_enrollments"));m.find(".none").remove();e.invitation_sent_at=f.t("just_now","Just Now");var n=null;m.find(".user").each(function(){var o=$(this).getTemplateData({textValues:["name"]}).name;if(o&&e.name&&o.toLowerCase()>e.name.toLowerCase()){n=$(this);return false}});if(!$("#enrollment_"+e.id).length){i=l.clone(true).fillTemplateData({textValues:["name","membership_type","email"],id:"enrollment_"+e.id,hrefValues:["id","user_id","pseudonym_id","communication_channel_id"],
data:e}).addClass(i).removeClass("nil_class user_").addClass("user_"+e.user_id).toggleClass("pending",e.workflow_state!="active")[n?"insertBefore":"appendTo"](n||m).show().animate({backgroundColor:"#FFEE88"},1E3).animate({display:"block"},2E3).animate({backgroundColor:"#FFFFFF"},2E3,function(){$(this).css("backgroundColor","")});i.parents(".user_list").scrollToVisible(i)}a.updateCounts()}};$(INST.UserLists.init)});
I18n.scoped("course_settings",function(f){var b={status:null,checkup:function(){$.ajaxJSON($("#publish_to_sis_form").attr("action"),"GET",{},function(c){if(c.hasOwnProperty("sis_publish_overall_status")){b.status=c.sis_publish_overall_status;b.update(c.hasOwnProperty("sis_publish_statuses")?c.sis_publish_statuses:{})}})},update:function(c,d){var g=$("#publish_grades_link"),j=$("#publish_grades_error");if(b.status=="published"){j.hide();g.html(f.t("links.republish","Republish grades to SIS"));g.removeClass("disabled")}else if(b.status==
"publishing"||b.status=="pending"){j.hide();g.html(f.t("links.publishing","Publishing grades to SIS..."));d||setTimeout(b.checkup,5E3);g.addClass("disabled")}else{if(b.status=="unpublished"){j.hide();g.html(f.t("links.publish","Publish grades to SIS"))}else{j.show();g.html(f.t("links.republish","Republish grades to SIS"))}g.removeClass("disabled")}$messages=$("#publish_grades_messages");$messages.empty();$.each(c,function(h,l){var k=$("<span/>");k.text(h);var a=$("<li/>");a.append(k);a.append(" - <b>"+
l.length+"</b>");$messages.append(a)})},publish:function(){if(!(b.status=="publishing"||b.status=="pending"||b.status==null)){if(b.status=="published"){if(!confirm(f.t("confirm.re_publish_grades","Are you sure you want to republish these grades to the student information system?")))return}else if(!confirm(f.t("confirm.publish_grades","Are you sure you want to publish these grades to the student information system? You should only do this if all your grades have been finalized.")))return;var c=$("#publish_to_sis_form");
b.status="publishing";b.update({},true);var d={published:1,publishing:1,pending:1},g=function(){b.status="unknown";$.flashError(f.t("errors.publish_grades","Something went wrong when trying to publish grades to the student information system. Please try again later."));b.update({})};$.ajaxJSON(c.attr("action"),"POST",c.getFormData(),function(j){if(!j.hasOwnProperty("sis_publish_overall_status")||!d.hasOwnProperty(j.sis_publish_overall_status))g(null,null,f.t("errors.invalid_sis_status","Invalid SIS publish status"),
null);else{b.status=j.sis_publish_overall_status;b.update(j.hasOwnProperty("sis_publish_statuses")?j.sis_publish_statuses:{})}},g)}}};$(document).ready(function(){var c=$("#add_section_form"),d=$("#edit_section_form"),g=$("#course_form"),j=$(".hashtag_form"),h=$("#course_hashtag"),l=$("#enroll_users_form"),k=$("#enrollment_dialog");$("#course_details_tabs").tabs({cookie:{}}).show();c.formSubmit({required:["course_section[name]"],beforeSubmit:function(){c.find("button").attr("disabled",true).text(f.t("buttons.adding_section",
"Adding Section..."))},success:function(a){a=a.course_section;var e=$(".section_blank:first").clone(true).attr("class","section"),i=$("<option/>");c.find("button").attr("disabled",false).text(f.t("buttons.add_section","Add Section"));e.fillTemplateData({data:a,hrefValues:["id"]});$("#course_section_id_holder").show();i.val(a.id).text(a.name).addClass("option_for_section_"+a.id);$("#sections .section_blank").before(e);e.slideDown();$("#course_section_name").val()},error:function(a){c.formErrors(a).find("button").attr("disabled",
false).text(f.t("errors.section","Add Section Failed, Please Try Again"))}});$(".cant_delete_section_link").click(function(){alert($(this).attr("title"));return false});d.formSubmit({beforeSubmit:function(a){d.hide();var e=d.parents(".section");e.find(".name").text(a["course_section[name]"]).show();e.loadingImage({image_size:"small"});return e},success:function(a,e){var i=a.course_section;e.loadingImage("remove");$(".option_for_section_"+i.id).text(i.name)},error:function(a,e){e.loadingImage("remove").find(".edit_section_link").click();
d.formErrors(a)}}).find(":text").bind("blur",function(){d.submit()}).keycodes("return esc",function(a){if(a.keyString=="return")d.submit();else{$(this).parents(".section").find(".name").show();$("body").append(d.hide())}});$(".edit_section_link").click(function(){var a=$(this),e=a.parents(".section"),i=e.getTemplateData({textValues:["name"]});d.fillFormData(i,{object_name:"course_section"});e.find(".name").hide().after(d.show());d.attr("action",a.attr("href"));d.find(":text:first").focus().select();
return false});$(".delete_section_link").click(function(){$(this).parents(".section").confirmDelete({url:$(this).attr("href"),message:f.t("confirm.delete_section","Are you sure you want to delete this section?"),success:function(){$(this).slideUp(function(){$(this).remove()})}});return false});$("#nav_form").submit(function(){function a(i){if(i=$(i).attr("id")){i=i.replace(/^nav_edit_tab_id_/,"");if(i.length>0){i.match(/context/)||(i=parseInt(i,10));return i}}return null}tab_id_regex=/(\d+)$/;var e=
[];$("#nav_enabled_list li").each(function(){var i=a(this);i!==null&&e.push({id:i})});$("#nav_disabled_list li").each(function(){var i=a(this);i!==null&&e.push({id:i,hidden:true})});$("#tabs_json").val(JSON.stringify(e));return true});$(".edit_nav_link").click(function(a){a.preventDefault();$("#nav_form").dialog("close").dialog({modal:true,resizable:false,width:400}).dialog("open")});$("#nav_enabled_list, #nav_disabled_list").sortable({items:"li.enabled",connectWith:".connectedSortable",axis:"y"}).disableSelection();
$(".hashtag_dialog_link").click(function(a){a.preventDefault();$("#hashtag_dialog").dialog("close").dialog({autoOpen:false,title:f.t("titles.hashtag_help","What's a Hashtag?"),width:500}).dialog("open")});$(".close_dialog_button").click(function(){$("#hashtag_dialog").dialog("close")});$("#course_hashtag").bind("blur change keyup",function(){var a=$(this).val()||"";a=a.replace(/(\s)+/g,"_").replace(/#/,"");$("#hashtag_options").showIf(a&&a!=="");$(this).val(a)});$(document).fragmentChange(function(a,
e){function i(m){$("#tab-users-link").click();$(".add_users_link:visible").click();$("#enroll_users_form select[name='enrollment_type']").val(m)}if(e=="#add_students")i("StudentEnrollment");else if(e=="#add_tas")i("TaEnrollment");else e=="#add_teacher"&&i("TeacherEnrollment")});$(".edit_course_link").click(function(a){a.preventDefault();$("#course_form").addClass("editing").find(":text:first").focus().select();$("#course_account_id_lookup").autocomplete({source:$("#course_account_id_url").attr("href"),
select:function(e,i){$("#course_account_id").val(i.item.id)}});j.showIf(h.text().length>0);h.triggerHandler("blur")});$(".move_course_link").click(function(a){a.preventDefault();$("#move_course_dialog").dialog("close").dialog({autoOpen:false,title:f.t("titles.move_course","Move Course"),width:500}).dialog("open")});$("#move_course_dialog").delegate(".cancel_button","click",function(){$("#move_course_dialog").dialog("close")});g.find(".grading_standard_checkbox").change(function(){g.find(".grading_standard_link").showIf($(this).attr("checked"))}).change();
g.formSubmit({processData:function(a){a["course[hashtag]"]=(a["course[hashtag]"]||"").replace(/\s/g,"_").replace(/#/g,"");if(a["course[start_at]"])a["course[start_at]"]+=" 12:00am";if(a["course[conclude_at]"])a["course[conclude_at]"]+=" 11:55pm";return a},beforeSubmit:function(a){$(this).loadingImage().removeClass("editing");$(this).find(".readable_license,.account_name,.term_name,.grading_scheme_set").text("...");$(this).find(".storage_quota_mb").text(a["course[storage_quota_mb]"]);$(".course_form_more_options").hide()},
success:function(a){a=a.course;a.start_at=$.parseFromISO(a.start_at).datetime_formatted;a.conclude_at=$.parseFromISO(a.conclude_at).datetime_formatted;a.is_public=a.is_public?f.t("public_course","Public"):f.t("private_course","Private");a.indexed=a.indexed?f.t("indexed_course","Included in public course index"):"";a.grading_scheme_set=a.grading_standard_title||(a.grading_standard_id?f.t("grading_standard_set","Currently Set"):f.t("grading_standard_unset","Not Set"));a.restrict_dates=a.restrict_enrollments_to_course_dates?
f.t("course_dates_enforced","Users can only participate in the course between these dates"):f.t("course_dates_unenforced","These dates will not affect course availability");a.locale=$("#course_locale option[value='"+(a.locale||"")+"']").text();if(a.locale!=g.find(".locale").text())location.reload();else{$(this).loadingImage("remove");$("#course_form .public_options").showIf(a.is_public);$("#course_form .self_enrollment_message").css("display",a.self_enrollment?"":"none");$("#course_form").fillTemplateData({data:a});
$(".hashtag_form").showIf($("#course_hashtag").text().length>0)}},error:function(a){$(this).loadingImage("remove");$(".edit_course_link").click();$(this).formErrors(a)}}).find(".cancel_button").click(function(){g.removeClass("editing");j.showIf(h.text().length>0);$(".course_form_more_options").hide()}).end().find(":text:not(.date_entry)").keycodes("esc",function(){g.find(".cancel_button:first").click()});l.hide();$(".add_users_link").click(function(a){$(this).hide();a.preventDefault();l.show();$("html,body").scrollTo(l);
l.find("textarea").focus().select()});$(".associate_user_link").click(function(a){a.preventDefault();a=$(this).parents(".user").getTemplateData({textValues:["name","associated_user_id","id"]});link_enrollment.choose(a.name,a.id,a.associated_user_id,function(e){e&&$("#enrollment_"+e.id).find(".associated_user.associated").showIf(e.associated_user_id).end().find(".associated_user.unassociated").showIf(!e.associated_user_id).end().fillTemplateData({data:e})})});$(".course_info").attr("title",f.t("titles.click_to_edit",
"Click to Edit")).click(function(a){if(a.target.nodeName!="INPUT"){$(".edit_course_link:first").click();a=$(this).parents("td").find(".course_form");a.length&&a.focus().select()}});$(".course_form_more_options_link").click(function(a){a.preventDefault();$(".course_form_more_options").slideToggle()});$(".user_list").delegate(".user","mouseover",function(){var a=$(this),e=a.attr("title"),i=f.t("details.re_send_invitation","This user has not yet accepted their invitation.  Click to re-send invitation.");
e!=i&&a.data("real_title",e);a.hasClass("pending")?a.attr("title",i).css("cursor","pointer"):a.attr("title",$(this).data("real_title")||f.t("defaults.user_name","User")).css("cursor","")});k.find(".cancel_button").click(function(){k.dialog("close")});$(".user_list").delegate(".user_information_link","click",function(){var a=$(this).closest(".user"),e=a.hasClass("pending"),i=a.getTemplateData({textValues:["name","invitation_sent_at"]}),m=a.parents(".teacher_enrollments,.ta_enrollments").length>0;i.re_send_invitation_link=
f.t("links.re_send_invitation","Re-Send Invitation");k.data("user",a).find(".re_send_invitation_link").attr("href",a.find(".re_send_confirmation_url").attr("href")).end().find(".student_enrollment_re_send").showIf(e&&!m).end().find(".admin_enrollment_re_send").showIf(e&&m).end().find(".accepted_enrollment_re_send").showIf(!e).end().find(".invitation_sent_at").showIf(e).end().fillTemplateData({data:i}).dialog("close").dialog({autoOpen:false,title:f.t("titles.enrollment_details","Enrollment Details")}).dialog("open");
return false});$(".user_list .edit_section_link").click(function(a){a.preventDefault();$user=$(this).closest(".user");$user.find(".section").toggle();$user.find(".enrollment_course_section_form").toggle()});$(".user_list .enrollment_course_section_form #course_section_id").change(function(){var a=$(this).parent("form"),e=$(this),i=a.prev(".section");$.ajaxJSON(a.attr("action"),"POST",a.getFormData(),function(){i.html(e.find('option[value="'+e.val()+'"]').html());i.toggle();a.toggle()},function(){$.flashError(f.t("errors.move_user",
"Something went wrong moving the user to the new section. Please try again later."))})});k.find(".re_send_invitation_link").click(function(a){a.preventDefault();var e=$(this);e.text(f.t("links.re_sending_invitation","Re-Sending Invitation..."));a=e.attr("href");$.ajaxJSON(a,"POST",{},function(){k.fillTemplateData({data:{invitation_sent_at:f.t("invitation_sent_now","Just Now")}});e.text(f.t("invitation_sent","Invitation Sent!"));var i=k.data("user");i&&i.fillTemplateData({data:{invitation_sent_at:f.t("invitation_sent_now",
"Just Now")}})},function(){e.text(f.t("errors.invitation","Invitation Failed.  Please try again."))})});$(".date_entry").date_field();$().data("current_default_wiki_editing_roles",$("#course_default_wiki_editing_roles").val());$("#course_default_wiki_editing_roles").change(function(){var a=$(this);$(".changed_default_wiki_editing_roles").showIf(a.val()!=$().data("current_default_wiki_editing_roles"));$(".default_wiki_editing_roles_change").text(a.find(":selected").text())});$(".re_send_invitations_link").click(function(a){a.preventDefault();
var e=$(this),i=f.t("links.re_send_all","Re-Send All Unaccepted Invitations");e.text(f.t("buttons.re_sending_all","Re-Sending Unaccepted Invitations...")).attr("disabled",true);$.ajaxJSON(e.attr("href"),"POST",{},function(){e.text(f.t("buttons.re_sent_all","Re-Sent All Unaccepted Invitations!")).attr("disabled",false);$(".user_list .user.pending").each(function(){$(this).fillTemplateData({data:{invitation_sent_at:f.t("invitation_sent_now","Just Now")}})});setTimeout(function(){e.text(i)},2500)},function(){e.text(f.t("errors.re_send_all",
"Send Failed, Please Try Again")).attr("disabled",false)})});$("#enrollment_type").change(function(){$(".teacherless_invite_message").showIf($(this).find(":selected").hasClass("teacherless_invite"))});$(".is_public_checkbox").change(function(){$(".public_options").showIf($(this).attr("checked"))}).change();$(".self_enrollment_checkbox").change(function(){$(".open_enrollment_holder").showIf($(this).attr("checked"))}).change();$("#publish_grades_link").click(function(a){a.preventDefault();b.publish()});
typeof sisPublishEnabled!="undefined"&&sisPublishEnabled&&b.checkup();$(".reset_course_content_button").click(function(a){a.preventDefault();$("#reset_course_content_dialog").dialog("close").dialog({autoOpen:false,title:f.t("titles.reset_course_content_dialog_help","Reset Course Content"),width:500}).dialog("open")});$("#reset_course_content_dialog .cancel_button").click(function(){$("#reset_course_content_dialog").dialog("close")});$.scrollSidebar()})});
I18n.scoped("external_tools",function(f){$(document).ready(function(){var b=$("#external_tools_dialog");$(".add_tool_link").click(function(c){c.preventDefault();b.dialog("close").dialog({autoOpen:false,title:f.t("titles.edit_external_tool","Edit External Tool"),width:600,height:420}).dialog("open");b.find(".shared_secret_note").hide();b.find("form").attr("method","POST").attr("action",b.find(".external_tools_url").attr("href"));b.fillFormData({domain:"",url:"",config_url:"",config_xml:"",description:"",
name:"",custom_fields_string:"",privacy:"anonymous",consumer_key:"",shared_secret:""},{object_name:"external_tool"});b.find(".config_type_option").show();$("#external_tool_match_by").val("domain").change();$("#external_tool_config_type").val("manual").change()});b.find("form").formSubmit({beforeSubmit:function(){$(this).find("button").attr("disabled",true).filter(".save_button").text(f.t("messages.saving_tool_settings","Saving Tool Settings..."))},success:function(c){$(this).find("button").attr("disabled",
false).filter(".save_button").text(f.t("buttons.save_tool_settings","Save Tool Settings"));b.dialog("close");var d=$("#external_tool_"+c.id);if(d.length==0){d=$("#external_tool_blank").clone(true).removeAttr("id");$("#external_tools").append(d)}d.fillTemplateData({data:c,dataValues:["id","workflow_state"],hrefValues:["id"],id:"external_tool_"+c.id});d.toggleClass("has_editor_button",c.has_editor_button).toggleClass("has_resource_selection",c.has_resource_selection).toggleClass("has_course_navigation",
c.has_course_navigation).toggleClass("has_user_navigation",c.has_user_navigation).toggleClass("has_account_navigation",c.has_account_navigation);d.find(".tool_url").showIf(c.url).end().find(".tool_domain").showIf(c.domain);d.show()},error:function(){$(this).find("button").attr("disabled",false).filter(".save_button").text(f.t("errors.save_tool_settings_failed","Save Tool Settings Failed"))}});b.find(".cancel_button").click(function(){b.dialog("close")});$("#external_tools").delegate(".edit_tool_link",
"click",function(c){c.preventDefault();c=$(this).parents(".external_tool");var d=c.getTemplateData({textValues:["name","description","domain","url","consumer_key","custom_fields_string"],dataValues:["id","workflow_state"]});d.privacy_level=d.workflow_state;$("#external_tool_match_by").val(d.url?"url":"domain").change();b.find(".shared_secret_note").show();b.find("form").attr("method","PUT").attr("action",c.find(".update_tool_url").attr("rel"));b.fillFormData(d,{object_name:"external_tool"});b.dialog("close").dialog({autoOpen:false,
title:f.t("titles.edit_external_tool","Edit External Tool"),width:600,height:420}).dialog("open");b.find(".config_type_option").hide();$("#external_tool_config_type").val("manual").change()}).delegate(".delete_tool_link","click",function(c){c.preventDefault();c=$(this).parents(".external_tool");var d=c.find(".update_tool_url").attr("rel");c.confirmDelete({url:d,message:f.t("prompts.remove_tool","Are you sure you want to remove this tool?  Any courses using this tool will no longer work."),success:function(){$(this).slideUp(function(){$(this).remove()})}})});
$("#external_tool_match_by").change(function(){$(this).val()=="url"?$(this).parents("form").find(".tool_domain").hide().find(":text").val("").end().end().find(".tool_url").show():$(this).parents("form").find(".tool_url").hide().find(":text").val("").end().end().find(".tool_domain").show()});$("#external_tool_config_type").change(function(){$("#external_tool_form .config_type").hide();$("#external_tool_form .config_type."+$(this).val()).show()})})});
I18n.scoped("grading_standards",function(f){$(document).ready(function(){$(".add_standard_link").click(function(b){b.preventDefault();b=$("#grading_standard_blank").clone(true).attr("id","grading_standard_new");$("#standards").append(b.show());b.find(".edit_grading_standard_link").click()});$(".edit_letter_grades_link").click(function(b){b.preventDefault();$("#edit_letter_grades_form").dialog("close").dialog({title:f.t("titles.grading_scheme_info","View/Edit Grading Scheme"),autoOpen:false,width:600,
height:310}).dialog("open")});$(".grading_standard .delete_grading_standard_link").click(function(b){b.preventDefault();b=$(this).parents(".grading_standard");var c=b.find(".update_grading_standard_url").attr("href");b.confirmDelete({url:c,message:f.t("confirm.delete_grading_scheme","Are you sure you want to delete this grading scheme?"),success:function(){$(this).slideUp(function(){$(this).remove()})},error:function(){$.flashError(f.t("errors.cannot_delete_grading_scheme","There was a problem deleting this grading scheme"))}})});
$(".grading_standard .remove_grading_standard_link").click(function(b){function c(){$("#edit_assignment_form .grading_standard_id").val("");$("#assignment_grading_type").val("points").change();$("#course_grading_standard_enabled").attr("checked",false).change();$("#course_form .grading_scheme_set").text(f.t("grading_scheme_not_set","Not Set"));d.addClass("editing");d.find(".update_grading_standard_url").attr("href",$("#update_grading_standard_url").attr("href"));var j={title:"",id:null,data:$.parseJSON($("#default_grading_standard_data").val())};
d.fillTemplateData({data:j,id:"grading_standard_blank",avoid:".find_grading_standard",hrefValues:["id"]}).find(".edit_grading_standard_link").removeClass("read_only");d.triggerHandler("grading_standard_updated",j);$("#edit_letter_grades_form").dialog("close");d.undim()}b.preventDefault();if(!confirm(f.t("confirm.unlink_grading_scheme","Are you sure you want to unlink this grading scheme?")))return false;var d=$(this).parents(".grading_standard");d.dim();b={"assignment[grading_standard_id]":"","assignment[grading_type]":"points"};
var g=$("#edit_assignment_form").attr("action");if($("#update_course_url").length){b={"course[grading_standard_id]":""};g=$("#update_course_url").attr("href")}else if(g&&g.match(/assignments$/))g=null;g?$.ajaxJSON(g,"PUT",b,c,function(){$.flashError(f.t("errors.cannot_remove_grading_scheme","There was a problem removing this grading scheme.  Please reload the page and try again."))}):c()});$(".grading_standard .edit_grading_standard_link").click(function(b){b.preventDefault();var c=$(this).parents(".grading_standard");
c.addClass("editing");$(this).hasClass("read_only")&&c.attr("id","grading_standard_blank");c.find(".grading_standard_row").each(function(){var d=$(this).getTemplateData({textValues:["min_score","name"]});$(this).find(".standard_value").val(d.min_score).end().find(".standard_name").val(d.name)});$("#standards").ifExists(function(){$("html,body").scrollTo(c)});c.find(":text:first").blur().focus().select()});$(".grading_standard .grading_standard_brief").find(".collapse_data_link,.expand_data_link").click(function(b){b.preventDefault();
b=$(this).parents(".grading_standard_brief");b.find(".collapse_data_link,.expand_data_link").toggle();b.find(".details").slideToggle()});$(".grading_standard_select").live("click",function(b){b.preventDefault();b=$(this).getTemplateData({textValues:["id"]}).id;$(".grading_standard .grading_standards_select .grading_standard_select").removeClass("selected_side_tab");$(this).addClass("selected_side_tab");$(".grading_standard .grading_standards .grading_standard_brief").hide();$("#grading_standard_brief_"+
b).show()});$(".grading_standard").find(".find_grading_standard_link,.cancel_find_grading_standard_link").click(function(b){b.preventDefault();$(this).parents(".grading_standard").find(".display_grading_standard,.find_grading_standard").toggle();var c=$(this).parents(".grading_standard").find(".find_grading_standard:visible");if(c.length>0&&!c.hasClass("loaded")){c.find(".loading_message").text(f.t("status.loading_grading_standards","Loading Grading Standards..."));b=c.find(".grading_standards_url").attr("href");
$.ajaxJSON(b,"GET",{},function(d){if(d.length===0)c.find(".loading_message").text(f.t("no_grading_standards","No grading standards found"));else{c.find(".loading_message").remove();for(var g in d){var j=d[g].grading_standard;j.user_name=j.display_name;var h=c.find(".grading_standards_select .grading_standard_select.blank:first").clone(true);h.fillTemplateData({data:j}).data("context_code",j.context_code).removeClass("blank");c.find(".grading_standards_select").append(h.show());h=c.find(".grading_standard_brief.blank:first").clone(true);
h.fillTemplateData({data:j,id:"grading_standard_brief_"+j.id}).data("context_code",j.context_code);h.removeClass("blank");for(var l=0;l<j.data.length;l++){var k=j.data[l];k={name:k[0],value:l==0?100:"< "+j.data[l-1][1]*100,next_value:k[1]*100};var a=h.find(".details_row.blank:first").clone(true);a.removeClass("blank");a.fillTemplateData({data:k});h.find(".details > table").append(a.show())}c.find(".grading_standards").append(h)}c.find(".grading_standards_select .grading_standard_select:visible:first a:first").click()}c.addClass("loaded");
c.find(".grading_standards_holder").slideDown()},function(){c.find(".loading_message").text(f.t("errors.cannot_load_grading_standards","Loading Grading Standards Failed.  Please Try Again"))})}});$(".grading_standard .grading_standard_brief .select_grading_standard_link").click(function(b){b.preventDefault();b=$(this).parents(".grading_standard_brief").getTemplateData({textValues:["id","title"],dataValues:["context_code"]});var c=b.id,d=b.title,g=[];$(this).parents(".grading_standard_brief").find(".details_row:not(.blank)").each(function(){var j=
$(this).find(".name").text(),h=parseFloat($(this).find(".next_value").text())/100;if(isNaN(h))h="";g.push([j,h])});$(this).parents(".grading_standard").triggerHandler("grading_standard_updated",{id:c,data:g,title:d});c=$("#edit_letter_grades_form").data().context_code;$(this).parents(".grading_standard").find(".edit_grading_standard_link").toggleClass("read_only",c!=b.context_code);$(this).parents(".find_grading_standard").find(".cancel_find_grading_standard_link").click()});$(".grading_standard .cancel_button").click(function(){$(this).parents(".grading_standard").removeClass("editing").find(".insert_grading_standard").hide();
var b=$(this).parents(".grading_standard");b.find(".to_add").remove();b.find(".to_delete").removeClass("to_delete").show();b.attr("id")=="grading_standard_new"&&b.remove()});$(".grading_standard").bind("grading_standard_updated",function(b,c){var d=$(this);d.addClass("editing");d.find(".update_grading_standard_url").attr("href",$("#update_grading_standard_url").attr("href"));d.fillTemplateData({data:c,id:"grading_standard_"+(c.id||"blank"),avoid:".find_grading_standard",hrefValues:["id"]}).fillFormData(c,
{object_name:"grading_standard"});var g=d.find(".insert_grading_standard:first").clone(true),j=d.find(".grading_standard_row:first").clone(true).removeClass("blank"),h=d.find(".grading_standard_data");h.empty();h.append(g.clone(true).show());for(var l in c.data){var k=j.clone(true),a=c.data[l];k.removeClass("to_delete").removeClass("to_add");k.find(".standard_name").val(a[0]).attr("name","grading_standard[standard_data][scheme_"+l+"][name]").end().find(".standard_value").val(a[1]*100).attr("name",
"grading_standard[standard_data][scheme_"+l+"][value]");h.append(k.show());h.append(g.clone(true).show())}h.find(":text:first").blur();h.append(j.hide());h.append(g.hide());d.find(".grading_standard_row").each(function(){$(this).find(".name").text($(this).find(".standard_name").val()).end().find(".min_score").text($(this).find(".standard_value").val()).end().find(".max_score").text($(this).find(".edit_max_score").text())});d.removeClass("editing");d.find(".insert_grading_standard").hide();if(c.id){d.find(".remove_grading_standard_link").removeClass("read_only");
d={"assignment[grading_standard_id]":c.id,"assignment[grading_type]":"letter_grade"};g=$("#edit_assignment_form").attr("action");$("#edit_assignment_form .grading_standard_id").val(c.id);if($("#update_course_url").length){d={"course[grading_standard_id]":c.id};g=$("#update_course_url").attr("href")}else if(g&&g.match(/assignments$/))g=null;g&&$.ajaxJSON(g,"PUT",d,function(e){$("#course_form .grading_scheme_set").text(e&&e.course&&e.course.grading_standard_title||f.t("grading_scheme_currently_set",
"Currently Set"))},function(){})}else d.find(".remove_grading_standard_link").addClass("read_only")});$(".grading_standard .save_button").click(function(){var b=$(this).parents(".grading_standard"),c=$("#edit_letter_grades_form .create_grading_standard_url,#create_grading_standard_url").attr("href"),d="POST";if(b.attr("id")!="grading_standard_blank"&&b.attr("id")!="grading_standard_new"){c=$(this).parents(".grading_standard").find(".update_grading_standard_url").attr("href");d="PUT"}var g=b.find(".standard_title,.grading_standard_row:visible").getFormData();
b.find("button").attr("disabled",true).filter(".save_button").text(f.t("status.saving","Saving..."));$.ajaxJSON(c,d,g,function(j){j=j.grading_standard;b.find("button").attr("disabled",false).filter(".save_button").text(f.t("buttons.save","Save"));b.triggerHandler("grading_standard_updated",j)},function(){b.find("button").attr("disabled",false).filter(".save_button").text(f.t("errors.save_failed","Save Failed"))})});$(".grading_standard thead").mouseover(function(){if($(this).parents(".grading_standard").hasClass("editing")){$(this).parents(".grading_standard").find(".insert_grading_standard").hide();
$(this).parents(".grading_standard").find(".insert_grading_standard:first").show()}});$(".grading_standard .grading_standard_row").mouseover(function(b){if($(this).parents(".grading_standard").hasClass("editing")){$(this).parents(".grading_standard").find(".insert_grading_standard").hide();b=b.pageY;var c=$(this).offset(),d=$(this).height();b>c.top+d/2?$(this).next(".insert_grading_standard").show():$(this).prev(".insert_grading_standard").show()}});$(".grading_standard .insert_grading_standard_link").click(function(b){b.preventDefault();
if(!($(this).parents(".grading_standard").find(".grading_standard_row").length>40)){b=$(this).parents(".grading_standard");for(var c=b.find(".grading_standard_row:first").clone(true).removeClass("blank"),d=b.find(".insert_grading_standard:first").clone(true),g=null;!g||$(".standard_name[name='grading_standard[standard_data][scheme_"+g+"][name]']").length>0;)g=Math.round(Math.random()*1E4);c.find(".standard_name").val("-").attr("name","grading_standard[standard_data][scheme_"+g+"][name]");c.find(".standard_value").attr("name",
"grading_standard[standard_data][scheme_"+g+"][value]");$(this).parents(".insert_grading_standard").after(c.show());c.after(d);b.find(":text:first").blur();c.find(":text:first").focus().select();c.addClass("to_add")}});$(".grading_standard .delete_row_link").click(function(b){b.preventDefault();if(!($(this).parents(".grading_standard").find(".grading_standard_row:visible").length<2)){b=$(this).parents(".grading_standard_row");b.prev(".insert_grading_standard").length>0?b.prev(".insert_grading_standard").remove():
b.next(".insert_grading_standard").remove();b.fadeOut(function(){$(this).addClass("to_delete");$(".grading_standard input[type='text']:first").triggerHandler("change")})}});$(".grading_standard input[type='text']").bind("blur change",function(){var b=$(this).parents(".grading_standard"),c=parseFloat($(this).parents(".grading_standard_row").find(".standard_value").val());c=Math.round(c*10)/10;$(this).parents(".grading_standard_row").find(".standard_value").val(c);if(isNaN(c))c=null;var d=c||100;c=
c||0;var g=b.find(".grading_standard_row:not(.blank,.to_delete)");for(b=g.index($(this).parents(".grading_standard_row"))+1;b<g.length;b++){var j=g.eq(b),h=parseFloat(j.find(".standard_value").val());if(isNaN(h))h=null;if(b==g.length-1)h=0;else if(!h||h>d-0.1)h=parseInt(d)-1;j.find(".standard_value").val(h);d=h}for(b=g.index($(this).parents(".grading_standard_row"))-1;b>=0;b--){j=g.eq(b);h=parseFloat(j.find(".standard_value").val());if(isNaN(h))h=null;if(b==g.length-1)h=0;else if(!h||h<c+0.1)h=parseInt(c)+
1;c=h;j.find(".standard_value").val(h)}d=100;g.each(function(l){var k=parseFloat($(this).find(".standard_value").val());l=g.index(this);if(isNaN(k))k=null;if(l==g.length-1)k=0;else if(!k||k>d-0.1)k=parseInt(d)-1;$(this).find(".standard_value").val(k);d=k});c=0;for(b=g.length-1;b>=0;b--){j=g.eq(b);h=parseFloat(j.find(".standard_value").val());if(isNaN(h))h=null;if(b==g.length-1)h=0;else if(!h||h<c+0.1)h=parseInt(c)+1;c=h;j.find(".standard_value").val(h)}g.each(function(l){l=g.eq(l-1);var k=0;if(l&&
l.length>0){k=parseFloat(l.find(".standard_value").val());if(isNaN(k))k=0;$(this).find(".edit_max_score").text("< "+k)}});g.filter(":first").find(".edit_max_score").text(100)})})});
$.extend(true,I18n=I18n||{},{translations:{es:{grading_standards:{grading_scheme_not_set:"No Establecido",buttons:{save:"Guardar"},no_grading_standards:"No se encontraron estandares de calificaci\u00f3n",confirm:{delete_grading_scheme:"\u00bfSeguro que quiere borrar este esquema de calificaci\u00f3n?",unlink_grading_scheme:"\u00bfSeguro que quiere desenlazar este esquema de calificaci\u00f3n?"},errors:{save_failed:"Guardado Fall\u00f3",cannot_delete_grading_scheme:"Hubo un problema borrando este esquema de calificaci\u00f3n",
cannot_remove_grading_scheme:"Hubo un problema removiendo este esquema de calificaci\u00f3n. Por favor recargue la p\u00e1gina e intente de nuevo.",cannot_load_grading_standards:"Fall\u00f3 la Carga de Estandares de Calificaci\u00f3n. Intente de Nuevo."},titles:{grading_scheme_info:"Ver/Editar Esquema de Calificaci\u00f3n"},grading_scheme_currently_set:"Establecido Actualmente",status:{saving:"Guardando...",loading_grading_standards:"Cargando los Estandares de Calificaci\u00f3n..."}},user_lists:{users_to_add:{one:"Si continua, 1 usuario ser\u00e1 agregado.",
other:"Si continua as\u00ed, %{count} usuarios ser\u00e1n agregados."},duplicate_users:{one:"se encontr\u00f3 1 usuario duplicado, los duplicados han sido removidos.",other:"se encontraron %{count} duplicados, los duplicados han sido removidos."},messages:{processing:"Procesando..."},buttons:{"continue":"Continue..."},users_added:{one:"1 usuario agregado",other:"%{count} users added"},adding_users:"Agregando Usuarios...",invalid_users_notice:"Algunos pudieron haber sido inv\u00e1lidos, y pueda que necesite regresar y arreglar errores.",
delete_confirm:"\u00bfEst\u00e1 seguro que quiere remover este usuario?",just_now:"Justo Ahora",user_parsing_errors:{one:"Ocurri\u00f3 1 error en el an\u00e1lisis de esa lista de usuarios.",other:"Ocurrieron %{count} errores en el an\u00e1lisis de esa lista de usuarios."},add_n_users:{one:"OK se mira bien, agregue a este usuario",other:"OK se mira bien, agregue a estos %{count} usuarios"},users_adding_failed:"No se pudieron inscribir usuarios",cant_unenroll:"Este usuario fue inscrito autom\u00e1ticamente usando el sistema de inscripci\u00f3n del campus, entonces no pueden ser removidos manualmente. Por favor contacte al administrador de su sistema si tiene preguntas."},
external_tools:{messages:{saving_tool_settings:"Guardando las Configuraciones de Herramientas..."},buttons:{save_tool_settings:"Guardar las Configuraciones de Herramientas"},prompts:{remove_tool:"\u00bfSeguro que quiere remover esta herramienta? Cualquier curso usando esta herramienta ya no funcionar\u00e1."},errors:{save_tool_settings_failed:"No se pudieron guardar las configuraciones de Herramientas"},titles:{edit_external_tool:"Editar la Herramienta Externa"}},course_settings:{indexed_course:"Inclu\u00eddo en el \u00edndice p\u00fablico de los cursos",
private_course:"Privado",buttons:{re_sent_all:"\u00a1Re-enviadas Todas las Invitaciones No Aceptadas!",re_sending_all:"Re-enviando Invitaciones No Aceptadas...",adding_section:"Agregando Secci\u00f3n...",add_section:"Agregar Secci\u00f3n"},invitation_sent:"\u00a1Invitaci\u00f3n Enviada!",details:{re_send_invitation:"Este usuario a\u00fan no ha aceptado su invitaci\u00f3n. Haga click para re-enviar la invitaci\u00f3n."},course_dates_enforced:"Usuarios s\u00f3lo pueden participar en el curso entre estas fechas",
confirm:{publish_grades:"\u00bfEst\u00e1 seguro que quiere publicar estas calificaciones al sistema de informaci\u00f3n de estudiantes? Deber\u00eda hacer esto s\u00f3lo cuando las calificaciones han sido finalizadas.",re_publish_grades:"\u00bfEst\u00e1 seguro que quiere volver a publicar estas calificaciones al sistema de informaci\u00f3n de estudiantes?",delete_section:"\u00bfEst\u00e1 seguro que quiere borrar esta secci\u00f3n?"},grading_standard_set:"Establecido",errors:{section:"No se pudo agregar la secci\u00f3n, intente de nuevo",
publish_grades:"Ocurri\u00f3 un error al publicar las calificaciones al sistema de informaci\u00f3n de estudiantes. Intente de nuevo.",re_send_all:"El env\u00edo fall\u00f3, intente de nuevo",invitation:"La invitaci\u00f3n fall\u00f3. Intente de nuevo.",move_user:"Ocurri\u00f3 un error al mover al usuario a la secci\u00f3n nueva. Intente de nuevo.",invalid_sis_status:"Estatus inv\u00e1lido de publicaci\u00f3n en SIS"},course_dates_unenforced:"Estas fechas no afectar\u00e1n la disponibilidad del curso",
titles:{hashtag_help:"\u00bfQu\u00e9 es un Hashtag?",click_to_edit:"Haga Click para Editar",enrollment_details:"Detalles de la Inscripci\u00f3n",reset_course_content_dialog_help:"Restablecer el Contenido del Curso",move_course:"Mover el Curso"},public_course:"P\u00fablico",defaults:{user_name:"Usuario"},links:{re_send_invitation:"Re-Enviar la Invitaci\u00f3n",re_send_all:"Re-Enviar todas las Invitaciones No Aceptadas",republish:"Volver a publicar calificaciones a SIS",publish:"Publicar calificaciones a SIS",
re_sending_invitation:"Re-Enviando la Invitaci\u00f3n...",publishing:"Publicando las calificaciones a SIS..."},grading_standard_unset:"No establecido",invitation_sent_now:"Hace poco"}}}});
