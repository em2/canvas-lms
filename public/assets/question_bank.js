I18n.scoped("question_bank",function(l){$(document).ready(function(){function m(e){$(".add_outcome_text").text(l.t("updating_outcomes","Updating Outcomes...")).attr("disabled",true);var h={},c;for(c in e){var i=e[c];h["assessment_question_bank[outcomes]["+i[0]+"]"]=i[1]}if(e.length==0)h["assessment_question_bank[outcomes]"]="";e=$(".edit_bank_link").attr("href");$.ajaxJSON(e,"PUT",h,function(d){d=d.assessment_question_bank.learning_outcome_tags.sort(function(n,o){var p=(n.content_tag&&n.content_tag.learning_outcome&&
n.content_tag.learning_outcome.short_description||"none").toLowerCase(),q=(o.content_tag&&o.content_tag.learning_outcome&&o.content_tag.learning_outcome.short_description||"none").toLowerCase();return p<q?-1:p>q?1:0});$(".add_outcome_text").text(l.t("align_outcomes","Align Outcomes")).attr("disabled",false);var j=$("#aligned_outcomes_list");j.find(".outcome:not(.blank)").remove();var b=j.find(".blank:first").clone(true).removeClass("blank"),g;for(g in d){var f=d[g].content_tag,k={short_description:f.learning_outcome.short_description,
mastery_threshold:Math.round(f.mastery_score*1E4)/100},a=b.clone(true);a.attr("data-id",f.learning_outcome_id);a.fillTemplateData({data:k});j.append(a.show())}},function(){$(".add_outcome_text").text(l.t("update_outcomes_fail","Updating Outcomes Failed")).attr("disabled",false)})}$("#aligned_outcomes_list").delegate(".delete_outcome_link","click",function(e){e.preventDefault();e=confirm(l.t("remove_outcome_from_bank","Are you sure you want to remove this outcome from the bank?"));var h=[],c=$(this).parents(".outcome").attr("data-id");
if(e){$(this).parents(".outcome").dim();$("#aligned_outcomes_list .outcome:not(.blank)").each(function(){var i=$(this).attr("data-id"),d=$(this).getTemplateData({textValues:["mastery_threshold"]}).mastery_threshold/100;i!=c&&h.push([i,d])});m(h)}});$(".add_outcome_link").click(function(e){e.preventDefault();find_outcome.find(function(h){var c=h.find(".learning_outcome_id").text();h=parseFloat(h.find(".mastery_level").val())/100||1;var i=[];$("#aligned_outcomes_list .outcome:not(.blank)").each(function(){var d=
$(this).attr("data-id"),j=$(this).getTemplateData({textValues:["mastery_threshold"]}).mastery_threshold/100;i.push([d,j])});i.push([c,h]);m(i)})})})});
I18n.scoped("find_outcome",function(l){var m=function(){return{find:function(e,h){h=h||{};m.callback=e;var c=$("#find_outcome_criterion_dialog");if(!c.hasClass("loaded")){c.find(".loading_message").text(l.t("messages.loading_outcomes","Loading Outcomes..."));$.ajaxJSON(c.find(".outcomes_list_url").attr("href"),"GET",{},function(d){valids=[];for(var j in d){var b=d[j].learning_outcome;if(!h.for_rubric||b.data&&b.data.rubric_criterion)valids.push(b)}if(valids.length===0){j=h.for_rubric?l.t("messages.no_rubric_outcomes_found",
"No Rubric-Configured Outcomes found"):l.t("messages.no_outcomes_found","No Outcomes found");c.find(".loading_message").text(j)}else{c.find(".loading_message").hide();c.addClass("loaded");for(j in valids){b=valids[j];b.name=b.short_description;b.mastery_points=b.data.rubric_criterion.mastery_points||b.data.rubric_criterion.points_possible;d=c.find(".outcomes_select.blank:first").clone(true).removeClass("blank");b.title=b.short_description;var g=$("<div/>");g.text(b.short_description);b.title=$.truncateText($.trim(g.text()),
35);b.display_name=b.cached_context_short_name||"";d.fillTemplateData({data:b});c.find(".outcomes_selects").append(d.show());d=c.find(".outcome.blank:first").clone(true).removeClass("blank");d.find(".mastery_level").attr("id","outcome_question_bank_mastery_"+b.id).end().find(".mastery_level_text").attr("for","outcome_question_bank_mastery_"+b.id);b.learning_outcome_id=b.id;g=b.data&&b.data.rubric_criterion;g=g.points_possible&&g.mastery_points!=null&&g.mastery_points/g.points_possible||0;g=Math.round(g*
1E4)/100||"";d.find(".mastery_level").val(g);d.fillTemplateData({data:b,htmlValues:["description"]});d.addClass("outcome_"+b.id);if(b.data&&b.data.rubric_criterion)for(var f in b.data.rubric_criterion.ratings){g=b.data.rubric_criterion.ratings[f];var k=d.find(".rating.blank").clone(true).removeClass("blank");k.fillTemplateData({data:g});d.find("tr").append(k.show())}c.find(".outcomes_list").append(d)}c.find(".outcomes_select:not(.blank):first").click()}},function(){c.find(".loading_message").text(l.t("errors.outcome_retrieval_failed",
"Outcomes Retrieval failed unexpected.  Please try again."))})}var i;i=h.for_rubric?l.t("titles.find_outcome_criterion","Find Outcome Criterion"):l.t("titles.find_outcome","Find Outcome");c.dialog("close").dialog({autoOpen:false,modal:true,title:i,width:700,height:400}).dialog("open")}}}();window.find_outcome=m;$(document).ready(function(){$("#find_outcome_criterion_dialog .outcomes_select").click(function(e){e.preventDefault();$("#find_outcome_criterion_dialog .outcomes_select.selected_side_tab").removeClass("selected_side_tab");
$(this).addClass("selected_side_tab");e=$(this).getTemplateData({textValues:["id"]}).id;$("#find_outcome_criterion_dialog .outcomes_list .outcome").hide();$("#find_outcome_criterion_dialog .outcomes_list .outcome_"+e).show()});$("#find_outcome_criterion_dialog .select_outcome_link").click(function(e){e.preventDefault();e=$(this).parents(".outcome");$("#find_outcome_criterion_dialog").dialog("close");$.isFunction(m.callback)&&m.callback(e)})})});
(function(){var l=Handlebars.template,m=Handlebars.templates=Handlebars.templates||{};m["quiz/move_question"]=l(function(e,h,c,i,d){c=c||e.helpers;e="";var j,b=c.helperMissing,g=this.escapeExpression;i=c.questions||h.questions;j=c.each;d=this.program(1,function(f){var k="",a;k+='\n<li class="list_question">\n  <input type="checkbox" id="list_question_';a=c.assessment_question||f.assessment_question;a=a===null||a===undefined||a===false?a:a.id;if(typeof a==="function")a=a.call(f,{hash:{}});else if(a===
void 0)a=b.call(f,"assessment_question.id",{hash:{}});k+=g(a)+'" class="list_question_checkbox" name="questions[';a=c.assessment_question||f.assessment_question;a=a===null||a===undefined||a===false?a:a.id;if(typeof a==="function")a=a.call(f,{hash:{}});else if(a===void 0)a=b.call(f,"assessment_question.id",{hash:{}});k+=g(a)+'" value="';a=c.assessment_question||f.assessment_question;a=a===null||a===undefined||a===false?a:a.id;if(typeof a==="function")a=a.call(f,{hash:{}});else if(a===void 0)a=b.call(f,
"assessment_question.id",{hash:{}});k+=g(a)+'" />\n  <label for="list_question_';a=c.assessment_question||f.assessment_question;a=a===null||a===undefined||a===false?a:a.id;if(typeof a==="function")a=a.call(f,{hash:{}});else if(a===void 0)a=b.call(f,"assessment_question.id",{hash:{}});k+=g(a)+'" class="list_question_name">';a=c.assessment_question||f.assessment_question;a=a===null||a===undefined||a===false?a:a.question_data;a=a===null||a===undefined||a===false?a:a.question_name;if(typeof a==="function")a=
a.call(f,{hash:{}});else if(a===void 0)a=b.call(f,"assessment_question.question_data.question_name",{hash:{}});k+=g(a)+'</label>\n  <div class="list_question_text">';a=c.assessment_question||f.assessment_question;a=a===null||a===undefined||a===false?a:a.question_data;a=a===null||a===undefined||a===false?a:a.question_text;if(typeof a==="function")a=a.call(f,{hash:{}});else if(a===void 0)a=b.call(f,"assessment_question.question_data.question_text",{hash:{}});if(a||a===0)k+=a;k+="</div>\n</li>\n";return k},
d);d.hash={};d.fn=d;d.inverse=this.noop;if((i=j.call(h,i,d))||i===0)e+=i;e+="\n";return e});define("jst/quiz/move_question",["compiled/handlebars_helpers"],function(){return m["quiz/move_question"]})})();
$.extend(true,I18n=I18n||{},{translations:{es:{question_bank:{remove_outcome_from_bank:"\u00bfSeguro que quiere remover este resultado del grupo?",updating_outcomes:"Actualizando Resultados...",align_outcomes:"Asignar Resultados",update_outcomes_fail:"Actualizaci\u00f3n de los Resultados Fall\u00f3"},find_outcome:{messages:{loading_outcomes:"Cargando Resultados...",no_outcomes_found:"No se encontraron Resultados",no_rubric_outcomes_found:"No se encontraron Resultados Configurados para R\u00fabricas"},
errors:{outcome_retrieval_failed:"La Recuperaci\u00f3n de Resultados fall\u00f3. Intente de nuevo."},titles:{find_outcome:"Encontrar Resultado",find_outcome_criterion:"Encontrar los Criterios de Resultados"}}}}});
