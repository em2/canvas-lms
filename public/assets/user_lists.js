I18n.scoped("user_lists",function(c){var j=$("#user_lists_processed_person_template").removeAttr("id").detach(),k=$("#user_list_no_valid_users"),l=$("#user_list_with_errors"),f=$("#user_lists_processed_people"),m=$("#user_list_duplicates_found"),b=$("#enroll_users_form"),n=$("#enrollment_blank").removeAttr("id").hide(),o=$("#user_lists_path").attr("href"),e=INST.UserLists={init:function(){e.showTextarea();b.find(".cancel_button").click(function(){$(".add_users_link").show();b.hide()}).end().find(".go_back_button").click(e.showTextarea).end().find(".verify_syntax_button").click(function(a){a.preventDefault();
e.showProcessing();$.ajaxJSON(o,"POST",b.getFormData(),e.showResults)}).end().submit(function(a){a.preventDefault();a.stopPropagation();b.find(".add_users_button").text(c.t("adding_users","Adding Users...")).attr("disabled",true);$.ajaxJSON(b.attr("action"),"POST",b.getFormData(),function(d){b.find(".user_list").val("");e.showTextarea();if(!d||!d.length)return false;$.each(d,function(){e.addUserToList(this.enrollment)});$.flashMessage(c.t("users_added",{one:"1 user added",other:"%{count} users added"},
{count:d.length}))},function(){$.flashError(c.t("users_adding_failed","Failed to enroll users"))})});b.find("#enrollment_type").change(function(){$("#limit_privileges_to_course_section_holder").showIf($(this).val()=="TeacherEnrollment"||$(this).val()=="TaEnrollment")}).change();$(".unenroll_user_link").click(function(a){a.preventDefault();a.stopPropagation();$(this).hasClass("cant_unenroll")?alert(c.t("cant_unenroll","This user was automatically enrolled using the campus enrollment system, so they can't be manually removed.  Please contact your system administrator if you have questions.")):
$(this).parents(".user").confirmDelete({message:c.t("delete_confirm","Are you sure you want to remove this user?"),url:$(this).attr("href"),success:function(){$(this).fadeOut(function(){e.updateCounts()})}})})},showTextarea:function(){b.find(".add_users_button, .go_back_button, #user_list_parsed").hide();b.find(".verify_syntax_button, .cancel_button, #user_list_textarea_container").show().removeAttr("disabled");b.find(".user_list").removeAttr("disabled").loadingImage("remove").focus().select();b.find(".verify_syntax_button").attr("disabled",
false).text(c.t("buttons.continue","Continue..."))},showProcessing:function(){b.find(".verify_syntax_button").attr("disabled",true).text(c.t("messages.processing","Processing..."));b.find(".user_list").attr("disabled",true).loadingImage()},showResults:function(a){b.find(".add_users_button, .go_back_button, #user_list_parsed").show();b.find(".add_users_button").attr("disabled",false).text(c.t("add_n_users",{one:"OK Looks Good, Add This 1 User",other:"OK Looks Good, Add These %{count} Users"},{count:a.users.length}));
b.find(".verify_syntax_button, .cancel_button, #user_list_textarea_container").hide();b.find(".user_list").removeAttr("disabled").loadingImage("remove");f.html("").show();if(!a||!a.users||!a.users.length){k.appendTo(f);b.find(".add_users_button").hide()}else{a.errored_users&&a.errored_users.length&&l.appendTo(f).find(".message_content").html(c.t("user_parsing_errors",{one:"There was 1 error parsing that list of users.",other:"There were %{count} errors parsing that list of users."},{count:a.errored_users.length})+
" "+c.t("invalid_users_notice","There may be some that were invalid, and you might need to go back and fix any errors.")+" "+c.t("users_to_add",{one:"If you proceed as is, 1 user will be added.",other:"If you proceed as is, %{count} users will be added."},{count:a.users.length}));a.duplicates&&a.duplicates.length&&m.appendTo(f).find(".message_content").html(c.t("duplicate_users",{one:"1 duplicate user found, duplicates have been removed.",other:"%{count} duplicate user found, duplicates have been removed."},
{count:a.duplicates.length}));$.each(a.users,function(){j.clone(true).fillTemplateData({data:this}).appendTo(f).show()})}},updateCounts:function(){$.each(["student","teacher","ta","teacher_and_ta","student_and_observer","observer"],function(){$("."+this+"_count").text($("."+this+"_enrollments .user:visible").length)})},addUserToList:function(a){var d=$.underscore(a.type),g=$(".user_list."+d+"s");g.length||(g=d=="student_enrollment"||d=="observer_enrollment"?$(".user_list.student_and_observer_enrollments"):
$(".user_list.teacher_and_ta_enrollments"));g.find(".none").remove();a.invitation_sent_at=c.t("just_now","Just Now");var h=null;g.find(".user").each(function(){var i=$(this).getTemplateData({textValues:["name"]}).name;if(i&&a.name&&i.toLowerCase()>a.name.toLowerCase()){h=$(this);return false}});if(!$("#enrollment_"+a.id).length){d=n.clone(true).fillTemplateData({textValues:["name","membership_type","email"],id:"enrollment_"+a.id,hrefValues:["id","user_id","pseudonym_id","communication_channel_id"],
data:a}).addClass(d).removeClass("nil_class user_").addClass("user_"+a.user_id).toggleClass("pending",a.workflow_state!="active")[h?"insertBefore":"appendTo"](h||g).show().animate({backgroundColor:"#FFEE88"},1E3).animate({display:"block"},2E3).animate({backgroundColor:"#FFFFFF"},2E3,function(){$(this).css("backgroundColor","")});d.parents(".user_list").scrollToVisible(d)}e.updateCounts()}};$(INST.UserLists.init)});
$.extend(true,I18n=I18n||{},{translations:{es:{user_lists:{users_to_add:{one:"Si continua, 1 usuario ser\u00e1 agregado.",other:"Si continua as\u00ed, %{count} usuarios ser\u00e1n agregados."},duplicate_users:{one:"se encontr\u00f3 1 usuario duplicado, los duplicados han sido removidos.",other:"se encontraron %{count} duplicados, los duplicados han sido removidos."},messages:{processing:"Procesando..."},buttons:{"continue":"Continue..."},users_added:{one:"1 usuario agregado",other:"%{count} users added"},
just_now:"Justo Ahora",delete_confirm:"\u00bfEst\u00e1 seguro que quiere remover este usuario?",adding_users:"Agregando Usuarios...",invalid_users_notice:"Algunos pudieron haber sido inv\u00e1lidos, y pueda que necesite regresar y arreglar errores.",user_parsing_errors:{one:"Ocurri\u00f3 1 error en el an\u00e1lisis de esa lista de usuarios.",other:"Ocurrieron %{count} errores en el an\u00e1lisis de esa lista de usuarios."},add_n_users:{one:"OK se mira bien, agregue a este usuario",other:"OK se mira bien, agregue a estos %{count} usuarios"},
cant_unenroll:"Este usuario fue inscrito autom\u00e1ticamente usando el sistema de inscripci\u00f3n del campus, entonces no pueden ser removidos manualmente. Por favor contacte al administrador de su sistema si tiene preguntas.",users_adding_failed:"No se pudieron inscribir usuarios"}}}});
