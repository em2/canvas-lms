I18n.scoped("context.inbox",function(d){$(document).ready(function(){var b=[];$("#visible_message_types :checkbox").each(function(){$(this).attr("checked")&&b.push($(this).val())});b=b.join(",");$("#visible_message_types :checkbox").change(function(){var a=[];$("#visible_message_types :checkbox").each(function(){$("#message_list").toggleClass("show_"+$(this).val(),!!$(this).attr("checked"));$(this).attr("checked")&&a.push($(this).val())});a=a.join(",");a!=b&&$.ajaxJSON($(".update_user_url").attr("href"),
"PUT",{"user[visible_inbox_types]":a},function(c){b=c.user.visible_types},function(){})}).change();$("#mark_inbox_as_read_form").formSubmit({beforeSubmit:function(){$(this).find("button").attr("disabled",true).find(".msg").text(d.t("status.marking_all_as_read","Marking All as Read..."))},success:function(){$("#message_list .inbox_item:visible").addClass("read");$(this).find("button").attr("disabled",false).find(".msg").text(d.t("buttons.mark_all_as_read","Mark All Messages as Read"));$("#identity .unread-messages-count").remove();
$(this).slideUp()},error:function(){$(this).find("button").attr("disabled",false).find(".msg").text(d.t("errors.mark_as_read_failed","Marking failed, please try again"))}})});window.messages={updateInboxItem:function(b,a,c){a=a.inbox_item;a.created_at=$.parseFromISO(a.created_at).datetime_formatted;if(!b||b.length===0)b=$("#inbox_item_blank:first").clone(true).removeAttr("id");b.addClass($.underscore(a.asset_type));a.sender_name=a.sender_name;var e=a.context_code.split("_");a.context_id=e.pop();a.context_type_pluralized=
$.pluralize(e.join("_"));a.context_name=$(".context_name_for_"+a.context_code).text();b.fillTemplateData({data:a,id:"inbox_item_"+a.id,hrefValues:["id","user_id","sender_id","context_id","context_type_pluralized"]});$("#message_list .no_messages").remove();if(b.parents("#message_list").length===0){b.css("display","");if(c&&c=="top"){$("#message_list").prepend(b);$("html,body").scrollTo($("#messages_view"))}else{b.toggleClass("read",a.workflow_state=="read");$("#message_list #pageless-loader").length>
0?$("#message_list #pageless-loader").before(b):$("#message_list").append(b)}}return b}}});$.extend(true,I18n=I18n||{},{translations:{es:{context:{inbox:{buttons:{mark_all_as_read:"Marcar Todos los Mensajes como Le\u00eddos"},errors:{mark_as_read_failed:"No se pudo marcar como le\u00eddo, intente de nuevo"},status:{marking_all_as_read:"Marcando Todo como Le\u00eddo..."}}}}}});
