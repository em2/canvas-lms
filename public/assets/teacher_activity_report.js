(function(e){e.extend({tablesorter:new function(){function c(a,b){m(a+","+((new Date).getTime()-b.getTime())+"ms")}function m(a){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(a):alert(a)}function p(a,b){if(a.config.debug)var d="";if(a.tBodies.length!=0){var f=a.tBodies[0].rows;if(f[0])for(var g=[],l=f[0].cells.length,h=0;h<l;h++){var i=false;if(e.metadata&&e(b[h]).metadata()&&e(b[h]).metadata().sorter)i=u(e(b[h]).metadata().sorter);else if(a.config.headers[h]&&a.config.headers[h].sorter)i=
u(a.config.headers[h].sorter);if(!i)a:{i=a;for(var j=f,k=-1,r=h,n=s.length,q=false,v=false,B=true;v==""&&B;){k++;if(j[k]){q=j[k].cells[r];v=e.trim(y(i.config,q));i.config.debug&&m("Checking if value was empty on row:"+k)}else B=false}for(j=1;j<n;j++)if(s[j].is(v,i,q)){i=s[j];break a}i=s[0]}if(a.config.debug)d+="column:"+h+" parser:"+i.id+"\n";g.push(i)}a.config.debug&&m(d);return g}}function u(a){for(var b=s.length,d=0;d<b;d++)if(s[d].id.toLowerCase()==a.toLowerCase())return s[d];return false}function t(a){if(a.config.debug)var b=
new Date;for(var d=a.tBodies[0]&&a.tBodies[0].rows.length||0,f=a.tBodies[0].rows[0]&&a.tBodies[0].rows[0].cells.length||0,g=a.config.parsers,l={row:[],normalized:[]},h=0;h<d;++h){var i=e(a.tBodies[0].rows[h]),j=[];if(i.hasClass(a.config.cssChildRow))l.row[l.row.length-1]=l.row[l.row.length-1].add(i);else{l.row.push(i);for(var k=0;k<f;++k)j.push(g[k].format(y(a.config,i[0].cells[k]),a,i[0].cells[k]));j.push(l.normalized.length);l.normalized.push(j)}}a.config.debug&&c("Building cache for "+d+" rows:",
b);return l}function y(a,b){var d="";if(!b)return"";if(!a.supportsTextContent)a.supportsTextContent=b.textContent||false;return d=a.textExtraction=="simple"?a.supportsTextContent?b.textContent:b.childNodes[0]&&b.childNodes[0].hasChildNodes()?b.childNodes[0].innerHTML:b.innerHTML:typeof a.textExtraction=="function"?a.textExtraction(b):e(b).text()}function z(a,b){if(a.config.debug)var d=new Date;for(var f=b.row,g=b.normalized,l=g.length,h=g[0].length-1,i=e(a.tBodies[0]),j=[],k=0;k<l;k++){var r=g[k][h];
j.push(f[r]);if(!a.config.appender)for(var n=f[r].length,q=0;q<n;q++)i[0].appendChild(f[r][q])}a.config.appender&&a.config.appender(a,j);j=null;a.config.debug&&c("Rebuilt table:",d);A(a);setTimeout(function(){e(a).trigger("sortEnd")},0)}function G(a){if(a.config.debug)var b=new Date;var d=H(a);$tableHeaders=e(a.config.selectorHeaders,a).each(function(f){this.column=d[this.parentNode.rowIndex+"-"+this.cellIndex];this.count=this.order=typeof a.config.sortInitialOrder!="Number"?a.config.sortInitialOrder.toLowerCase()==
"desc"?1:0:a.config.sortInitialOrder==1?1:0;var g;g=e.metadata&&e(this).metadata().sorter===false?true:false;if(!g)g=a.config.headers[f]&&a.config.headers[f].sorter===false?true:false;if(g)this.sortDisabled=true;if(C(a,f))this.order=this.lockedOrder=C(a,f);if(!this.sortDisabled){g=e(this).addClass(a.config.cssHeader);a.config.onRenderHeader&&a.config.onRenderHeader.apply(g)}a.config.headerList[f]=this});if(a.config.debug){c("Built headers:",b);m($tableHeaders)}return $tableHeaders}function H(a){var b=
[],d={};a=a.getElementsByTagName("THEAD")[0].getElementsByTagName("TR");for(var f=0;f<a.length;f++)for(var g=a[f].cells,l=0;l<g.length;l++){var h=g[l],i=h.parentNode.rowIndex,j=i+"-"+h.cellIndex,k=h.rowSpan||1;h=h.colSpan||1;var r;if(typeof b[i]=="undefined")b[i]=[];for(var n=0;n<b[i].length+1;n++)if(typeof b[i][n]=="undefined"){r=n;break}d[j]=r;for(n=i;n<i+k;n++){if(typeof b[n]=="undefined")b[n]=[];j=b[n];for(var q=r;q<r+h;q++)j[q]="x"}}return d}function C(a,b){if(a.config.headers[b]&&a.config.headers[b].lockedOrder)return a.config.headers[b].lockedOrder;
return false}function A(a){for(var b=a.config.widgets,d=b.length,f=0;f<d;f++)D(b[f]).format(a)}function D(a){for(var b=w.length,d=0;d<b;d++)if(w[d].id.toLowerCase()==a.toLowerCase())return w[d]}function I(a,b){for(var d=b.length,f=0;f<d;f++)if(b[f][0]==a)return true;return false}function E(a,b,d,f){b.removeClass(f[0]).removeClass(f[1]);var g=[];b.each(function(){this.sortDisabled||(g[this.column]=e(this))});a=d.length;for(b=0;b<a;b++)g[d[b][0]].addClass(f[d[b][1]])}function J(a){if(a.config.widthFixed){var b=
e("<colgroup>");e("tr:first td",a.tBodies[0]).each(function(){b.append(e("<col>").css("width",e(this).width()))});e(a).prepend(b)}}function F(a,b,d){if(a.config.debug)var f=new Date;for(var g="var sortWrapper = function(a,b) {",l=b.length,h=0;h<l;h++){var i=b[h][0],j=b[h][1];i=a.config.parsers[i].type=="text"?j==0?x("text","asc",i):x("text","desc",i):j==0?x("numeric","asc",i):x("numeric","desc",i);var k="e"+h;g+="var "+k+" = "+i;g+="if("+k+") { return "+k+"; } ";g+="else { "}h=d.normalized[0].length-
1;g+="return a["+h+"]-b["+h+"];";for(h=0;h<l;h++)g+="}; ";g+="return 0; ";g+="}; ";a.config.debug&&c("Evaling expression:"+g,new Date);eval(g);d.normalized.sort(sortWrapper);a.config.debug&&c("Sorting on "+b.toString()+" and dir "+j+" time:",f);return d}function x(a,b,d){var f="a["+d+"]";d="b["+d+"]";if(a=="text"&&b=="asc")return"("+f+" == "+d+" ? 0 : ("+f+" === null ? Number.POSITIVE_INFINITY : ("+d+" === null ? Number.NEGATIVE_INFINITY : ("+f+" < "+d+") ? -1 : 1 )));";else if(a=="text"&&b=="desc")return"("+
f+" == "+d+" ? 0 : ("+f+" === null ? Number.POSITIVE_INFINITY : ("+d+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+f+") ? -1 : 1 )));";else if(a=="numeric"&&b=="asc")return"("+f+" === null && "+d+" === null) ? 0 :("+f+" === null ? Number.POSITIVE_INFINITY : ("+d+" === null ? Number.NEGATIVE_INFINITY : "+f+" - "+d+"));";else if(a=="numeric"&&b=="desc")return"("+f+" === null && "+d+" === null) ? 0 :("+f+" === null ? Number.POSITIVE_INFINITY : ("+d+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+
f+"));"}var s=[],w=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:true,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:false};this.benchmark=c;this.construct=
function(a){return this.each(function(){if(this.tHead&&this.tBodies){var b,d,f,g;this.config={};g=e.extend(this.config,e.tablesorter.defaults,a);b=e(this);e.data(this,"tablesorter",g);d=G(this);this.config.parsers=p(this,d);f=t(this);var l=[g.cssDesc,g.cssAsc];J(this);d.click(function(h){var i=b[0].tBodies[0]&&b[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&i>0){b.trigger("sortStart");e(this);i=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(h[g.sortMultiSortKey])if(I(i,
g.sortList))for(h=0;h<g.sortList.length;h++){var j=g.sortList[h],k=g.headerList[j[0]];if(j[0]==i){k.count=j[1];k.count++;j[1]=k.count%2}}else g.sortList.push([i,this.order]);else{g.sortList=[];if(g.sortForce!=null){j=g.sortForce;for(h=0;h<j.length;h++)j[h][0]!=i&&g.sortList.push(j[h])}g.sortList.push([i,this.order])}setTimeout(function(){E(b[0],d,g.sortList,l);z(b[0],F(b[0],g.sortList,f))},1);return false}}).mousedown(function(){if(g.cancelSelection){this.onselectstart=function(){return false};return false}});
b.bind("update",function(){var h=this;setTimeout(function(){h.config.parsers=p(h,d);f=t(h)},1)}).bind("updateCell",function(h,i){var j=this.config,k=[i.parentNode.rowIndex-1,i.cellIndex];f.normalized[k[0]][k[1]]=j.parsers[k[1]].format(y(j,i),i)}).bind("sorton",function(h,i){e(this).trigger("sortStart");g.sortList=i;for(var j=g.sortList,k=this.config,r=j.length,n=0;n<r;n++){var q=j[n],v=k.headerList[q[0]];v.count=q[1];v.count++}E(this,d,j,l);z(this,F(this,j,f))}).bind("appendCache",function(){z(this,
f)}).bind("applyWidgetId",function(h,i){D(i).format(this)}).bind("applyWidgets",function(){A(this)});if(e.metadata&&e(this).metadata()&&e(this).metadata().sortlist)g.sortList=e(this).metadata().sortlist;g.sortList.length>0&&b.trigger("sorton",[g.sortList]);A(this)}})};this.addParser=function(a){for(var b=s.length,d=true,f=0;f<b;f++)if(s[f].id.toLowerCase()==a.id.toLowerCase())d=false;d&&s.push(a)};this.addWidget=function(a){w.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:
a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(a){return/^[-+]?\d*$/.test(e.trim(a.replace(/[,.']/g,"")))};this.clearTableBody=function(a){if(e.browser.msie)(function(){for(;this.firstChild;)this.removeChild(this.firstChild)}).apply(a.tBodies[0]);else a.tBodies[0].innerHTML=""}}});e.fn.extend({tablesorter:e.tablesorter.construct});var o=e.tablesorter;o.addParser({id:"text",is:function(){return true},format:function(c){return e.trim(c.toLocaleLowerCase())},type:"text"});
o.addParser({id:"digit",is:function(c,m){return e.tablesorter.isDigit(c,m.config)},format:function(c){return e.tablesorter.formatFloat(c)},type:"numeric"});o.addParser({id:"currency",is:function(c){return/^[\u00a3$\u20ac?.]/.test(c)},format:function(c){return e.tablesorter.formatFloat(c.replace(RegExp(/[\u00a3$\u20ac]/g),""))},type:"numeric"});o.addParser({id:"ipAddress",is:function(c){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(c)},format:function(c){c=c.split(".");for(var m="",p=c.length,
u=0;u<p;u++){var t=c[u];m+=t.length==2?"0"+t:t}return e.tablesorter.formatFloat(m)},type:"numeric"});o.addParser({id:"url",is:function(c){return/^(https?|ftp|file):\/\/$/.test(c)},format:function(c){return jQuery.trim(c.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});o.addParser({id:"isoDate",is:function(c){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(c)},format:function(c){return e.tablesorter.formatFloat(c!=""?(new Date(c.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});
o.addParser({id:"percent",is:function(c){return/\%$/.test(e.trim(c))},format:function(c){return e.tablesorter.formatFloat(c.replace(RegExp(/%/g),""))},type:"numeric"});o.addParser({id:"usLongDate",is:function(c){return c.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(c){return e.tablesorter.formatFloat((new Date(c)).getTime())},type:"numeric"});o.addParser({id:"shortDate",is:function(c){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(c)},
format:function(c,m){var p=m.config;c=c.replace(/\-/g,"/");if(p.dateFormat=="us")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if(p.dateFormat=="uk")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if(p.dateFormat=="dd/mm/yy"||p.dateFormat=="dd-mm-yy")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return e.tablesorter.formatFloat((new Date(c)).getTime())},type:"numeric"});o.addParser({id:"time",is:function(c){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(c)},
format:function(c){return e.tablesorter.formatFloat((new Date("2000/01/01 "+c)).getTime())},type:"numeric"});o.addParser({id:"metadata",is:function(){return false},format:function(c,m,p){c=m.config;c=!c.parserMetadataName?"sortValue":c.parserMetadataName;return e(p).metadata()[c]},type:"numeric"});o.addWidget({id:"zebra",format:function(c){if(c.config.debug)var m=new Date;var p,u=-1,t;e("tr:visible",c.tBodies[0]).each(function(){p=e(this);p.hasClass(c.config.cssChildRow)||u++;t=u%2==0;p.removeClass(c.config.widgetZebra.css[t?
0:1]).addClass(c.config.widgetZebra.css[t?1:0])});c.config.debug&&e.tablesorter.benchmark("Applying Zebra widget",m)}})})(jQuery);
(function(){$(document).ready(function(){var e,o;$.tablesorter.addParser({id:"days_or_never",is:function(){return false},format:function(c){var m;c=$.trim(c);m=parseInt(c,10)||0;return-1*(c==="never"?Number.MAX_VALUE:m)},type:"number"});$.tablesorter.addParser({id:"data-number",is:function(){return false},format:function(c,m,p){return $(p).attr("data-number")},type:"number"});e=$(".report").hasClass("has_user_notes");o={headers:{0:{sorter:"data-number"},1:{sorter:"days_or_never"}}};if(e)o.headers[2]=
{sorter:"days_or_never"};o.headers[4+(e!=null?e:{1:0})]={sorter:"data-number"};o.headers[5+(e!=null?e:{1:0})]={sorter:false};return $(".report").tablesorter(o)})}).call(this);
